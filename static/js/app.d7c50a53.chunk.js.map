{"version":3,"file":"static/js/app.d7c50a53.chunk.js","mappings":"yNAAO,MACMA,EAAa,uCACbC,EAAU,UACVC,EAAW,WACXC,EAAW,WCSjB,SAASC,EAAcC,EAAMC,GAClC,MAAMC,EAAMF,EAAKG,OACjB,IAAK,IAAIC,EAAQ,EAAGA,EAAQF,EAAKE,IAC/B,GAAIJ,EAAKI,GAAOH,KAAOA,EACrB,OAAOG,CAIb,CACO,SAASC,EAASC,EAAIC,GAC3B,IAAIC,EAAQ,KACZ,OAAO,WACL,MAAMC,EAAUC,KACVC,EAAOC,UACbC,aAAaL,GACbA,EAAQM,YAAW,WACjBR,EAAGS,MAAMN,EAASE,EACpB,GAAGJ,EACL,CACF,CACO,SAASS,EAAoBC,GAClC,OAAOA,EAAmB,EAC5B,CClCA,MAAMC,EAAgB,GA+BtB,SAASC,EAA4BC,GACnC,MAAO,CACLC,SAAU,oBACVC,OAAQ,CACNC,OAAQ,CAAC,KAAM,eACfC,SAAUN,EACVO,OAAQ,CAAC,qBAAqBL,IAAe,gBAGnD,CACA,SAASM,EAAqBN,GAC5B,MAAO,CACLC,SAAU,aACVC,OAAQ,CACNC,OAAQ,kBACRC,SAAUN,EACVO,OAAQ,CAAC,qBAAqBL,MAGpC,CACe,SAASO,EAA2BC,GACjD,IAAI,YACFR,EAAW,gBACXS,EAAe,6BACfC,EAA4B,qBAC5BC,EAAoB,iBACpBd,GACEW,EACJ,MAAMI,EA1DR,SAAyBC,GACvB,IAAI,YACFb,EAAW,6BACXU,EAA4B,qBAC5BC,EAAoB,iBACpBd,GACEgB,EACJ,GD2BK,SAAoChB,GACzC,OAAOA,EAAmB,EAC5B,CC7BMiB,CAA2BjB,GAE7B,MAAO,CACLI,SAAUS,EAA+B,gCAAkC,aAC3ER,OAAQ,CACNa,MAAOf,IAGN,CAEL,MAAMK,EAAS,CAAC,qBAAqBL,KAIrC,OAHIU,GACFL,EAAOW,KAAK,oBAAoBL,KAE3B,CACLV,SAAU,QACVC,OAAQ,CACNG,SACAD,SAAUN,GAGhB,CACF,CA6BoBmB,CAAgB,CAChCjB,cACAU,+BACAC,uBACAd,qBAEF,OAAOY,EAAkB,CACvBS,MAAON,GACL,CACFM,MAAON,EACPO,kBAAmBpB,EAA4BC,GAC/CoB,WAAYd,EAAqBN,GAErC,CCvEA,MAAMqB,EAAmC,CAAC,KAAM,cAAe,UAAW,cAAe,8BAA+B,4BAA6B,SAAU,WAAY,cAAe,OAAQ,cAAe,YAC3MC,EAA4B,CAAC,IAAK,4BAA6B,oCAAqC,wCAAyC,uCAKnJ,IAAIC,EAAS,KACN,MAAMC,EAAYC,IACvBF,EAASE,CAAc,EAUZC,EAA0BC,UACrC,IAAI,YACFC,EAAW,KACXC,EAAI,cACJC,EAAa,OACbC,EAAM,SACNC,EAAQ,mBACRC,EAAkB,wBAClBC,EAAuB,aACvBC,EAAY,YACZC,GACEvB,EACJ,MAAMR,EAAS,CAAC,kBAAkBuB,KAC9BG,GACF1B,EAAOW,KAAK,aAAae,KAEvBC,GACF3B,EAAOW,KAAK,eAAegB,KAEzBE,GACF7B,EAAOW,KAAK,oBAEVmB,GACF9B,EAAOW,KAAK,iBAEViB,GACF5B,EAAOW,KAAK,kBAAkBoB,EAAYvD,MAE5C,MAAMkC,EAAQ,CACZd,SAAU,uBACVC,OAAQ,CACNG,SACAD,SHpDkB,GGqDlByB,OACA1B,OAAQkB,EACRgB,MAnDQ,mBAoDRC,YAAaR,KAGX,qBACJS,SACQhB,EAAOR,MAAM,CACrBwB,qBAAsBxB,IAExB,OAAOwB,CAAoB,EA2ChBC,EAAoCb,MAAOc,EAAuBC,KAC7E,MAAMC,EAAWD,EAAQ,CACvBzC,SAAU,wBAAwBwC,WAClCG,KAAM,SACN1C,OAAQ,CACN2C,OAAQH,IAER,CACFzC,SAAU,uBACVpB,GAAI,GAAG4D,WACPG,KAAM,UAER,aAAarB,EAAOuB,OAAOH,EAAS,EAmIzBI,EAAgBC,IAC3B,IAAI,MACF9B,EAAK,WACLE,EAAU,kBACVD,EAAiB,sBACjBsB,GACEO,EACJ,OAAOzB,EAAOuB,OAAO,CACnB7C,SAAU,wBAAwBwC,eAClCG,KAAM,SACNK,KAAM,CACJ/B,QACAE,aACAD,sBAEF,EAoCS+B,EAAqBA,CAACT,EAAuBU,EAAWC,KACnE,MAAMC,EARS,WACf,IAAK,IAAIC,EAAO9D,UAAUT,OAAQwE,EAAQ,IAAIC,MAAMF,GAAOG,EAAO,EAAGA,EAAOH,EAAMG,IAChFF,EAAME,GAAQjE,UAAUiE,GAG1B,OADkBF,EAAMlD,QAAOqD,KAAUA,IACxBC,KAAID,GAAQA,EAAKE,QAAQ,aAAc,MAAKC,KAAK,IACpE,CAEmBC,CAASvC,EAAOwC,KAAKC,QAASzC,EAAOwC,KAAKE,QAAS,uBAAwBxB,EAAuBU,EAAW,cAAeC,GACvIW,EAAOG,SAASC,cAAc,KACpCJ,EAAKK,KAAOf,EACZU,EAAKM,SAAWhB,EAASiB,MAAM,KAAKC,MACpCR,EAAKS,OAAS,SACdN,SAASO,KAAKC,YAAYX,GAC1BA,EAAKY,QACLT,SAASO,KAAKG,YAAYb,EAAK,E,yDCrT1B,MAAMc,EAAmB,mBACnBC,EAA2B,2BAC3BC,EAAyB,yBACzBC,EAA6B,6BAE7BC,EAAqC,qCAGrCC,EAAuC,uCACvCC,EAAqC,qCAErCC,EAAsC,sCACtCC,EAAoC,oCAKpCC,EAAuB,uBACvBC,EAAqB,qBAKrBC,EAAa,aACbC,EAAwB,yBACxBC,EAAsB,sBACtBC,EAAc,cACdC,EAAkB,kBAClBC,EAAgB,gBAChBC,EAA4B,4BAC5BC,EAAsC,sCACtCC,EAAoC,oCACpCC,EAA4C,4CAE5CC,EAAsB,sBACtBC,EAAkC,kCAElCC,GAAgC,gCAUhCC,GAA8B,8BAG9BC,GAAiB,iBACjBC,GAAyB,yBACzBC,GAAuB,uBAIvBC,GAAoB,oBACpBC,GAAoB,oBACpBC,GAAoB,oBAGpBC,GAAyB,yBC3BtC,OAjCqB,CAAC,CACpB/H,GAAI,UACJgI,YAAaC,EAAAA,EAAKC,EAAE,SACpBC,OAAQ,EACRC,OAAQ,EACRC,SAAS,EACTC,MAAO,EACPtF,KAAM,GACL,CACDhD,GAAI,oBACJgI,YAAaC,EAAAA,EAAKC,EAAE,cACpBC,OAAQ,EACRC,OAAQ,EACRC,SAAS,EACTC,MAAO,EACPtF,KAAM,GACL,CACDhD,GAAI,SACJgI,YAAaC,EAAAA,EAAKC,EAAE,UACpBC,OAAQ,EACRC,OAAQ,EACRC,SAAS,EACTC,MAAO,EACPtF,KAAM,GACL,CACDhD,GAAI,SACJgI,YAAaC,EAAAA,EAAKC,EAAE,UACpBC,OAAQ,EACRC,OAAQ,EACRC,SAAS,EACTC,MAAO,EACPtF,KAAM,IC1BD,MAAMuF,GAAe,CAC1BhF,YAAa,CACX8E,SAAS,EACTG,MAAO,KACPxI,GAAI,KACJyI,YAAa,KACblG,WAAY,MAGdmB,qBAAsB,CAAC,EACvBgF,aAAY,GACZC,yBAAqBC,EACrBC,iCAA6BD,EAC7BE,oCAAoC,EACpCC,WAAY,GACZ9F,mBAAe2F,EACfI,kBAAcJ,EACdK,oBAAgBL,EAChBxF,oBAAoB,EACpBC,yBAAyB,EACzBC,cAAc,EACd4F,4BAA4B,EAC5BpH,0BAAsB8G,EACtBO,gBAAiB,EAEjBC,QAAS,GACTC,MAAO,GACPC,WAAY,GAEZC,YAAa,GAEbC,aAAc,GACdC,wBAAoBb,EACpBc,yBAAqBd,EACrBe,UAAWhK,GAuRb,OArRA,WACE,IAAIiK,EAAQjJ,UAAUT,OAAS,QAAsB0I,IAAjBjI,UAAU,GAAmBA,UAAU,GAAK4H,GAC5EsB,EAASlJ,UAAUT,OAAS,EAAIS,UAAU,QAAKiI,EACnD,MAAMkB,EAAoBF,EAAMlB,aAC1BqB,EAAiBH,EAAML,YAC7B,OAAQM,EAAO9F,MACb,KAAKiG,EACH,MAAO,IACFJ,EACHrG,YAAa,CACX8E,SAAS,EACTG,MAAO,KACPxI,GAAI,KACJyI,YAAa,KACblG,WAAY,OAGlB,KAAKyH,EACH,MAAO,IACFJ,EACHrG,YAAa,CACX8E,SAAS,EACTG,MAAO,KACPxI,GAAI6J,EAAOI,QAAQjK,GACnByI,YAAaoB,EAAOI,QAAQxB,YAC5BlG,WAAYsH,EAAOI,QAAQ1H,aAGjC,KAAKyH,EACH,MAAO,IACFJ,EACHrG,YAAa,CACX8E,SAAS,EACTG,MAAOqB,EAAOI,QACdjK,GAAI,KACJyI,YAAa,KACblG,WAAY,OAGlB,KAAKyH,GACH,MAAO,IACFJ,EACHT,gBAAiBU,EAAOI,SAE5B,KAAKD,EACH,CACE,MAAME,EAAqBJ,EAAkBK,MAAKpG,GAAQA,EAAK/D,KAAO6J,EAAOI,QAAQlH,YAAY/C,KACjGkK,EAAmB9B,OAASyB,EAAOI,QAAQvG,qBAAqBxD,OAChEgK,EAAmB5B,MAAQuB,EAAOI,QAAQG,MAAM9B,MAChD4B,EAAmB/B,OAAS0B,EAAOI,QAAQI,WAC3CH,EAAmBlH,KAAO6G,EAAOI,QAAQG,MAAMpH,KAC/CkH,EAAmB7B,SAAU,EAC7BK,GAAa4B,OAAO,CAACxK,EAAcgK,EAAmBI,EAAmBlK,KAAM,EAAGkK,GAClF,MAAMK,EAAyBV,EAAOI,QAAQtB,sBAAwBuB,EAAmBlK,KAAO6J,EAAOI,QAAQtB,sBAAwBiB,EAAMjB,0BAAqDC,IAA9BgB,EAAMjB,qBAC1K,MAAO,IACFiB,EACHlB,aAAY,GACZhF,qBAAsB,IACjBkG,EAAMlG,qBACT,CAACwG,EAAmBlK,IAAK6J,EAAOI,QAAQvG,sBAE1CiF,oBAAqB4B,EAAyBL,EAAqBN,EAAMjB,oBAE7E,CACF,KAAKqB,EACH,MAAO,IACFJ,EACHJ,aAAcK,EAAOI,QAAQzB,MAAMgC,QACnCb,UAAW9J,GAEf,KAAKmK,EACH,CACE,IAAIR,EAAe,GACnB,OAAQK,EAAOI,QAAQQ,YACrB,IAAK,SACHjB,EAAevB,EAAAA,EAAKC,EAAE,+BACtB,MACF,IAAK,WACHsB,EAAevB,EAAAA,EAAKC,EAAE,iCACtB,MACF,IAAK,WACHsB,EAAevB,EAAAA,EAAKC,EAAE,iCACtB,MACF,IAAK,YACHsB,EAAevB,EAAAA,EAAKC,EAAE,iCACtB,MACF,QACEwC,IAAAA,MAAU,gEAGd,MAAO,IACFd,EACHJ,eACAG,UAAW/J,EAEf,CACF,KAAKoK,EAML,KAAKA,EACH,MAAO,IACFJ,EACHJ,aAAcK,EAAOI,QAAQzB,MAAMgC,QACnCb,UAAW9J,GAEf,KAAKmK,EACH,MAAO,IACFJ,EACHJ,aAAcvB,EAAAA,EAAKC,EAAE,gDACrByB,UAAW/J,GAEf,KAAKoK,EACH,MAAO,IACFJ,EACHJ,aAAcK,EAAOI,QAAQO,QAC7Bb,UAAWE,EAAOI,QAAQN,UAC1BF,mBAAoBI,EAAOI,QAAQR,mBACnCC,oBAAqBG,EAAOI,QAAQP,qBAExC,KAAKM,EACH,MAAO,IACFJ,EACHJ,aAAc,GACdG,UAAWhK,GAEf,KAAKqK,EACH,CACE,MAAMW,EAAsBd,EAAOI,QAAQU,oBAC3C,IAAI5B,EAAaa,EAAMb,WAMvB,OALIc,EAAOI,QAAQW,cACjB7B,EAAW5G,KAAKwI,GAEhB5B,EAAaA,EAAWvH,QAAOqJ,GAAWA,EAAQ7K,KAAO2K,EAAoB3K,KAExE,IACF4J,EACHb,aAEJ,CACF,KAAKiB,EACH,MAAO,IACFJ,EACHb,WAAYc,EAAOI,QAAQa,wBAE/B,KAAKd,EACH,MAAO,IACFJ,EACHb,WAAY,IAEhB,KAAKiB,EACH,MAAO,IACFJ,EACHf,4BAA6BgB,EAAOI,QAAQU,oBAC5C7B,oCAAoC,GAExC,KAAKkB,EACH,MAAO,IACFJ,EACHd,oCAAoC,GAExC,KAAKkB,EACH,MAAO,IACFJ,EACHf,iCAA6BD,GAEjC,KAAKoB,EACH,MAAO,IACFJ,EACHb,WAAY,GACZJ,oBAAqBmB,EAAkBK,MAAKpG,GAAQA,EAAK/D,KAAO6J,EAAOI,QAAQc,gBAC/EC,6BAA8BpB,EAAMlG,qBAAqBmG,EAAOI,QAAQc,eACxElC,iCAA6BD,GAEjC,KAAKoB,EACH,MAAO,IACFJ,EACHR,QAASS,EAAOI,QAAQb,QACxBC,MAAOQ,EAAOI,QAAQZ,MACtBC,WAAYO,EAAOI,QAAQX,YAE/B,KAAKU,GACH,MAAO,IACFJ,EACHN,WAAY,IAAIM,EAAMN,WAAYO,EAAOI,UAE7C,KAAKD,EACH,MAAO,IACFJ,EACH3G,cAA6C,YAA9B4G,EAAOI,QAAQgB,WAA2BpB,EAAOI,QAAQzI,OAASoI,EAAM3G,cACvF+F,aAA4C,WAA9Ba,EAAOI,QAAQgB,WAA0BpB,EAAOI,QAAQzI,OAASoI,EAAMZ,aACrFC,eAA8C,aAA9BY,EAAOI,QAAQgB,WAA4BpB,EAAOI,QAAQzI,OAASoI,EAAMX,eACzF7F,mBAAkD,mBAA9ByG,EAAOI,QAAQgB,WAAkCpB,EAAOI,QAAQzI,OAASoI,EAAMxG,mBACnGC,wBAAuD,wBAA9BwG,EAAOI,QAAQgB,WAAuCpB,EAAOI,QAAQzI,OAASoI,EAAMvG,wBAC7GC,aAA4C,WAA9BuG,EAAOI,QAAQgB,WAA0BpB,EAAOI,QAAQzI,OAASoI,EAAMtG,cAEzF,KAAK0G,EACH,CACE,MAAMkB,EAAqBrB,EAAOI,QAAQlH,YAC1CmI,EAAmB7C,SAAU,EACzBwB,EAAOI,QAAQkB,UACjBD,EAAmBlI,OAErB0F,GAAa5I,EAAc4I,GAAcwC,EAAmBlL,KAAOkL,EAGnE,MAAMvC,EAAsBiB,EAAMjB,oBAOlC,OANIA,IACFA,EAAoBN,SAAU,EAC1BwB,EAAOI,QAAQkB,UACjBxC,EAAoB3F,QAGjB,IACF4G,EACHlB,aAAY,GACZC,sBAEJ,CACF,KAAKqB,EACH,MAAO,IACFJ,EACHV,2BAA4BW,EAAOI,QAAQf,2BAA2BkC,WACtEtJ,qBAAsB+H,EAAOI,QAAQf,2BAA2BpH,sBAEpE,KAAKkI,GACH,MAAO,IACFJ,EACHL,YAAaK,EAAML,YAAYzE,KAAIuG,GAAcA,EAAWC,OAASzB,EAAOI,QAAQqB,KAAO,CACzFtL,GAAI6J,EAAOI,QAAQjK,GACnBsL,KAAMD,EAAWC,KACjBC,cAAeF,EAAWE,cAC1BlD,SAAS,GACPgD,KAER,KAAKrB,GACH,MAAO,IACFJ,EACHL,YAAaQ,EAAevI,QAAO6J,GAAcA,EAAWrL,KAAO6J,EAAOI,QAAQ1F,eAClFiF,aAAcK,EAAOI,QAAQzB,MAAMgC,QACnCb,UAAW9J,GAEf,KAAKmK,GACH,MAAO,IACFJ,EACHL,YAAaK,EAAML,YAAYiC,OAAO,CACpCF,KAAMzB,EAAOI,QAAQqB,KACrBC,cAAe1B,EAAOI,QAAQwB,KAC9BpD,SAAS,KAGf,KAAK2B,GACH,MAAO,IACFJ,EACHL,YAAaQ,EAAevI,QAAO6J,GAAcA,EAAWrL,KAAO6J,EAAOI,QAAQ1F,gBAEtF,KAAKyF,GACH,MAAO,IACFJ,EACHL,YAAaQ,EAAevI,QAAO6J,GAAcA,EAAWC,OAASzB,EAAOI,QAAQyB,kBAExF,KAAK1B,GACH,MAAO,IACFJ,EACHL,YAAa,IAEjB,KAAKS,GACH,MAAO,IACFJ,EACH5I,iBAAkB6I,EAAOI,SAE7B,QACE,OAAOL,EAEb,EC3TA,MAAM+B,GAAc,CAACC,EAAAA,GACfC,GAAmBC,OAAOC,sCAAwCC,EAAAA,GAClEC,IAAUC,EAAAA,EAAAA,IAAgB,CAC9BC,UAAWC,KAEb,QAAeC,EAAAA,EAAAA,IAAYJ,GAASJ,IAAiBS,EAAAA,EAAAA,OAAmBX,M,mCCLxE,IAAeY,EAAAA,GAAAA,SAAY,CACzBC,QAAS,CACPC,SAAUC,GAAAA,SACVC,OAAM,UACNC,cAAe,UACfC,cAAeC,GAAAA,QACfC,cAAeC,GAAAA,QACfC,cAAeC,GAAAA,QACfC,aAAcC,GAAAA,OACdC,aAAcC,GAAAA,QACdC,aAAcC,GAAAA,QACdC,aAAcC,GAAAA,QACdC,SAAUC,GAAAA,UACVC,SAAUC,GAAAA,QACVC,cAAeC,GAAAA,QACfC,UAAWC,GAAAA,UACXC,mBAAoBC,GAAAA,MACpBC,YAAaD,GAAAA,MACbE,YAAad,GAAAA,QACbe,kBAAkBC,EAAAA,GAAAA,MAAKN,GAAAA,UAAW,KAClCO,YAAaC,GAAAA,a,g13FCuBjB,MAAMC,GAAY,UAClB1G,EAAAA,EAAK2G,aAAa,KAAMD,GAAWE,IACnC5G,EAAAA,EAAK2G,aAAa,QAASD,GAAWG,IACtC7G,EAAAA,EAAK2G,aAAa,KAAMD,GAAWI,IACnC9G,EAAAA,EAAK2G,aAAa,MAAOD,GAAWK,IACpC/G,EAAAA,EAAK2G,aAAa,KAAMD,GAAWM,IACnChH,EAAAA,EAAK2G,aAAa,KAAMD,GAAWO,IACnCjH,EAAAA,EAAK2G,aAAa,KAAMD,GAAWQ,IACnClH,EAAAA,EAAK2G,aAAa,KAAMD,GAAWS,IACnCnH,EAAAA,EAAK2G,aAAa,SAAUD,GAAWU,IACvCpH,EAAAA,EAAK2G,aAAa,KAAMD,GAAWW,IACnCrH,EAAAA,EAAK2G,aAAa,QAASD,GAAWY,IACtCtH,EAAAA,EAAK2G,aAAa,KAAMD,GAAWa,IACnCvH,EAAAA,EAAK2G,aAAa,KAAMD,GAAWc,IACnCxH,EAAAA,EAAK2G,aAAa,KAAMD,GAAWe,IACnCzH,EAAAA,EAAK2G,aAAa,KAAMD,GAAWgB,IACnC1H,EAAAA,EAAK2G,aAAa,KAAMD,GAAWiB,IACnC3H,EAAAA,EAAK2G,aAAa,KAAMD,GAAWkB,IACnC5H,EAAAA,EAAK2G,aAAa,KAAMD,GAAWmB,IACnC7H,EAAAA,EAAK2G,aAAa,MAAOD,GAAWoB,IACpC9H,EAAAA,EAAK2G,aAAa,KAAMD,GAAWqB,IACnC/H,EAAAA,EAAK2G,aAAa,KAAMD,GAAWsB,IACnChI,EAAAA,EAAK2G,aAAa,QAASD,GAAWuB,IACtCjI,EAAAA,EAAK2G,aAAa,KAAMD,GAAWwB,IACnClI,EAAAA,EAAK2G,aAAa,KAAMD,GAAWyB,IACnCnI,EAAAA,EAAK2G,aAAa,KAAMD,GAAW0B,IACnCpI,EAAAA,EAAK2G,aAAa,KAAMD,GAAW2B,IACnCrI,EAAAA,EAAK2G,aAAa,MAAOD,GAAW4B,IACpCtI,EAAAA,EAAK2G,aAAa,KAAMD,GAAW6B,IACnCvI,EAAAA,EAAK2G,aAAa,KAAMD,GAAW8B,IACnCxI,EAAAA,EAAK2G,aAAa,KAAMD,GAAW+B,IACnCzI,EAAAA,EAAK2G,aAAa,UAAWD,GAAWgC,IACxC1I,EAAAA,EAAK2G,aAAa,UAAWD,GAAWiC,IACxC3I,EAAAA,EAAK2G,aAAa,aAAcD,GAAWkC,IAC3C5I,EAAAA,EAAK2G,aAAa,aAAcD,GAAWmC,IAC3C7I,EAAAA,EAAK2G,aAAa,KAAMD,GAAWoC,IACnC9I,EAAAA,EAAK2G,aAAa,KAAMD,GAAWqC,IACnC/I,EAAAA,EAAK2G,aAAa,QAASD,GAAWsC,IACtC,I,uBC9EA,MACMC,GAAeA,CAACnN,EAAMkG,KAAO,CACjClG,OACAkG,YA6BWkH,GAAiCxG,GAAuB7H,UACnEsO,EAASF,GAAalH,IACtB,IACE,MAAMqH,OPyB4BvO,WACpC,IAAI,GACF9C,GACE2B,EACJ,MAAM,oBACJgJ,SACQjI,EAAOR,MAAM,CACrByI,oBAAqB,CACnBvJ,SAAU,uBACVpB,KACAqB,OAAQ,CACNC,OAAQmB,MAId,OAAOkI,CAAmB,EOxCH2G,CAA2B3G,GAChDyG,EAASF,GAAalH,EAAmD,CACvEW,oBAAqB0G,IAEzB,CAAE,MAAO7I,GACP4I,EAASF,GNb0C,0CMaoB,CACrE1I,UAEJ,GA0EW+I,GAA2B,SAAUxO,EAAa4F,GAC7D,IAAIwC,EAAWxK,UAAUT,OAAS,QAAsB0I,IAAjBjI,UAAU,IAAmBA,UAAU,GAC9E,OAAOmC,MAAOsO,EAAUI,KACtB,MAAMC,EAAW,GACX7H,EAAQ4H,KACR,cACJvO,EACA+F,aAAc9F,EACd+F,eAAgB9F,EAAQ,mBACxBC,EAAkB,wBAClBC,EAAuB,aACvBC,EAAY,YACZC,GACEqG,EAAMuC,UAGVpJ,EAAcA,GAAe6G,EAAMuC,UAAUxD,oBAC7CA,EAAsBA,GAAuBiB,EAAMuC,UAAUxD,oBAAoB3I,GACjFoR,EAASF,GAAalH,EAAoC,CACxDjH,cACAoI,cAEF,IACE,IAAK,IAAIuG,EAAI,EAAGA,GAAK3O,EAAYC,KAAM0O,IAAK,CAC1C,MAAMC,EAAUL,EAA4B,CAC1CvO,YAAaA,EAAY/C,GACzBgD,KAAM0O,EACNzO,gBACAC,SACAC,WACAC,qBACAC,0BACAC,eACAC,gBACCqO,MAAKP,IAAM,CACZ3N,qBAAsB2N,EAAO3N,qBAC7B0G,MAAOiH,EAAOjH,UAEhBqH,EAAStP,KAAKwP,EAChB,CACA,MAAMN,QAAeQ,QAAQC,IAAIL,GAC3BpH,OPtCiBvH,WAC3B,MAAM,qBACJY,SACQhB,EAAOR,MAAM,CACrBwB,qBAAsB,CACpBtC,SAAU,uBACVC,OAAQ,CACNC,OAAQ,CAAC,QACTE,OAAQ,CAAC,gBAAiB,kBAAkBuB,KAC5CxB,SAAU,MAIhB,OAAOmC,EAAqB0G,MAAM9B,KAAK,EOyBVgJ,CAAkBvO,EAAY/C,IACjD0D,EAAuB2N,EAAOU,QAAO,CAACC,EAAaC,IAAMD,EAAYxG,OAAOyG,EAAEvO,uBAAuB,IAC3G0N,EAASF,GAAalH,EAA4C,CAChEtG,uBACA0G,MAAOiH,EAAOA,EAAOnR,OAAS,GAAGkK,MACjCrH,cACA4F,sBACA0B,eAEJ,CAAE,MAAO7B,GACP4I,EAASF,GNxKiC,mCMwKsB,CAC9D1I,UAEJ,EAEJ,EAyGa0J,GAA2BA,CAACC,EAAMC,EAAqBrP,IAAgBD,UAClF,UACkB,SAATqP,GP3FaE,EO2FkBD,EP3FS1P,EAAOuB,OAAO,CAC/D7C,SAAU,4BACV2C,KAAM,SACNK,KAAMiO,MAEkBC,EOsFsDF,EPtFzB1P,EAAOuB,OAAO,CACnE7C,SAAU,8BACV2C,KAAM,SACNK,KAAMkO,MOoFJlB,EAASF,GNjRqC,qCMiRoB,CAChEnO,YAAaA,EACbC,KAAM,KAERoO,EAASG,KACX,CAAE,MAAO/I,GACP4I,EAASF,GNtRmC,mCMsRoB,CAC9D1I,UAEJ,CPhGwB8J,MALFD,COqGtB,EA2CWE,GAAgBlH,GAAcvI,UACzCsO,EAASF,GAAalH,GAAwBqB,IAC9C,IACE,MAAMgG,OP1DmBhG,IAAc3I,EAAOuB,OAAO,CACvD7C,SAAU,gBACV2C,KAAM,SACN1C,OAAQ,CACNmR,OAAQ,sBAEVpO,KAAM,CACJqO,KAAMpH,KOmDeiG,CAAkBjG,GACvC+F,EAASF,GAAalH,GAAgC,CACpDhK,GAAIqR,EAAOqB,SAASC,aAAa3S,GACjCsL,KAAMD,EAAWC,KACjBC,cAAe8F,EAAOqB,SAASC,aAAapH,gBAEhD,CAAE,MAAO/C,GACP4I,EAASF,GAAalH,GAA8B,CAClDxB,UAEJ,GAYWoK,GAAkBA,IAAM1B,GAAalH,GACrC6I,GAAmCA,IAAM3B,GAAalH,GACtD8I,GAAsBC,IACjC,IAAI,QACFvI,EAAO,mBACPf,EAAkB,oBAClBC,EAAmB,UACnBC,GACEoJ,EACJ,OAAO7B,GAAalH,EAA+B,CACjDQ,UACAf,qBACAC,sBACAC,aACA,EASSqJ,GAAYA,CAACxR,EAAQyJ,IAAeiG,GAAalH,EAAoB,CAChFxI,SACAyJ,eAEWgI,GAAoBA,CAAC7J,EAASC,EAAOC,IAAe4H,GAAalH,EAA6B,CACzGZ,UACAC,QACAC,eAEW4J,GAAmBA,IAAMhC,GAAalH,IACtCO,GAAyBQ,GAAiBmG,GAAalH,EAAmC,CACrGe,kBAEWoI,GAAmB5O,GAAgB2M,GAAalH,GAA2B,CACtFzF,iBAEW6O,GAAmB1H,GAAkBwF,GAAalH,GAA2B,CACxF0B,mB,4BCpZF,SAAS2H,GAAgBC,EAAGrB,EAAG/J,GAAK,OAAQ+J,EAC5C,SAAwB/J,GAAK,IAAIwJ,EACjC,SAAsBxJ,EAAG+J,GAAK,GAAI,iBAAmB/J,IAAMA,EAAG,OAAOA,EAAG,IAAIoL,EAAIpL,EAAEqL,OAAOC,aAAc,QAAI,IAAWF,EAAG,CAAE,IAAI5B,EAAI4B,EAAEG,KAAKvL,EAAG+J,GAAK,WAAY,GAAI,iBAAmBP,EAAG,OAAOA,EAAG,MAAM,IAAIgC,UAAU,+CAAiD,CAAE,OAAQ,WAAazB,EAAI0B,OAASC,QAAQ1L,EAAI,CADlR2L,CAAa3L,EAAG,UAAW,MAAO,iBAAmBwJ,EAAIA,EAAIA,EAAI,EAAI,CAD1DoC,CAAe7B,MAAOqB,EAAIS,OAAOC,eAAeV,EAAGrB,EAAG,CAAEpO,MAAOqE,EAAG+L,YAAY,EAAIC,cAAc,EAAIC,UAAU,IAAQb,EAAErB,GAAK/J,EAAGoL,CAAG,CAUnL,MACMc,GAAoB,CACxBvU,SAAUwU,GAAM7H,QAAQC,SACxB9M,QAAS0U,GAAM7H,QAAQI,cACvBhN,SAAUyU,GAAM7H,QAAQ2B,oBAE1B,MAAMmG,WAAuBC,EAAAA,UAC3BC,WAAAA,CAAYC,GACVC,MAAMD,GACNpB,GAAgB5S,KAAM,gBAAgB,KACpCA,KAAKgU,MAAME,oBACXlU,KAAKmU,SAAS,CACZC,MAAM,IAERpU,KAAKgU,MAAM/K,qBAAuBjJ,KAAKgU,MAAM/K,qBAAqB,IAEpEjJ,KAAKmJ,MAAQ,CACXiL,MAAM,EAEV,CACAC,kBAAAA,CAAmBC,EAAYC,IACxBA,EAAUH,MAAQpU,KAAKgU,MAAMjK,SAChC/J,KAAKmU,SAAS,CACZC,MAAM,GAGZ,CACAI,MAAAA,GACE,OAAoBC,EAAAA,cAAoBC,GAAAA,EAAU,CAChDC,KAA6B,KAAvB3U,KAAKgU,MAAMjK,SAAkB/J,KAAKmJ,MAAMiL,KAC9CrK,QAAS/J,KAAKgU,MAAMjK,SAAW,2BAC/B6K,iBA/B2B,IAgC3BC,eAAgB7U,KAAK8U,aACrB1L,OAAQpJ,KAAKgU,MAAMhL,oBAAsB,OACzC+L,cAAeA,KACb/U,KAAKgU,MAAMhL,qBACXhJ,KAAKmU,SAAS,CACZC,MAAM,GACN,EAEJY,aAAc,CACZC,MAAOtB,GAAkB3T,KAAKgU,MAAM1Q,OAEtC4R,MAAO,CACLC,cAAe,OACfC,WAAY,UAEdC,UAAW,CACTF,cAAe,UACfG,SAAU,SAGhB,EAeF,QAAe/J,EAAAA,GAAAA,KAAQgK,EAAAA,EAAAA,KANCpM,IAAK,CAC3BY,QAASZ,EAAMuC,UAAU3C,aACzBzF,KAAM6F,EAAMuC,UAAUxC,UACtBF,mBAAoBG,EAAMuC,UAAU1C,mBACpCC,oBAAqBE,EAAMuC,UAAUzC,uBAES,CAC9CiL,kBD6R+BA,IAAMzD,GAAalH,KC5RhDiM,GAAAA,GAFJ,CAEU3B,IC9EV,GAAyB,oBAAzB,GAAqD,mB,YCArD,IAAe4B,E,SAAAA,M,wBCAR,MAAMC,GAAwB,CACnCC,UAAW,SACXC,UAAW,SACXC,iBAAkB,MAClBC,iBAAkBlC,GAAM7H,QAAQiB,aAChC+I,OAAQ,sBAEGC,GAAY,CACvBC,YAAa,MACbC,SAAU,Q,4KC+BZ,OAxCwB,CACtBC,OAAQ,CAAC,CACPC,IAAK,OACLhT,MAAO,OACPiT,YAAa7O,EAAAA,EAAKC,EAAE,cACnB,CACD2O,IAAK,OACLhT,MAAO,OACPiT,YAAa7O,EAAAA,EAAKC,EAAE,SACnB,CACD2O,IAAK,UACLhT,MAAO,UACPiT,YAAa7O,EAAAA,EAAKC,EAAE,YACnB,CACD2O,IAAK,UACLhT,MAAO,UACPiT,YAAa7O,EAAAA,EAAKC,EAAE,YACnB,CACD2O,IAAK,SACLhT,MAAO,SACPiT,YAAa7O,EAAAA,EAAKC,EAAE,YAEtB6O,SAAU,CAAC,CACTF,IAAK,OACLhT,MAAO,OACPiT,YAAa7O,EAAAA,EAAKC,EAAE,gBACnB,CACD2O,IAAK,OACLhT,MAAO,OACPiT,YAAa7O,EAAAA,EAAKC,EAAE,SACnB,CACD2O,IAAK,SACLhT,MAAO,SACPiT,YAAa7O,EAAAA,EAAKC,EAAE,WACnB,CACD2O,IAAK,MACLhT,MAAO,MACPiT,YAAa7O,EAAAA,EAAKC,EAAE,U,oFC7BT,SAAS8O,GAAqBvC,GAC3C,OAAoBS,EAAAA,cAAoB+B,EAAAA,GAAkBC,SAAU,MAAMC,GAAoBjC,EAAAA,cAAoBkC,GAAAA,QAAQ3C,EAAoBS,EAAAA,cAAoBmC,EAAAA,GAAU,CAC1KC,MAAOH,EAAIG,OACV7C,EAAM8C,YACX,C,gBCbA,SAASlE,GAAgBC,EAAGrB,EAAG/J,GAAK,OAAQ+J,EAC5C,SAAwB/J,GAAK,IAAIwJ,EACjC,SAAsBxJ,EAAG+J,GAAK,GAAI,iBAAmB/J,IAAMA,EAAG,OAAOA,EAAG,IAAIoL,EAAIpL,EAAEqL,OAAOC,aAAc,QAAI,IAAWF,EAAG,CAAE,IAAI5B,EAAI4B,EAAEG,KAAKvL,EAAG+J,GAAK,WAAY,GAAI,iBAAmBP,EAAG,OAAOA,EAAG,MAAM,IAAIgC,UAAU,+CAAiD,CAAE,OAAQ,WAAazB,EAAI0B,OAASC,QAAQ1L,EAAI,CADlR2L,CAAa3L,EAAG,UAAW,MAAO,iBAAmBwJ,EAAIA,EAAIA,EAAI,EAAI,CAD1DoC,CAAe7B,MAAOqB,EAAIS,OAAOC,eAAeV,EAAGrB,EAAG,CAAEpO,MAAOqE,EAAG+L,YAAY,EAAIC,cAAc,EAAIC,UAAU,IAAQb,EAAErB,GAAK/J,EAAGoL,CAAG,CAkBnL,MAAMkE,WAAwBjD,EAAAA,UAC5BC,WAAAA,GACEE,SAAS/T,WACT0S,GAAgB5S,KAAM,QAAS,CAC7B4I,MAAO,GACPoO,aAAc,GACd7V,gBAAiBnB,KAAKgU,MAAM7S,gBAC5BC,6BAA8BpB,KAAKgU,MAAM5S,6BACzC6V,WAAY,GACZC,eAAW/O,IAEbyK,GAAgB5S,KAAM,kBAAmBL,EAASK,KAAKmX,OAAOC,KAAKpX,MAnBnD,OAoBhB4S,GAAgB5S,KAAM,qBAAqBqX,IACzC,QAAqClP,IAAjCnI,KAAKgU,MAAMsD,kBACbtX,KAAKgU,MAAMsD,kBAAkBD,OACxB,CACLrX,KAAKuX,YACLvX,KAAKwX,gBAAgB,KACHxX,KAAKgU,MAAMnL,WAAWa,MAAK+N,GAAaA,EAAUlY,KAAO8X,EAAK9X,MACpES,KAAKgU,MAAM0D,iBAAiB,IAAI1X,KAAKgU,MAAMnL,WAAY7I,KAAKmJ,MAAM6N,aAAatN,MAAKkH,GAAUA,EAAOrR,KAAO8X,EAAK9X,MAC/H,KAEFqT,GAAgB5S,KAAM,gBAAgBT,IACpCS,KAAKgU,MAAM0D,iBAAiB1X,KAAKgU,MAAMnL,WAAW9H,QAAO0W,GAAaA,EAAUlY,KAAOA,IAAI,IAE7FqT,GAAgB5S,KAAM,aAAa,KACjCA,KAAKmU,SAAS,CACZvL,MAAO,GACPoO,aAAc,IACd,IAEJpE,GAAgB5S,KAAM,eAAe4I,IACnC5I,KAAKwX,gBAAgB5O,GACrB5I,KAAKmU,SAAS,CACZvL,SACA,GAEN,CACAuO,MAAAA,CAAOvO,GAEL,IADkB5I,KAAKmJ,MAAM6N,aAAatN,MAAKkH,GAAUA,EAAOrJ,cAAgBqB,KAAoB,KAAVA,GAAgBA,EAAMnJ,QA9C9F,EA+CJ,CACZ,MAAM,qBACJ4B,EAAoB,gBACpBF,EAAe,6BACfC,EAA4B,iBAC5Bb,GACEP,KAAKgU,MdmKiB3R,WAC9B,IAAIsV,EAAgBC,EAAuBC,EAC3C,IAAI,YACFnX,EAAW,gBACXS,EAAe,6BACfC,EAA4B,qBAC5BC,EAAoB,iBACpBd,GACEuX,EACJ,MAAMrW,EAAQR,EAA2B,CACvCP,cACAS,kBACAC,+BACAC,uBACAd,qBAEIwX,QAAgB9V,EAAOR,MAAMA,GACnC,MAAO,CACLG,MAA4C,QAApC+V,EAAiBI,EAAQnW,aAAsC,IAAnB+V,OAA4B,EAASA,EAAe/V,MACxGC,kBAA+B,OAAZkW,QAAgC,IAAZA,GAAsF,QAAvDH,EAAwBG,EAAQlW,yBAAyD,IAA1B+V,OAAzE,EAAqHA,EAAsB/V,kBACvMC,WAAwB,OAAZiW,QAAgC,IAAZA,GAA6E,QAA9CF,EAAsBE,EAAQjW,kBAAgD,IAAxB+V,OAAhE,EAA0GA,EAAoB/V,WACpL,EcvLG+O,CAAqB,CACnBnQ,YAAakI,EACbzH,kBACAC,+BACAC,uBACAd,qBACC4Q,MAAK5P,IACN,IAAI,MACFK,EAAK,WACLE,EAAU,kBACVD,GACEN,EACJ,MAAMyW,EAAU1U,GAAQsN,IAAM,IACzBA,EACHtN,SAEF,IAAI2U,EAAuBrW,EAAMyC,IAAI2T,EAAQ,SACxChY,KAAKmJ,MAAMhI,kBACd8W,EAAuBA,EAAqBlN,OAAOjJ,EAAWuC,IAAI2T,EAAQ,eAAejN,OAAOlJ,EAAkBwC,IAAI2T,EAAQ,uBAEhIhY,KAAKmU,SAAS,CACZ6C,aAAciB,EACdf,UAA2C,IAAhCe,EAAqBxY,OAAe+H,EAAAA,EAAKC,EAAE,yBAAsBU,GAC5E,GAEN,MACEnI,KAAKmU,SAAS,CACZ8C,WAAYrO,EACZoO,aAAwC,KAA1BhX,KAAKmJ,MAAM8N,YAA+B,KAAVrO,GAAgBA,EAAMnJ,OAlFtD,EAkF+E,GAAKO,KAAKmJ,MAAM6N,aAC7GE,UAAqB,KAAVtO,GAAgBA,EAAMnJ,OAnFnB,EAmF4C+H,EAAAA,EAAKC,EAAE,sCAAuDzH,KAAKmJ,MAAM+O,eAGzI,CACA1D,MAAAA,GACE,OAAoBC,EAAAA,cAAoB,MAAO,CAC7CS,MAAO,IACFlV,KAAKgU,MAAMkB,MACda,OAAQ/V,KAAKgU,MAAMmE,cAEP1D,EAAAA,cAAoB2D,GAAAA,GAAW,CAC7ClD,MAAO,CACLmD,aAAc,IAEhBC,cAAkCnQ,IAAxBnI,KAAKgU,MAAMsE,UAAiCtY,KAAKgU,MAAMsE,SACjEpB,UAAWlX,KAAKgU,MAAMkD,WAAalX,KAAKmJ,MAAM+N,UAC9C9T,MAAOpD,KAAKgU,MAAMnL,WAClB0P,WAAW,EACXC,aAAa,EACbC,WAAYzY,KAAKmJ,MAAMP,MACvB8P,kBAAmB1Y,KAAKgU,MAAM2E,MAC9BC,WAAY5Y,KAAKmJ,MAAM6N,aACvB6B,iBAAkB,CAChBC,KAAM,cACN1V,MAAO,MAET2V,cAAe/Y,KAAKgZ,YACpBC,aAAc5B,GAAQrX,KAAKsX,kBAAkBD,GAC7C6B,gBAAiB3Z,GAAMS,KAAKmZ,aAAa5Z,KAE7C,EAgBF,QAAegW,EAAAA,EAAAA,KAAQpM,IAAK,CAC1B5I,iBAAkB4I,EAAMuC,UAAUnL,oBADpC,CAEIwW,ICtGJ,OAnCuBxV,IACrB,IAAI,KACFoT,EAAI,eACJE,EAAc,2BACduE,EAA0B,YAC1B9W,EAAW,qBACXjB,GACEE,EACJ,OAAoBkT,EAAAA,cAAoB8B,GAAsB,CAC5D5B,KAAMA,EACNE,eAAgBA,KACdA,GAAgB,GAEJJ,EAAAA,cAAoBsC,GAAiB,CACnDO,kBAAmBD,IACjB+B,EAA2B,CAAC/B,EAAK9X,KACjCsV,GAAgB,EAElB1T,iBAAiB,EACjBC,6BAAiD,WAAnBkB,EAAY/C,GAC1C8B,qBAAsBA,EACtBwH,WAAY,GACZuN,IAAK,kBACLuC,MAAOnR,EAAAA,EAAKC,EAAE,cACb,EC7BL,SAASmL,GAAgBC,EAAGrB,EAAG/J,GAAK,OAAQ+J,EAC5C,SAAwB/J,GAAK,IAAIwJ,EACjC,SAAsBxJ,EAAG+J,GAAK,GAAI,iBAAmB/J,IAAMA,EAAG,OAAOA,EAAG,IAAIoL,EAAIpL,EAAEqL,OAAOC,aAAc,QAAI,IAAWF,EAAG,CAAE,IAAI5B,EAAI4B,EAAEG,KAAKvL,EAAG+J,GAAK,WAAY,GAAI,iBAAmBP,EAAG,OAAOA,EAAG,MAAM,IAAIgC,UAAU,+CAAiD,CAAE,OAAQ,WAAazB,EAAI0B,OAASC,QAAQ1L,EAAI,CADlR2L,CAAa3L,EAAG,UAAW,MAAO,iBAAmBwJ,EAAIA,EAAIA,EAAI,EAAI,CAD1DoC,CAAe7B,MAAOqB,EAAIS,OAAOC,eAAeV,EAAGrB,EAAG,CAAEpO,MAAOqE,EAAG+L,YAAY,EAAIC,cAAc,EAAIC,UAAU,IAAQb,EAAErB,GAAK/J,EAAGoL,CAAG,CAyBnL,MACMwG,GAAS,CACbC,OAAQ,CACNC,MAAO,QACPC,QAAS,QAEXC,gBAAiB,CACfD,QAAS,OACTE,eAAgB,cAElBC,WAAY,CACVC,QAAS,UACTC,SAAU,SACVC,aAAc,WACd1E,WAAY,WAGhB,MAAM2E,WAAoCjG,EAAAA,UACxCC,WAAAA,CAAYC,GACVC,MAAMD,GACNpB,GAAgB5S,KAAM,UAAU,IAAMA,KAAKgU,MAAM5L,6BAAgE,IAAjCpI,KAAKgU,MAAM1L,WAAW7I,OAAe,CAACO,KAAKgU,MAAM5L,4BAA4B7I,IAAMS,KAAKgU,MAAM1L,WAAWjE,KAAI9E,GAAMA,EAAGA,OACtMqT,GAAgB5S,KAAM,6BAA6B,CAACgK,EAAY5G,KAC9D,MACE8E,oBAAqB5F,EAAW,4BAChC8F,GACEpI,KAAKgU,MACH3J,EAAyBrK,KAAKga,SACpCha,KAAKgU,MAAMoF,2BAA2B,CACpC/O,yBACAL,aACA5G,QACAd,cACA8F,gCAEFpI,KAAKgU,MAAM1L,WAAW7I,OAAS,GAAKO,KAAKgU,MAAM7B,iBAAiB,IAElES,GAAgB5S,KAAM,4BAA4B0R,IAChD,MAAMuI,EAAMja,KAAKga,SACjBha,KAAKgU,MAAMvC,yBAAyBC,EAAMuI,EAAKja,KAAKgU,MAAM9L,qBAC1DlI,KAAKgU,MAAM1L,WAAW7I,OAAS,GAAKO,KAAKgU,MAAM7B,iBAAiB,IAElES,GAAgB5S,KAAM,gBAAgB,KACpCA,KAAKmU,SAAS,CACZ+F,YAAala,KAAKmJ,MAAM+Q,YACxB,IAEJla,KAAKmJ,MAAQ,CACXgR,cAAc,EACdD,YAAY,EACZE,cAAc,EAElB,CACA5F,MAAAA,GACE,MAAMtK,EAAsBlK,KAAKgU,MAAM5L,4BACjCiS,EAAcra,KAAKgU,MAAM1L,WAAW7I,OAAS,EAC7C+Z,EAAUa,QAAuClS,IAAxB+B,EACzBoQ,EAA6B7F,EAAAA,cAAoBA,EAAAA,SAAgB,KAAmBA,EAAAA,cAAoB8F,GAAAA,QAAY,CACxH5B,MAAOnR,EAAAA,EAAKC,EAAE,UACd+S,SAAS,EACTC,QAASA,IAAMza,KAAK0a,iBACLjG,EAAAA,cAAoB8F,GAAAA,QAAY,CAC/C5B,MAAOnR,EAAAA,EAAKC,EAAE,UACd+S,SAAS,EACTG,iBAAiB,EACjBF,QAASA,KACPza,KAAKgU,MAAM4G,2BAA2B5a,KAAKga,SAAUha,KAAKgU,MAAM9L,qBAChElI,KAAKgU,MAAM7B,kBACXnS,KAAK0a,eACD1a,KAAKgU,MAAM5L,8BACbpI,KAAKgU,MAAM5B,mCACXyI,GAAQnZ,KAAK,IAAI1B,KAAKgU,MAAM9L,oBAAoB3I,MAClD,KAGEub,EAA4B9a,KAAKgU,MAAM1L,WAAW7I,OA1E5B,GA0E+D,MAAgCO,KAAKgU,MAAM1L,WAAW7I,OACjJ,OAAO+Z,EAAuB/E,EAAAA,cAAoB,MAAO,CACvDS,MAAOmE,GAAOC,QACA7E,EAAAA,cAAoB8B,GAAsB,CACxDwE,MAAOvT,EAAAA,EAAKC,EAAE,qEACd8B,QAAS+Q,EACTU,OAAO,EACPrG,KAAM3U,KAAKmJ,MAAM+Q,WACjBrF,eAAgB7U,KAAK0a,eACNjG,EAAAA,cAAoBwG,GAAgB,CACnDtG,KAAM3U,KAAKmJ,MAAMiR,aACjBvF,eAAgBA,IAAM7U,KAAKmU,SAAS,CAClCiG,cAAepa,KAAKmJ,MAAMiR,eAE5BhB,2BAA4B7Z,GAAMS,KAAKkb,0BAA0B,WAAY3b,GAC7E+C,YAAatC,KAAKgU,MAAM9L,oBACxB7G,qBAAsBrB,KAAKgU,MAAM3S,uBAClBoT,EAAAA,cAAoB,MAAO,CAC1CS,MAAOmE,GAAOI,iBACAhF,EAAAA,cAAoB0G,GAAAA,QAAY,CAC9CC,QAAS5T,EAAAA,EAAKC,EAAE,mBAChBgT,QAASA,KACPza,KAAK0a,cAAc,GAEPjG,EAAAA,cAAoB4G,GAAAA,EAAQ,OAAqB5G,EAAAA,cAAoB0G,GAAAA,QAAY,CAC/FC,QAAS5T,EAAAA,EAAKC,EAAE,2BAChBgT,QAASA,KACPza,KAAKyR,yBAAyB,SAAS,GAE3BgD,EAAAA,cAAoB6G,GAAAA,EAAY,OAAqB7G,EAAAA,cAAoB0G,GAAAA,QAAY,CACnGC,QAAS5T,EAAAA,EAAKC,EAAE,yBAChBgT,QAASA,KACPza,KAAKyR,yBAAyB,OAAO,GAEzBgD,EAAAA,cAAoB8G,GAAAA,EAAM,OAAQvb,KAAKgU,MAAMwH,wBAAuC/G,EAAAA,cAAoB0G,GAAAA,QAAY,CAClIV,QAASA,IAAMza,KAAKmU,SAAS,CAC3BiG,cAAepa,KAAKmJ,MAAMiR,eAE5BgB,QAAS5T,EAAAA,EAAKC,EAAE,oBACFgN,EAAAA,cAAoBgH,GAAAA,EAAY,OAAqBhH,EAAAA,cAAoBiH,GAAAA,GAAU,CACjGC,kBAAgClH,EAAAA,cAAoB0G,GAAAA,QAAY,KAAmB1G,EAAAA,cAAoBmH,GAAAA,EAAc,OACrHC,aAAc,CACZC,WAAY,OACZC,SAAU,OAEZC,aAAc,CACZF,WAAY,OACZC,SAAU,QAEEtH,EAAAA,cAAoBwH,GAAAA,QAAU,CAC5C7F,IAAK,eACLhT,MAAO,eACPiT,YAAa7O,EAAAA,EAAKC,EAAE,qBACpBgT,QAASA,IAAMza,KAAKkb,0BAA0B,aAAa,KAC5CzG,EAAAA,cAAoBwH,GAAAA,QAAU,CAC7C7F,IAAK,gBACLhT,MAAO,gBACPiT,YAAa7O,EAAAA,EAAKC,EAAE,kBACpBgT,QAASA,IAAMza,KAAKkb,0BAA0B,aAAa,KACzDlb,KAAKgU,MAAMwH,wBAAuC/G,EAAAA,cAAoByH,GAAAA,QAAS,MAAOlc,KAAKgU,MAAMwH,wBAAuC/G,EAAAA,cAAoBwH,GAAAA,QAAU,CACxK7F,IAAK,gBACLhT,MAAO,gBACPiT,YAAa7O,EAAAA,EAAKC,EAAE,kBACpBgT,QAASA,IAAMza,KAAKkb,0BAA0B,gBAAY/S,KACxDnI,KAAKgU,MAAMwH,wBAAuC/G,EAAAA,cAAoBwH,GAAAA,QAAU,CAClF5F,YAAa7O,EAAAA,EAAKC,EAAE,cACpB2O,IAAK,YACL+F,UAAwB1H,EAAAA,cAAoB2H,GAAAA,EAAgB,MAC5DC,UAAW5C,GAAgBtD,OAAO9R,KAAIiY,GAAqB7H,EAAAA,cAAoBwH,GAAAA,QAAU,CACvF7F,IAAK,GAAGkG,EAAKlG,aACbhT,MAAOkZ,EAAKlZ,MACZiT,YAAaiG,EAAKjG,YAClBoE,QAASA,IAAMza,KAAKkb,0BAA0B,SAAUoB,EAAKlG,WAE7DpW,KAAKgU,MAAMwH,wBAAuC/G,EAAAA,cAAoBwH,GAAAA,QAAU,CAClF5F,YAAa7O,EAAAA,EAAKC,EAAE,gBACpB2O,IAAK,cACL+F,UAAwB1H,EAAAA,cAAoB2H,GAAAA,EAAgB,MAC5DC,UAAW5C,GAAgBnD,SAASjS,KAAIiY,GAAqB7H,EAAAA,cAAoBwH,GAAAA,QAAU,CACzF7F,IAAK,GAAGkG,EAAKlG,eACbhT,MAAOkZ,EAAKlZ,MACZiT,YAAaiG,EAAKjG,YAClBoE,QAASA,IAAMza,KAAKkb,0BAA0B,WAAYoB,EAAKlG,aAE7DiE,GAA4B5F,EAAAA,cAAoB8H,GAAAA,QAAW,CAC/DrH,MAAOmE,GAAOM,YACb,GAAGmB,KAA6BtT,EAAAA,EAAKC,EAAE,gBAA+BgN,EAAAA,cAAoB,MAAO,KACtG,EAoBF,QAAelJ,EAAAA,GAAAA,KAAQgK,EAAAA,EAAAA,KANCpM,IAAK,CAC3BjB,oBAAqBiB,EAAMuC,UAAUxD,oBACrCE,4BAA6Be,EAAMuC,UAAUtD,4BAC7CE,WAAYa,EAAMuC,UAAUpD,WAC5BjH,qBAAsB8H,EAAMuC,UAAUrK,wBAEQ,CAC9C8Q,gBAAe,GACfC,iCAAgC,GAChCwI,2BT7BwCA,CAACvQ,EAAwB/H,IAAgBD,MAAOsO,EAAUI,KAClG,IACE,MAAM5H,EAAQ4H,KACR,YACJjO,GACEqG,EAAMuC,UACJsF,EAAW3G,EAAuBhG,KAAIlB,GPKPqZ,EAACrZ,EAAuBsZ,IAAkBxa,EAAOuB,OAAO,CAC/F7C,SAAU,wBAAwBwC,KAAyBsZ,IAC3DnZ,KAAM,WOPiEuN,CAA8B1N,EAAuBL,EAAYvD,YAChI6R,QAAQC,IAAIL,GAClBL,EAASF,GAAalH,EAA8C,CAClEjH,YAAaA,EACbC,KAAM,KAERoO,EAASG,KACX,CAAE,MAAO/I,GACP4I,EAASF,GAAalH,EAA4C,CAChExB,UAEJ,GSaAqR,2BT/JwC7X,IACxC,IAAI,uBACF8I,EAAsB,WACtBL,EAAU,MACV5G,EAAK,YACLd,EAAW,4BACX8F,GACE7G,EACJ,OAAOc,UACL,GAAmB,cAAf2H,EACF,SP4D2C0S,EAACrS,EAAwBjH,IAAUnB,EAAOuB,OAAO,CAChG7C,SAAU,yBAAwByC,EAAQ,WAAa,cACvDE,KAAM,SACNK,KAAM0G,IO9DMwG,CAAsCxG,EAAwBjH,GACpEuN,EAASF,GAAalH,EAA6C,CACjEjH,YAAaA,EACbC,KAAM,EACNyH,WAAYA,KAEd2G,EAASG,KACX,CAAE,MAAO/I,GACP4I,EAASF,GAAalH,EAA2C,CAC/DxB,UAEJ,KACK,CACL,MAAMiJ,EAAW3G,EAAuBhG,KAAIlB,IAC1C,IAAI+N,EACJ,OAAQlH,GACN,IAAK,SACHkH,EPcmCyL,EAACxZ,EAAuBC,IAAUnB,EAAOuB,OAAO,CAC7F7C,SAAU,wBAAwBwC,WAClCG,KAAM,SACN1C,OAAQ,CACNgc,0BAA2BxZ,KOlBTyN,CAAoC1N,EAAuBC,GACrE,MACF,IAAK,WACH8N,EPkBqC2L,EAAC1Z,EAAuBC,IAAUnB,EAAOuB,OAAO,CAC/F7C,SAAU,wBAAwBwC,aAClCG,KAAM,SACN1C,OAAQ,CACNkc,4BAA6B1Z,KOtBXyN,CAAsC1N,EAAuBC,GACvE,MACF,IAAK,WAED8N,OADY/I,IAAV/E,GAA0C,sBAAnBd,EAAY/C,GAC3BsR,EAAkB,CAC1BjP,MAAOwB,EAAMiB,KAAIjB,IAAK,CACpB7D,GAAI6D,MAENtB,WAAY,GACZD,kBAAmB,GACnBsB,0BACCgO,MAAK,IAAMN,EAAsC1N,EAAuBC,KAEjEyN,EAAsC1N,EAAuBC,GAEzE,MACF,QACE6G,IAAAA,MAAU,wDAGd,OAAOiH,CAAO,IAEhB,UACQE,QAAQC,IAAIL,GAClBL,EAASF,GAAalH,EAA6C,CACjEjH,YAAaA,EACbC,KAAM,EACNyH,WAAYA,KAEd2G,EAASG,KACX,CAAE,MAAO/I,GACP4I,EAASF,GAAalH,EAA2C,CAC/DxB,UAEJ,CACF,CACIK,GACFuI,EAASD,GAA+BtI,GAC1C,CACD,ES0FDqJ,yBACF,IAAG,KAAM,CACP+D,MAAM,IAPR,CAQIuE,ICtNJ,SAASnH,GAAgBC,EAAGrB,EAAG/J,GAAK,OAAQ+J,EAC5C,SAAwB/J,GAAK,IAAIwJ,EACjC,SAAsBxJ,EAAG+J,GAAK,GAAI,iBAAmB/J,IAAMA,EAAG,OAAOA,EAAG,IAAIoL,EAAIpL,EAAEqL,OAAOC,aAAc,QAAI,IAAWF,EAAG,CAAE,IAAI5B,EAAI4B,EAAEG,KAAKvL,EAAG+J,GAAK,WAAY,GAAI,iBAAmBP,EAAG,OAAOA,EAAG,MAAM,IAAIgC,UAAU,+CAAiD,CAAE,OAAQ,WAAazB,EAAI0B,OAASC,QAAQ1L,EAAI,CADlR2L,CAAa3L,EAAG,UAAW,MAAO,iBAAmBwJ,EAAIA,EAAIA,EAAI,EAAI,CAD1DoC,CAAe7B,MAAOqB,EAAIS,OAAOC,eAAeV,EAAGrB,EAAG,CAAEpO,MAAOqE,EAAG+L,YAAY,EAAIC,cAAc,EAAIC,UAAU,IAAQb,EAAErB,GAAK/J,EAAGoL,CAAG,CAyBnL,MAEMwG,GAAS,CACbC,MAAAA,CAAOyD,GACL,MAAO,CACLvD,QAAS,OACTE,eAAgB,aAChBsD,WAAY,SACZC,gBAAiBF,EAAiBnJ,GAAM7H,QAAQG,OAAS0H,GAAM7H,QAAQa,aACvEsQ,OAAQ,GAEZ,EACAC,cAAe,CACb3D,QAAS,OACTE,eAAgB,aAChB0D,SAAU,QACVC,OAAQ,SAEVC,cAAe,CACbC,KAAM,EACNxH,OApBiB,OAqBjByH,YAAa,GACblI,SAAU,KAEZmI,gBAAiB,CACfF,KAAM,MACN/D,QAAS,OACTvD,YAAa,IAIfyH,WAAY,CACVC,SAAU,GAEZC,SAAU,CACRrE,MAAO,OACPC,QAAS,SAGb,MAAMqE,WAAgB/J,EAAAA,UACpBC,WAAAA,GACEE,SAAS/T,WACT0S,GAAgB5S,KAAM,QAAS,CAC7B8d,kBAAmB,KAErBlL,GAAgB5S,KAAM,kBAAmBL,EAASK,KAAKmX,OA5CvC,KA6ClB,CACAA,MAAAA,CAAO3U,GACDxC,KAAKgU,MAAM9L,qBAAuBlI,KAAKmJ,MAAM2U,oBAAsBtb,IACrExC,KAAKgU,MAAMlD,yBAAyB9Q,KAAKgU,MAAM9L,oBAAqBlI,KAAKgU,MAAM9L,oBAAoB3I,IACnGS,KAAKmU,SAAS,CACZ2J,kBAAmBtb,IAGzB,CACA6R,kBAAAA,CAAmB0J,GACbA,EAAU7V,qBAAuBlI,KAAKgU,MAAM9L,oBAAoB3I,KAAOwe,EAAU7V,oBAAoB3I,KACvGS,KAAKwX,gBAAgB,SACQrP,IAA7BnI,KAAKgU,MAAMxR,eAA+BxC,KAAKgU,MAAMzB,eAAUpK,EAAW,gBAC9CA,IAA5BnI,KAAKgU,MAAMzL,cAA8BvI,KAAKgU,MAAMzB,eAAUpK,EAAW,eAC3CA,IAA9BnI,KAAKgU,MAAMxL,gBAAgCxI,KAAKgU,MAAMzB,eAAUpK,EAAW,YAC3EnI,KAAKgU,MAAMrR,oBAAsB3C,KAAKgU,MAAMzB,WAAU,EAAO,kBAC7DvS,KAAKgU,MAAMpR,yBAA2B5C,KAAKgU,MAAMzB,WAAU,EAAO,uBAClEvS,KAAKgU,MAAMnR,cAAgB7C,KAAKgU,MAAMzB,WAAU,EAAO,gBAElBpK,IAAnCnI,KAAKgU,MAAM9L,qBAAsClI,KAAKgU,MAAM9L,oBAAoBN,SAAYmW,EAAUxV,eAAiBvI,KAAKgU,MAAMzL,cAAgBwV,EAAUvV,iBAAmBxI,KAAKgU,MAAMxL,gBAAkBuV,EAAUpb,qBAAuB3C,KAAKgU,MAAMrR,oBAAsBob,EAAUnb,0BAA4B5C,KAAKgU,MAAMpR,yBAA2Bmb,EAAUlb,eAAiB7C,KAAKgU,MAAMnR,mBAAkDsF,IAAlC4V,EAAU7V,qBAAqC6V,EAAU7V,oBAAoB3I,KAAOS,KAAKgU,MAAM9L,oBAAoB3I,IACrgBS,KAAKgU,MAAMlD,yBAAyB9Q,KAAKgU,MAAM9L,oBAAqBlI,KAAKgU,MAAM9L,oBAAoB3I,GAEvG,CACAiV,MAAAA,GACE,MAAMjV,EAAKS,KAAKgU,MAAMzU,GAChBic,EAAyBxb,KAAKgU,MAAMwH,uBACpCuB,EAAiB/c,KAAKgU,MAAM+I,eAC5BiB,GAAiBhe,KAAKgU,MAAMiK,eAAuD9V,IAA3CnI,KAAKgU,MAAM5L,6BAAoD,WAAP7I,EACtG,OAAoBkV,EAAAA,cAAoByJ,GAAAA,QAAO,CAC7ChJ,MAAOmE,GAAOC,OAAOyD,IACPtI,EAAAA,cAAoB,MAAO,MAAOsI,GAA+BtI,EAAAA,cAAoB8F,GAAAA,QAAY,CAC/GrF,MAAOmE,GAAO8D,cACdgB,KAAmB1J,EAAAA,cAAoB2J,GAAAA,EAAmB,MAC1D3D,QAASA,IAAMI,GAAQnZ,KAAK,mBAC5BiX,MAAOnR,EAAAA,EAAKC,EAAE,aACZsV,GAA+BtI,EAAAA,cAAoB8F,GAAAA,QAAY,CACjErF,MAAOmE,GAAO8D,cACdgB,KAAmB1J,EAAAA,cAAoB4J,GAAAA,EAAgB,MACvD5D,QAASA,IAAMza,KAAKgU,MAAM7B,kBAC1BwG,MAAOnR,EAAAA,EAAKC,EAAE,mBACEgN,EAAAA,cAAoBsF,GAA6B,CACjEyB,uBAAwBA,IACT/G,EAAAA,cAAoB,MAAO,CAC1CS,MAAOmE,GAAOoE,iBACAhJ,EAAAA,cAAoB,MAAO,CACzCS,MAAOmE,GAAOqE,aACZlC,GAA0BwC,IAAkBjB,GAA+BtI,EAAAA,cAAoB6J,GAAAA,EAAa,CAC9GpJ,MAAOmE,GAAOiE,cACdiB,WAAY,CACVtJ,WAAmC9M,IAA5BnI,KAAKgU,MAAMzL,aAA6B,YAAc,QAC7DiW,SAAiCrW,IAA5BnI,KAAKgU,MAAMzL,aAA6B,QAAU,QAEzDkW,sBAAuB,CACrBxJ,MAAOrB,GAAM7H,QAAQI,eAEvBuM,uBAA+CvQ,IAA5BnI,KAAKgU,MAAMzL,aAA6Bf,EAAAA,EAAKC,EAAE,UAAY,GAC9EiX,mBAAoB,CAClBF,IAAK,QAEPG,UAAW,CACTH,SAAiCrW,IAA5BnI,KAAKgU,MAAMzL,aAA6B,QAAU,OAEzDnF,MAAOpD,KAAKgU,MAAMzL,aAClBqW,SAAUA,CAACC,EAAOzI,EAAK5M,KACrBxJ,KAAKgU,MAAMzB,UAAsB,OAAZ/I,OAAmBrB,EAAYqB,EAAS,SAAS,GAE1DiL,EAAAA,cAAoBwH,GAAAA,QAAU,CAC5C7F,IAAK,KACLhT,MAAO,KACPiT,YAAa,KACXoD,GAAgBtD,OAAO9R,KAAIiY,GAAqB7H,EAAAA,cAAoBwH,GAAAA,QAAU,CAChF7F,IAAKkG,EAAKlG,IACVhT,MAAOkZ,EAAKlZ,MACZiT,YAAaiG,EAAKjG,iBACdmF,GAA0BwC,IAAkBjB,GAA+BtI,EAAAA,cAAoB6J,GAAAA,EAAa,CAChHpJ,MAAOmE,GAAOiE,cACdiB,WAAY,CACVtJ,WAAqC9M,IAA9BnI,KAAKgU,MAAMxL,eAA+B,YAAc,QAC/DgW,SAAmCrW,IAA9BnI,KAAKgU,MAAMxL,eAA+B,QAAU,QAE3DiW,sBAAuB,CACrBxJ,MAAOrB,GAAM7H,QAAQI,eAEvBuM,uBAAiDvQ,IAA9BnI,KAAKgU,MAAMxL,eAA+BhB,EAAAA,EAAKC,EAAE,YAAc,GAClFiX,mBAAoB,CAClBF,IAAK,QAEPG,UAAW,CACTH,SAAmCrW,IAA9BnI,KAAKgU,MAAMxL,eAA+B,QAAU,OAE3DpF,MAAOpD,KAAKgU,MAAMxL,eAClBoW,SAAUA,CAACC,EAAOzI,EAAK5M,KACrBxJ,KAAKgU,MAAMzB,UAAsB,OAAZ/I,OAAmBrB,EAAYqB,EAAS,WAAW,GAE5DiL,EAAAA,cAAoBwH,GAAAA,QAAU,CAC5C7F,IAAK,KACLhT,MAAO,KACPiT,YAAa,KACXoD,GAAgBnD,SAASjS,KAAIiY,GAAqB7H,EAAAA,cAAoBwH,GAAAA,QAAU,CAClF7F,IAAKkG,EAAKlG,IACVhT,MAAOkZ,EAAKlZ,MACZiT,YAAaiG,EAAKjG,kBACb0G,GAAkBiB,GAA8BvJ,EAAAA,cAAoBqK,GAAAA,QAAW,CACpF5J,MAAOmE,GAAOiE,cACd/E,WAAW,EACXwG,SAAUvX,EAAAA,EAAKC,EAAE,UACjBrE,MAAOpD,KAAKgU,MAAMxR,eAAiB,GACnCoc,SAAUA,CAACC,EAAOrc,KAChBxC,KAAKwX,gBAAgBhV,GACrBxC,KAAKgU,MAAMzB,UAAU/P,EAAe,UAAU,EAEhDc,KAAM,YACHyZ,GAAkBiB,GAA8BvJ,EAAAA,cAAoBiH,GAAAA,GAAU,CACjFC,kBAAgClH,EAAAA,cAAoB0G,GAAAA,QAAY,KAAmB1G,EAAAA,cAAoBmH,GAAAA,EAAc,OACrHC,aAAc,CACZC,WAAY,QACZC,SAAU,OAEZC,aAAc,CACZF,WAAY,QACZC,SAAU,OAEZ7G,MAAOmE,GAAOuE,SACdoB,UAAW,CACTpJ,UAAW,WAECnB,EAAAA,cAAoB8H,GAAAA,QAAW,CAC7CrH,MAAO,CACL0E,QAAS,aAEVpS,EAAAA,EAAKC,EAAE,eAAgBzH,KAAKgU,MAAMwH,wBAAuC/G,EAAAA,cAAoBwK,GAAAA,QAAU,CACxG/J,MAAO,CACL0E,QAAS,YAEXxD,IAAK,qBACLuC,MAAOnR,EAAAA,EAAKC,EAAE,kBACdyX,QAASlf,KAAKgU,MAAMrR,mBACpB8X,QAASA,KACPza,KAAKgU,MAAMzB,WAAWvS,KAAKgU,MAAMrR,mBAAoB,iBAAiB,IAEzD8R,EAAAA,cAAoBwK,GAAAA,QAAU,CAC7C/J,MAAO,CACL0E,QAAS,YAEXxD,IAAK,0BACLuC,MAAOnR,EAAAA,EAAKC,EAAE,uBACdyX,QAASlf,KAAKgU,MAAMpR,wBACpB6X,QAASA,KACPza,KAAKgU,MAAMzB,WAAWvS,KAAKgU,MAAMpR,wBAAyB,sBAAsB,IAEnE6R,EAAAA,cAAoBwK,GAAAA,QAAU,CAC7C/J,MAAO,CACL0E,QAAS,YAEXxD,IAAK,eACLuC,MAAOnR,EAAAA,EAAKC,EAAE,mBACdyX,QAASlf,KAAKgU,MAAMnR,aACpB4X,QAASA,KACPza,KAAKgU,MAAMzB,WAAWvS,KAAKgU,MAAMnR,aAAc,SAAS,KAE1C4R,EAAAA,cAAoB8F,GAAAA,QAAY,CAChDrF,MAAO,CACLqE,MAAO,OACP4F,UAAW,UAEbhB,KAAOne,KAAKgU,MAAMiK,SAA2ExJ,EAAAA,cAAoB2K,GAAAA,EAAW,MAAlF3K,EAAAA,cAAoB4K,GAAAA,EAAU,MACxE5E,QAASA,IAAMza,KAAKgU,MAAMsL,oBAE9B,EAoBF,U,wBCxPA,MAAMpJ,GAAW,OACXmD,GAAS,CACbC,MAAAA,CAAO2D,GACL,MAAO,CACLA,kBACAzD,QAAS,OACT+F,WAAY,uBACZC,UAAW,aACXC,SAAU,WACVrK,WAAY,SACZ+J,UAAW,SACXO,UAAW,OACXC,aAAc,oBAElB,EACAC,SAAU,CACRrC,KAAM,WACN/D,QAAS,OACT2F,UAAW,SACXlJ,YAAa,QAEf4J,OAAQ,CACN5gB,WAAU,EACViX,YACAqH,KAAM,EACN1D,SAAU,SACVC,aAAc,WACd1E,WAAY,SACZH,MAAO,QACPgB,YAAa,GACbkJ,UAAW,UAEbxW,QAAS,CACP4U,KAAM,EACN1D,SAAU,SACVC,aAAc,WACd1E,WAAY,SACZnW,WAAU,EACViX,YACAjB,MAAO,QACPgB,YAAa,IAEf6J,cAAe,CACbvC,KAAM,EACNtI,MAAO,QACPiB,YACA2D,SAAU,SACVC,aAAc,WACd1E,WAAY,SACZwE,QAAS,eAGb,MAAMmG,WAAoCjM,EAAAA,UACxCC,WAAAA,CAAYC,GACVC,MAAMD,GACNhU,KAAKmJ,MAAQ,CACX6W,OAAQ,OACRC,YAAY,EAEhB,CACA5L,kBAAAA,GACMrU,KAAKmJ,MAAM8W,YAAcjgB,KAAKgU,MAAM1L,WAAW7I,OAASO,KAAKgU,MAAMkM,SAASzgB,QAC9EO,KAAKmU,SAAS,CACZ8L,YAAY,GAGlB,CACAzL,MAAAA,GACE,MAAMgH,EAAyBxb,KAAKgU,MAAMwH,uBAC1C,OAAoB/G,EAAAA,cAAoByJ,GAAAA,QAAO,CAC7ChJ,MAAOmE,GAAOC,OAAO1F,GAAM7H,QAAQ6B,cACrB6G,EAAAA,cAAoBwK,GAAAA,QAAU,CAC5CC,QAASlf,KAAKmJ,MAAM8W,WACpB/K,MAAOmE,GAAOuG,SACdO,QAASA,KACPngB,KAAKmJ,MAAM8W,WAAajgB,KAAKgU,MAAM7B,kBAAoBnS,KAAKgU,MAAMoM,cAAcpgB,KAAKgU,MAAMkM,SAAS7b,KAAIgc,IAAK,CAC3G9gB,GAAI8gB,EAAM9gB,QAEZS,KAAKmU,SAAS,CACZ8L,YAAajgB,KAAKmJ,MAAM8W,YACxB,IAEWxL,EAAAA,cAAoB,MAAO,CAC1CS,MAAOmE,GAAOwG,QACbrY,EAAAA,EAAKC,EAAE,WAAyBgN,EAAAA,cAAoB8H,GAAAA,QAAW,CAChErH,MAAOmE,GAAO1Q,SACbnB,EAAAA,EAAKC,EAAE,YAAa+T,GAAuC/G,EAAAA,cAAoB8H,GAAAA,QAAW,CAC3FrH,MAAOmE,GAAOyG,eACbtY,EAAAA,EAAKC,EAAE,WAAY+T,GAAuC/G,EAAAA,cAAoB8H,GAAAA,QAAW,CAC1FrH,MAAOmE,GAAOyG,eACbtY,EAAAA,EAAKC,EAAE,aAAczH,KAAKgU,MAAMsM,cAA6B7L,EAAAA,cAAoB8H,GAAAA,QAAW,CAC7FrH,MAAOmE,GAAOyG,eACbtY,EAAAA,EAAKC,EAAE,aAA2BgN,EAAAA,cAAoB8H,GAAAA,QAAW,CAClErH,MAAOmE,GAAOyG,eACbtY,EAAAA,EAAKC,EAAE,SACZ,EAcF,QAAe8D,EAAAA,GAAAA,KAAQgK,EAAAA,EAAAA,KAJCpM,IAAK,CAC3Bb,WAAYa,EAAMuC,UAAUpD,WAC5BG,2BAA4BU,EAAMuC,UAAUjD,8BAEE,CAC9C2X,cXmQ2B/V,GAA0BoG,GAAalH,EAAyB,CAC3Fc,2BWnQA8H,gBACF,KAHA,CAGI4N,I,YCxHJ,MAAM1G,GAAS,CACbkH,eAAgB,CACdxK,OAAQ,OACRd,MAAO,QACPgB,YAAa,EACbuK,aAAc,IAEhBxK,SAAAA,CAAUf,EAAOwL,GACf,MAAO,CACL1K,OAAQ,OACR8D,SAAU,SACVC,aAAc,WACd1E,WAAY,SACZwE,QAAS,EACT3E,QACAwL,aAEJ,GA8BF,OA5B4Blf,IAC1B,IAAI,UACFmf,EAAS,MACT3F,EAAK,MACLpC,EAAK,MACL1D,EAAK,WACLwL,GACElf,EACJ,MAAMof,EAAehI,GAAmB,SAAVA,EAA6B,aAAVoC,EAAuBpC,EAAQ,GAAGA,EAAMiI,OAAO,KAAKjI,EAAMkI,cAAcC,OAAO,EAAGnI,EAAMlZ,UAAY,IACrJ,OAAoBgV,EAAAA,cAAoB,MAAO,CAC7CS,MAAO,CACLqI,KAAM,EACNtH,YAAa,GACbX,SAAU,MAEXoL,GAA0BjM,EAAAA,cAAoB8H,GAAAA,QAAW,CAC1DrH,MAAOmE,GAAOkH,gBACb,IAAKxF,EAAO,KAAmBtG,EAAAA,cAAoB8H,GAAAA,QAAW,CAC/DrH,MAAOmE,GAAOrD,UAAUf,EAAOwL,IAC9BE,GAAc,ECzCnB,SAAS/N,GAAgBC,EAAGrB,EAAG/J,GAAK,OAAQ+J,EAC5C,SAAwB/J,GAAK,IAAIwJ,EACjC,SAAsBxJ,EAAG+J,GAAK,GAAI,iBAAmB/J,IAAMA,EAAG,OAAOA,EAAG,IAAIoL,EAAIpL,EAAEqL,OAAOC,aAAc,QAAI,IAAWF,EAAG,CAAE,IAAI5B,EAAI4B,EAAEG,KAAKvL,EAAG+J,GAAK,WAAY,GAAI,iBAAmBP,EAAG,OAAOA,EAAG,MAAM,IAAIgC,UAAU,+CAAiD,CAAE,OAAQ,WAAazB,EAAI0B,OAASC,QAAQ1L,EAAI,CADlR2L,CAAa3L,EAAG,UAAW,MAAO,iBAAmBwJ,EAAIA,EAAIA,EAAI,EAAI,CAD1DoC,CAAe7B,MAAOqB,EAAIS,OAAOC,eAAeV,EAAGrB,EAAG,CAAEpO,MAAOqE,EAAG+L,YAAY,EAAIC,cAAc,EAAIC,UAAU,IAAQb,EAAErB,GAAK/J,EAAGoL,CAAG,CAkBnL,MAAMwG,GAAS,CACb0H,SAAAA,CAAU9D,EAAiBgB,EAAU+B,GACnC,MAAO,CACL/C,kBACAzD,QAAS,OACT+F,WAAY,uBACZS,OAAQA,EACRR,UAAW,aACXC,SAAU,WACVrK,WAAY,SACZsK,UAAW,OACXC,aAAc,oBACdqB,SAAU/C,EAAW,SAAW,OAEpC,EACA2B,QAAAA,CAAS3B,GACP,MAAO,CACLV,KAAM,WACN/D,QAAS,OACT2F,UAAW,SACXlJ,YAAagI,EAAW,GAAK,EAEjC,EACAgD,KAAM,CACJhM,MAAOrB,GAAM7H,QAAQmB,SACrBsQ,YAAa,GAEfqC,MAAAA,CAAO5B,EAAUwC,GACf,MAAO,CACLxhB,WAAU,EACViX,SAAU,OACVqH,KAAM,EACN1D,SAAU,SACVC,aAAc,WACd1E,WAAY,SACZoE,QAAS,OACTwD,WAAY,SACZ/H,MAAO,QACPgB,YAAagI,EAAW,GAAK,EAC7BwC,aAEJ,EACA9X,OAAAA,CAAQsV,EAAUiD,EAAWT,GAC3B,MAAO,CACLlD,KAAM,EACN1D,SAAU,SACVC,aAAc,WACd1E,WAAY,SACZa,YAAa,GACbhX,WAAU,EACVgW,MAAOiM,EACPT,aACA1d,MAAOkb,EAAW,UAAY,GAC9BkD,UAAWlD,EAAW,GAAK,GAC3BmD,UAAWnD,EAAW,KAAO,OAEjC,EACAoD,UAAAA,CAAWpD,EAAUiD,EAAWT,GAC9B,MAAO,CACLlD,KAAM,EACNte,WAAU,EACVgX,YAAagI,EAAW,GAAK,EAC7BuC,aAAcvC,EAAW,EAAI,GAC7BpE,SAAU,SACVC,aAAc,WACd1E,WAAY,SACZkM,UAAWrD,EAAW,GAAK,MAC3BhJ,MAAOiM,EACPT,aAEJ,GAEF,MAAMV,WAAoCjM,EAAAA,UACxCC,WAAAA,CAAYC,GACVC,MAAMD,GACNpB,GAAgB5S,KAAM,WAAWkK,IAC/BlK,KAAKgU,MAAMtD,+BAA+BxG,GACtCA,IAAwBA,EAAoBqX,MAC9CvhB,KAAKgU,MAAMvC,yBAAyB,OAAQ,CAACvH,EAAoB3K,IAAKS,KAAKgU,MAAM9L,qBAEnFlI,KAAKgU,MAAMxB,kBAAkB,GAAI,GAAI,IACrCxS,KAAKgU,MAAMlL,YAAYrJ,OAAS,GAAKO,KAAKgU,MAAMvB,mBAChDoI,GAAQnZ,KAAK,IAAIwI,EAAoB5H,eAAe4H,EAAoB3K,KAAK,IAE/EqT,GAAgB5S,KAAM,gBAAgB,IAAMA,KAAKmU,SAAS,CACxD6L,OAAQ,UACR/C,gBAAiBrJ,GAAM7H,QAAQa,iBAEjCgG,GAAgB5S,KAAM,gBAAgB,IAAMA,KAAKmU,SAAS,CACxD6L,OAAQ,OACR/C,gBAAiBrJ,GAAM7H,QAAQ6B,gBAEjCgF,GAAgB5S,KAAM,sBAAsB,CAACkK,EAAqBgV,KAChE,MAAM9W,EAA8BpI,KAAKgU,MAAM5L,6BAA+B8B,EAAoB3K,KAAOS,KAAKgU,MAAM5L,4BAA4B7I,GAChJ,OAAI2f,IAAY9W,EACPwL,GAAM7H,QAAQG,OACZ9D,EACFwL,GAAM7H,QAAQe,aAEhB9M,KAAKmJ,MAAM8T,eAAe,IAEnCjd,KAAKmJ,MAAQ,CACX8T,gBAAiBrJ,GAAM7H,QAAQ6B,YAC/BoS,OAAQ,OAEZ,CACAxL,MAAAA,GACE,MAAMtK,EAAsBlK,KAAKgU,MAAM9J,oBACjC6Q,EAAQ7Q,EAAoBsX,WAAatX,EAAoBsX,WAAWja,YAAcvH,KAAKgU,MAAM9L,oBAAoBX,YACrH2X,IAAYlf,KAAKgU,MAAM1L,WAAWoB,MAAK+X,GAAKA,EAAEliB,KAAO2K,EAAoB3K,KACzEic,EAAyBxb,KAAKgU,MAAMwH,uBACpC9S,EAAkB1I,KAAKgU,MAAMtL,gBAC7BgZ,EAAQC,OACRC,EAAcD,KAAOzX,EAAoB2X,aAAaC,IAAIpZ,GAC1D+X,EAAcvW,EAAoBqX,KAAgB,GAAT,OACzCL,EAAYlhB,KAAKgU,MAAM9J,oBAAoBqX,KAAO,QAAU3N,GAAM7H,QAAQqB,SAC1E2U,EAA2B/hB,KAAKgiB,mBAAmB9X,EAAqBgV,GAC9E,OAAoBzK,EAAAA,cAAoByJ,GAAAA,QAAO,CAC7ChJ,MAAOmE,GAAO0H,UAAUgB,EAA0B/hB,KAAKgU,MAAMiK,SAAUje,KAAKmJ,MAAM6W,QAClFvF,QAASoE,SACoC1W,IAA3B0W,EAAM3Z,OAAO+c,WAAsD,KAA3BpD,EAAM3Z,OAAO+c,YACrDjiB,KAAKgU,MAAM3L,qCACzBrI,KAAKya,QAAQvQ,GACblK,KAAKgU,MAAM1L,WAAW7I,OAAS,GAAKO,KAAKgU,MAAM7B,mBAC3CnS,KAAKgU,MAAMiK,eAA0C9V,IAA7BnI,KAAKgU,MAAMxR,oBAA6D2F,IAA9BnI,KAAKgU,MAAMxL,qBAA4DL,IAA5BnI,KAAKgU,MAAMzL,cAC1HvI,KAAKgU,MAAMzB,eAAUpK,EAAW,WAEpC,EAEF+Z,aAAcliB,KAAKkiB,aACnBC,aAAcniB,KAAKmiB,cACL1N,EAAAA,cAAoBwK,GAAAA,QAAU,CAC5CC,QAASA,EACThK,MAAOmE,GAAOuG,SAAS5f,KAAKgU,MAAMiK,UAClCkC,QAASA,KACPngB,KAAKgU,MAAMoO,WAAWlY,GAAsBgV,EAAQ,IAEvCzK,EAAAA,cAAoB,MAAO,CAC1CS,MAAOmE,GAAOwG,OAAO7f,KAAKgU,MAAMiK,SAAUwC,IACzCvW,EAAoBgD,UAAyBuH,EAAAA,cAAoB4N,GAAAA,EAAM,CACxEnN,MAAOmE,GAAO4H,OACCxM,EAAAA,cAAoB,OAAQ,KAAMsG,IAAsBtG,EAAAA,cAAoB8H,GAAAA,QAAW,CACtGrH,MAAOmE,GAAO1Q,QAAQ3I,KAAKgU,MAAMiK,SAAUiD,EAAWT,IACrDvW,EAAoBvB,SAAU6S,GAAuC/G,EAAAA,cAAoB6N,GAAqB,CAC/G5B,WAAW,EACX3F,MAAOvT,EAAAA,EAAKC,EAAE,UACdwN,MAAOiM,EACPT,WAAYA,EACZ9H,MAAOzO,EAAoBzH,SACzB+Y,GAAuC/G,EAAAA,cAAoB6N,GAAqB,CAClF5B,WAAW,EACX3F,MAAOvT,EAAAA,EAAKC,EAAE,YACdwN,MAAOiM,EACPT,WAAYA,EACZ9H,MAAOzO,EAAoBxH,WACzB1C,KAAKgU,MAAMsM,cAAgBtgB,KAAKgU,MAAMiK,UAAyBxJ,EAAAA,cAAoB6N,GAAqB,CAC1G5B,WAAW,EACX3F,MAAOvT,EAAAA,EAAKC,EAAE,YACdwN,MAAOiM,EACPT,WAAYA,EACZ9H,MAAOzO,EAAoBqY,SAAWrY,EAAoBqY,SAAShb,iBAAcY,IAClEsM,EAAAA,cAAoB8H,GAAAA,QAAW,CAC9CrH,MAAOmE,GAAOgI,WAAWrhB,KAAKgU,MAAMiK,SAAUiD,EAAWT,IACxDiB,EAAMc,KAAKZ,EAAa,SAAW,GAAKA,EAAYa,KAAKf,GAASA,EAAMgB,SAAWd,EAAYc,OAASd,EAAYe,OAAO,UAAYf,EAAYe,OAAO,OAC/J,EAmCF,QAAepX,EAAAA,GAAAA,KAAQgK,EAAAA,EAAAA,KAXCpM,IAAK,CAC3Bf,4BAA6Be,EAAMuC,UAAUtD,4BAC7CC,mCAAoCc,EAAMuC,UAAUrD,mCACpDH,oBAAqBiB,EAAMuC,UAAUxD,oBACrCI,WAAYa,EAAMuC,UAAUpD,WAC5BI,gBAAiBS,EAAMuC,UAAUhD,gBACjClG,cAAe2G,EAAMuC,UAAUlJ,cAC/B+F,aAAcY,EAAMuC,UAAUnD,aAC9BC,eAAgBW,EAAMuC,UAAUlD,eAChCM,YAAaK,EAAMuC,UAAU5C,eAEiB,CAC9CsZ,WbqKwBA,CAAClY,EAAqBC,IAAkBsG,GAAalH,EAAqB,CAClGW,sBACAC,kBatKAuG,+BAA8B,GAC9Be,yBAAwB,GACxBU,gBAAe,GACfI,UAAS,GACTC,kBAAiB,GACjBC,iBACF,IAAG,KAAM,CACP+C,MAAM,IATR,CAUIuK,ICnOJ,SAASnN,GAAgBC,EAAGrB,EAAG/J,GAAK,OAAQ+J,EAC5C,SAAwB/J,GAAK,IAAIwJ,EACjC,SAAsBxJ,EAAG+J,GAAK,GAAI,iBAAmB/J,IAAMA,EAAG,OAAOA,EAAG,IAAIoL,EAAIpL,EAAEqL,OAAOC,aAAc,QAAI,IAAWF,EAAG,CAAE,IAAI5B,EAAI4B,EAAEG,KAAKvL,EAAG+J,GAAK,WAAY,GAAI,iBAAmBP,EAAG,OAAOA,EAAG,MAAM,IAAIgC,UAAU,+CAAiD,CAAE,OAAQ,WAAazB,EAAI0B,OAASC,QAAQ1L,EAAI,CADlR2L,CAAa3L,EAAG,UAAW,MAAO,iBAAmBwJ,EAAIA,EAAIA,EAAI,EAAI,CAD1DoC,CAAe7B,MAAOqB,EAAIS,OAAOC,eAAeV,EAAGrB,EAAG,CAAEpO,MAAOqE,EAAG+L,YAAY,EAAIC,cAAc,EAAIC,UAAU,IAAQb,EAAErB,GAAK/J,EAAGoL,CAAG,CAgBnL,MAAM+P,GAAgB,CAAC,oBAAqB,UAEtCvJ,GAAS,CACbC,MAAAA,CAAO2E,GACL,MAAO,CACLV,KAAM,MACNjI,SAAU2I,EAAW,OAAS,QAC9Bb,SAAUa,EAAW,OAAS,QAC9B4E,iBAAkB5E,EAAW,GAAK,WAC/BvI,GAEP,EACA9N,QAAS,CACPqV,gBAAiBrJ,GAAM7H,QAAQa,aAC/BmJ,OAAQ,OACRwJ,WAAY,uBACZ/F,QAAS,OACTE,eAAgB,WAGpB,MAAMoJ,WAAgChP,EAAAA,UACpCC,WAAAA,GACEE,SAAS/T,WACT0S,GAAgB5S,KAAM,YAAYsC,IAChC,MAAMygB,EAAcne,SAASoe,eAAe,gBACvChjB,KAAKgU,MAAM9L,oBAAoBN,SAAW5H,KAAKijB,SAASF,IAAgBzgB,EAAYqF,OAASrF,EAAYuF,OAC5G7H,KAAKgU,MAAMlD,yBAAyBxO,EAAaA,EAAY/C,IAAI,EACnE,IAEFqT,GAAgB5S,KAAM,oBAAqBL,EAASK,KAAKkjB,SAAU,MACnEtQ,GAAgB5S,KAAM,YAAYmjB,GAAMA,EAAGC,aAAeD,EAAGE,UAAYhY,OAAOiY,aAClF,CACA9O,MAAAA,GACE,MAAM0L,EvBjDH,SAAoB5gB,GACzB,IAAK4E,MAAMqf,QAAQjkB,GACjB,OAEF,MAAMkkB,EAAS,IAAIC,IACnB,OAAOnkB,EAAKyB,QAAO2iB,IACbF,EAAOG,IAAID,EAAKnkB,MAGpBikB,EAAO1B,IAAI4B,EAAKnkB,KACT,IAEX,CuBqCqBqkB,CAAW5jB,KAAKgU,MAAM/Q,qBAAqBjD,KAAKgU,MAAM9L,oBAAoB3I,KACrF+C,EAActC,KAAKgU,MAAM9L,oBAAsBlI,KAAKgU,MAAM9L,oBAAsB,GAChFiC,EAAgBnK,KAAKgU,MAAM5L,4BAA8BpI,KAAKgU,MAAM5L,4BAA4B7I,GAAK,GACrG+gB,KAAkBsC,GAAciB,QAAQvhB,EAAY/C,IAAM,GAChE,OAAoBkV,EAAAA,cAAoB,MAAO,CAC7ClV,GAAI,cACJ2jB,SAAUA,IAAMljB,KAAK8jB,kBAAkB9jB,KAAKgU,MAAM9L,qBAClDgN,MAAOmE,GAAOC,OAAOtZ,KAAKgU,MAAMiK,WAC/Bje,KAAKgU,MAAMiK,UAAyBxJ,EAAAA,cAAoBsP,GAAgB,CACzEzD,aAAcA,EACd9E,uBAAwBxb,KAAKgU,MAAMwH,uBACnC0E,SAAUA,IACRA,GAAgC,IAApBA,EAASzgB,OAAeygB,EAAS7b,KAAIgc,GAAsB5L,EAAAA,cAAoBsL,GAA6B,CAC1H3J,IAAKiK,EAAM9gB,GACX2K,oBAAqBmW,EACrBpC,SAAUje,KAAKgU,MAAMiK,SACrB9T,cAAeA,EACfmW,aAAcA,EACd9E,uBAAwBxb,KAAKgU,MAAMwH,4BAC9Bxb,KAAKgU,MAAM9L,oBAAoBN,SAAwB6M,EAAAA,cAAoB8H,GAAAA,QAAW,KAAM/U,EAAAA,EAAKC,EAAE,mCAAoC,CAC5InF,YAAaA,EAAYiF,eACtBvH,KAAKgU,MAAM9L,oBAAoBN,SAAwB6M,EAAAA,cAAoB,MAAO,CACrFS,MAAOmE,GAAOzR,SACA6M,EAAAA,cAAoBuP,GAAAA,EAAkB,CACpD9O,MAAO,CACLiM,UAAW,QAEblM,MAAOrB,GAAM7H,QAAQI,iBAEzB,EAsBF,QAAeZ,EAAAA,GAAAA,KAAQgK,EAAAA,EAAAA,KATCpM,IAAK,CAC3BlB,aAAckB,EAAMuC,UAAUzD,aAC9BzF,cAAe2G,EAAMuC,UAAUlJ,cAC/B+F,aAAcY,EAAMuC,UAAUnD,aAC9BC,eAAgBW,EAAMuC,UAAUlD,eAChCvF,qBAAsBkG,EAAMuC,UAAUzI,qBACtCmF,4BAA6Be,EAAMuC,UAAUtD,4BAC7CF,oBAAqBiB,EAAMuC,UAAUxD,uBAES,CAC9C4I,yBACF,IAAG,KAAM,CACP0E,MAAM,IAHR,CAIIsN,I,oCCxGJ,SAASlQ,GAAgBC,EAAGrB,EAAG/J,GAAK,OAAQ+J,EAC5C,SAAwB/J,GAAK,IAAIwJ,EACjC,SAAsBxJ,EAAG+J,GAAK,GAAI,iBAAmB/J,IAAMA,EAAG,OAAOA,EAAG,IAAIoL,EAAIpL,EAAEqL,OAAOC,aAAc,QAAI,IAAWF,EAAG,CAAE,IAAI5B,EAAI4B,EAAEG,KAAKvL,EAAG+J,GAAK,WAAY,GAAI,iBAAmBP,EAAG,OAAOA,EAAG,MAAM,IAAIgC,UAAU,+CAAiD,CAAE,OAAQ,WAAazB,EAAI0B,OAASC,QAAQ1L,EAAI,CADlR2L,CAAa3L,EAAG,UAAW,MAAO,iBAAmBwJ,EAAIA,EAAIA,EAAI,EAAI,CAD1DoC,CAAe7B,MAAOqB,EAAIS,OAAOC,eAAeV,EAAGrB,EAAG,CAAEpO,MAAOqE,EAAG+L,YAAY,EAAIC,cAAc,EAAIC,UAAU,IAAQb,EAAErB,GAAK/J,EAAGoL,CAAG,CAUnL,MAAMoR,WAAwBnQ,EAAAA,UAC5BC,WAAAA,CAAYC,GACVC,MAAMD,GACNpB,GAAgB5S,KAAM,WAAW,KAC/BA,KAAKgU,MAAMyG,SAAS,IAEtB7H,GAAgB5S,KAAM,gBAAgB,KACpCA,KAAKkkB,eACLlkB,KAAKmU,SAAS,CACZ6L,OAAQ,WACR,IAEJpN,GAAgB5S,KAAM,gBAAgB,KACpCA,KAAKmkB,iBACLnkB,KAAKmU,SAAS,CACZ6L,OAAQ,QACR,IAEJpN,GAAgB5S,KAAM,kBAAkB,IAAMA,KAAKokB,aAAaxQ,GAAM7H,QAAQa,gBAC9EgG,GAAgB5S,KAAM,gBAAgB,IAAMA,KAAKokB,aAAaxQ,GAAM7H,QAAQe,gBAC5E8F,GAAgB5S,KAAM,gBAAgBiV,IACpCjV,KAAKmU,SAAS,CACZ8I,gBAAiBhI,GACjB,IAEJrC,GAAgB5S,KAAM,sBAAsB,CAACmK,EAAe5K,IAAO4K,GAAiB5K,IAAO4K,EAAc5K,GAAKqU,GAAM7H,QAAQe,aAAe9M,KAAKmJ,MAAM8T,kBACtJjd,KAAKmJ,MAAQ,CACX8T,gBAAiBrJ,GAAM7H,QAAQa,aAC/BY,UAAWoG,GAAM7H,QAAQqB,SAE7B,CACAoH,MAAAA,GACE,OAAoBC,EAAAA,cAAoB,MAAO,CAC7C4P,KAAM,eACNnP,MAAO,IACFlV,KAAKmJ,MACR8T,gBAAiBjd,KAAKgiB,mBAAmBhiB,KAAKgU,MAAM9L,oBAAqBlI,KAAKgU,MAAM1R,YAAY/C,IAChGygB,OAAQhgB,KAAKmJ,MAAM6W,OACnBhD,WAAY,SACZjH,OAAQ,OACRyD,QAAS,OACT8K,cAAe,MACf5K,eAAgB,iBAElBwI,aAAcliB,KAAKkiB,aACnBC,aAAcniB,KAAKmiB,aACnB1H,QAASA,IAAMza,KAAKya,WACNhG,EAAAA,cAAoB8H,GAAAA,QAAW,CAC7CrH,MAAO,CACLqP,WAAY,MACZrO,SAAUlW,KAAKgU,MAAM9L,qBAAuBlI,KAAKgU,MAAM1R,YAAY/C,KAAOS,KAAKgU,MAAM9L,oBAAoB3I,GAAK,OAAS,OACvHsa,SAAU,SACVC,aAAc,WACd1E,WAAY,SACZH,MAAOjV,KAAKgU,MAAM9L,qBAAuBlI,KAAKgU,MAAM1R,YAAY/C,KAAOS,KAAKgU,MAAM9L,oBAAoB3I,GAAKqU,GAAM7H,QAAQI,cAAgBnM,KAAKmJ,MAAMqE,YAErJhG,EAAAA,EAAKC,EAAEzH,KAAKgU,MAAM1R,YAAYiF,cAAevH,KAAKgU,MAAMpM,QAAuB6M,EAAAA,cAAoBuP,GAAAA,EAAkB,CACtH9O,MAAO,CACLsI,YAAa,QAEfvI,MAAOrB,GAAM7H,QAAQI,cACrBnB,KAAM,KACHhL,KAAKgU,MAAM1R,YAAYoF,OAAS,GAAkB+M,EAAAA,cAAoB+P,GAAAA,EAAO,CAChFtP,MAAO,CACLiM,UAAW,OACX3D,YAAa,OAEfiH,aAAczkB,KAAKgU,MAAM1R,YAAYoF,OAAS,IAAM,MAAQ1H,KAAKgU,MAAM1R,YAAYoF,OACnFgd,WAAW,EACXC,WAAY,CACV1H,gBAAiB,aAGvB,EAQF,UC9EA,MAAM5D,GAAS,CACbC,OAAQ,CACNE,QAAS,OACT8K,cAAe,SACf5K,eAAgB,gBAChB3D,OAAQ,qBACR6O,gBAAiB,QACjBC,gBAAiB,QACjBC,gBAAiBlR,GAAM7H,QAAQiB,aAC/B6V,iBAAkB,QAClBhN,iBAAkB,MAClBC,iBAAkBlC,GAAM7H,QAAQiB,aAChC2I,UAAW,OACXC,UAAW,SACXwH,SAAU,UAGd,MAAM2H,WAAoBjR,EAAAA,UACxBC,WAAAA,CAAYC,GACVC,MAAMD,GACNhU,KAAKgU,MAAMlK,uBAAuB9J,KAAKgU,MAAMgR,MAAMpkB,OAAO0B,YAC5D,CACAkS,MAAAA,GACE,MAAMvM,EAAejI,KAAKgU,MAAM/L,aAChC,OAAoBwM,EAAAA,cAAoB,MAAO,CAC7CS,MAAOmE,GAAOC,QACA7E,EAAAA,cAAoBwQ,GAAAA,GAAM,CACxC/P,MAAO,CACL0E,QAAS,QAEV3R,GAAgBA,EAAa5D,KAAI/B,GAA4BmS,EAAAA,cAAoB,MAAO,CACzF2B,IAAK9T,EAAY/C,IACHkV,EAAAA,cAAoBwP,GAAiB,CACnD3hB,YAAaA,EACbmY,QAASA,KACPza,KAAKgU,MAAMlK,uBAAuBxH,EAAY/C,IAC9CS,KAAKgU,MAAMxB,kBAAkB,GAAI,GAAI,IACrCxS,KAAKgU,MAAMlL,YAAYrJ,OAAS,GAAKO,KAAKgU,MAAMvB,mBAChDoI,GAAQnZ,KAAK,IAAIY,EAAY/C,KAAK,EAEpC2I,oBAAqBlI,KAAKgU,MAAM9L,oBAChCN,QAAStF,EAAYsF,UACN6M,EAAAA,cAAoByH,GAAAA,QAAS,UAAuBzH,EAAAA,cAAoByQ,GAAAA,EAAQ,CAC/FhQ,MAAO,CACLqE,MAAO,GACP8D,OAAQ,QAEV1E,MAAO,GAAGnR,EAAAA,EAAKC,EAAE,oBAAoBka,KAAO3hB,KAAKgU,MAAMmR,cAAcxC,OAAO,YAC5EyC,QAASplB,KAAKgU,MAAMqR,YACpBC,SAAUA,IAAMtlB,KAAKgU,MAAMuR,gBAAgBvlB,KAAKgU,MAAMqR,eAE1D,EAkBF,QAAe9Z,EAAAA,GAAAA,KAAQgK,EAAAA,EAAAA,KAJCpM,IAAK,CAC3BjB,oBAAqBiB,EAAMuC,UAAUxD,oBACrCD,aAAckB,EAAMuC,UAAUzD,gBAEgB,CAC9C6B,uBAAsB,GACtBqI,gBACF,IAAG,KAAM,CACPqD,MAAM,IAJR,CAKIuP,I,wEC/EJ,MAiCMS,GAAatkB,IACjB,IAAI,cACFukB,EAAa,WACb7a,EAAU,iBACV8H,EAAgB,mBAChB9O,EAAkB,iBAClB+O,GACEzR,EACJ,OAAoBuT,EAAAA,cAAoB8F,GAAAA,QAAY,CAClDmL,UAAW,qBACXzI,gBAAiBrJ,GAAM7H,QAAQa,aAC/B+L,MAAO,GAAG/N,EAAWC,SAAS8a,WAAWC,SAAShb,EAAWE,cAAe,IAAM,KAAS+a,QAAQ,SACnGC,cAAe,QACfrL,QAASA,KACW,aAAlBgL,EAA+B7hB,EAAmBgH,GAAcA,EAAWhD,QAAU+K,EAAiB/H,EAAWC,MAAQ6H,EAAiB9H,EAAW,EAEvJuT,KAAwB,aAAlBsH,EAA4ChR,EAAAA,cAAoBsR,GAAAA,EAAU,MAAqBtR,EAAAA,cAAoBuR,GAAAA,EAAO,OAC/Hpb,EAAWhD,SAAwB6M,EAAAA,cAAoBwR,GAAAA,EAAgB,CACxEP,UAAW,uBACXhU,KAAM,kBACL,EASL,OA9DoBnQ,IAClB,IAAI,cACFkkB,EAAa,YACb3c,EAAW,MACXoM,EAAK,iBACLxC,EAAgB,mBAChB9O,EAAkB,iBAClB+O,GACEpR,EACJ,OAAoBkT,EAAAA,cAAoB,MAAO,CAC7CiR,UAAW,aACXxQ,MAAO,IACFA,IAEJpM,EAAYzE,KAAI,CAACuG,EAAYlL,IAAuB+U,EAAAA,cAAoB+Q,GAEzE,CACApP,IAAK,GAAGxL,EAAWC,QAAQnL,IAC3B+lB,cAAeA,EACf7a,WAAYA,EACZ8H,iBAAkBA,EAClB9O,mBAAoBA,EACpB+O,iBAAkBA,MAChB,E,YCzBN,MAAMuT,GAAqBpU,GAAiB+M,IAC1C,MAAMsH,EAAQtH,EAAM3Z,OAAOihB,MACXA,EAAM1mB,OAAS,GAE7BqS,EAAcqU,EAAM,GACtB,EAqBF,OAnB+B5kB,IAC7B,IAAI,cACFuQ,GACEvQ,EACJ,OAAoBkT,EAAAA,cAAoB8F,GAAAA,QAAY,CAClDmL,UAAW,4BACX/M,MAAOnR,EAAAA,EAAKC,EAAE,qBACdqe,cAAe,QACfM,iBAAkB,QAClBjI,KAAmB1J,EAAAA,cAAoB4R,GAAAA,EAAY,OACrC5R,EAAAA,cAAoB,QAAS,CAC3CiR,UAAW,mCACXpiB,KAAM,OACNsb,SAAUsH,GAAmBpU,KAC5B,EC3BL,SAASc,GAAgBC,EAAGrB,EAAG/J,GAAK,OAAQ+J,EAC5C,SAAwB/J,GAAK,IAAIwJ,EACjC,SAAsBxJ,EAAG+J,GAAK,GAAI,iBAAmB/J,IAAMA,EAAG,OAAOA,EAAG,IAAIoL,EAAIpL,EAAEqL,OAAOC,aAAc,QAAI,IAAWF,EAAG,CAAE,IAAI5B,EAAI4B,EAAEG,KAAKvL,EAAG+J,GAAK,WAAY,GAAI,iBAAmBP,EAAG,OAAOA,EAAG,MAAM,IAAIgC,UAAU,+CAAiD,CAAE,OAAQ,WAAazB,EAAI0B,OAASC,QAAQ1L,EAAI,CADlR2L,CAAa3L,EAAG,UAAW,MAAO,iBAAmBwJ,EAAIA,EAAIA,EAAI,EAAI,CAD1DoC,CAAe7B,MAAOqB,EAAIS,OAAOC,eAAeV,EAAGrB,EAAG,CAAEpO,MAAOqE,EAAG+L,YAAY,EAAIC,cAAc,EAAIC,UAAU,IAAQb,EAAErB,GAAK/J,EAAGoL,CAAG,CAsBnL,MAAMwG,GAAS,CACbC,OAAQ,CACNiE,KAAM,MACNF,OAAQ,OACR1H,UAAW,SACXC,UAAW,SACXG,OAAQ,uBAEVuQ,iBAAkB,CAChB9M,QAAS,OACT8K,cAAe,OAEjBhiB,YAAa,CACXiX,MAAO,QACP4H,UAAW,SAGf,MAAMoF,WAAsBzS,EAAAA,UAC1BC,WAAAA,CAAYC,GACVC,MAAMD,GACNpB,GAAgB5S,KAAM,iBAAiB,CAAC6e,EAAO2H,KAC7CxmB,KAAKgU,MAAMxB,kBAAkBgU,EAAUxmB,KAAKgU,MAAMpL,MAAO5I,KAAKgU,MAAMnL,WAAW,IAEjF+J,GAAgB5S,KAAM,eAAe,CAAC6e,EAAO2H,KAC3CxmB,KAAKgU,MAAMxB,kBAAkBxS,KAAKgU,MAAMrL,QAAS6d,EAAUxmB,KAAKgU,MAAMnL,WAAW,IAEnF+J,GAAgB5S,KAAM,oBAAoB6I,IACxC7I,KAAKgU,MAAMxB,kBAAkBxS,KAAKgU,MAAMrL,QAAS3I,KAAKgU,MAAMpL,MAAOC,EAAW,IAEhF+J,GAAgB5S,KAAM,eAAe,KACnC,MAAMsK,EAAgBtK,KAAKmJ,MAAMsd,kBAAoB,SAAW,UAC1DnkB,EAActC,KAAKgU,MAAM/L,aAAayB,MAAKpH,GAAeA,EAAY/C,KAAO+K,IACnF,GAAItK,KAAKmJ,MAAMsd,kBACbzmB,KAAKgU,MAAM0S,oBAAoBpkB,GAC/BuY,GAAQnZ,KAAK,eACR,CACL,MAAME,EAAQ5B,KAAKgU,MAAMnL,WAAW9H,QAAOyQ,GAAgB,SAAXA,EAAElO,OAC5CxB,EAAa9B,KAAKgU,MAAMnL,WAAW9H,QAAOyQ,GAAgB,cAAXA,EAAElO,OACjDzB,EAAoB7B,KAAKgU,MAAMnL,WAAW9H,QAAOyQ,GAAgB,qBAAXA,EAAElO,OAC9DtD,KAAKgU,MAAM2S,YAAY,CACrB/kB,QACAE,aACAD,oBACAS,gBAEFuY,GAAQnZ,KAAK,WACf,KAEFkR,GAAgB5S,KAAM,aAAa,KACjCA,KAAKgU,MAAMxB,kBAAkB,GAAI,GAAI,IACrCxS,KAAKgU,MAAMlL,YAAYrJ,OAAS,GAAKO,KAAKgU,MAAMvB,kBAAkB,IAEpEG,GAAgB5S,KAAM,iBAAiB,KACrC,MAAM+J,EAAUvC,EAAAA,EAAKC,EAAE,qBACjByB,EAAY9J,EAGlBY,KAAKgU,MAAM3B,oBAAoB,CAC7BtI,UACAf,mBAJyBA,IAAM6R,GAAQnZ,KAAK,mBAK5CuH,oBAJ0BA,IAAMjJ,KAAKuX,YAKrCrO,cAEF2R,GAAQnZ,KAAK,WAAW,IAE1B1B,KAAKmJ,MAAQ,CACXsd,mBAAmB,EAEvB,CACAG,iBAAAA,GACE,MAAM,qBACJC,GACE7mB,KAAKgU,OACH,UACJnQ,EAAS,YACTijB,GACE9mB,KAAKgU,MAAMgR,MAAMpkB,OAGH,WAAdiD,GAA0BijB,GAC5BD,EAAqBC,EAEzB,CACAtS,MAAAA,GACE,MAAM8D,EAAkC,KAAvBtY,KAAKgU,MAAMrL,SAAuC,KAArB3I,KAAKgU,MAAMpL,QAAiB5I,KAAKmJ,MAAMsd,mBAAsD,IAAjCzmB,KAAKgU,MAAMnL,WAAWpJ,OAC1HsnB,EAAyC,KAAvB/mB,KAAKgU,MAAMrL,SAAuC,KAArB3I,KAAKgU,MAAMpL,QAAiB5I,KAAKmJ,MAAMsd,mBAAsD,IAAjCzmB,KAAKgU,MAAMnL,WAAWpJ,OACvI,OAAoBgV,EAAAA,cAAoB,MAAO,CAC7CS,MAAOmE,GAAOC,QACA7E,EAAAA,cAAoB8H,GAAAA,QAAW,CAC7CrH,MAAOc,IACN,IAAKxO,EAAAA,EAAKC,EAAE,WAAyBgN,EAAAA,cAAoBuS,GAAAA,GAAM,KAAmBvS,EAAAA,cAAoBwS,GAAAA,GAAU,KAAmBxS,EAAAA,cAAoBsC,GAAiB,CACzK7B,MAAO,CACLmI,OAAQ,OAEV1E,MAAOnR,EAAAA,EAAKC,EAAE,MACd6Q,SAAUtY,KAAKmJ,MAAMsd,kBACrB5d,WAAY7I,KAAKmJ,MAAMsd,kBAAoB,CAAC,CAC1ClnB,GAAI,KACJgI,YAAaC,EAAAA,EAAKC,EAAE,8BACjBzH,KAAKgU,MAAMnL,WAChB6O,iBAAkB1X,KAAK0X,iBACvBS,YAAa,UACE1D,EAAAA,cAAoB,MAAO,CAC1CS,MAAOmE,GAAOiN,kBACA7R,EAAAA,cAAoB,MAAO,CACzCS,MAAOmE,GAAO/W,aACAmS,EAAAA,cAAoByS,GAAAA,GAAa,CAC/CvO,MAAOnR,EAAAA,EAAKC,EAAE,mBACdyX,SAAUlf,KAAKmJ,MAAMsd,kBACrBtG,QAASA,KACPngB,KAAKmU,SAAS,CACZsS,mBAAoBzmB,KAAKmJ,MAAMsd,mBAC/B,KAEYhS,EAAAA,cAAoB,MAAO,CAC3CS,MAAOmE,GAAO/W,aACAmS,EAAAA,cAAoByS,GAAAA,GAAa,CAC/CvO,MAAOnR,EAAAA,EAAKC,EAAE,oBACdyX,QAASlf,KAAKmJ,MAAMsd,kBACpBtG,QAASA,KACPngB,KAAKmU,SAAS,CACZsS,mBAAoBzmB,KAAKmJ,MAAMsd,mBAC/B,MAEahS,EAAAA,cAAoBqK,GAAAA,QAAW,CAChDpG,kBAAmBlR,EAAAA,EAAKC,EAAE,WAC1B8Q,WAAW,EACXnV,MAAOpD,KAAKgU,MAAMrL,QAClBiW,SAAU5e,KAAKmnB,gBACA1S,EAAAA,cAAoBqK,GAAAA,QAAW,CAC9C1I,IAAK,gBACL7W,GAAI,gBACJ6nB,KAAM,EACNC,eAAe,EACfjkB,MAAOpD,KAAKgU,MAAMpL,MAClB0e,WAAW,EACX/O,WAAW,EACXG,kBAAmBlR,EAAAA,EAAKC,EAAE,WAC1BmX,SAAU5e,KAAKunB,cACbvnB,KAAKgU,MAAMwT,mBAAkC/S,EAAAA,cAAoBgT,GAAa,CAChFhC,cAAe,SACf3c,YAAa9I,KAAKgU,MAAMlL,YACxB4J,iBAAkB9H,GAAc5K,KAAKgU,MAAMtB,iBAAiB9H,EAAWrL,IACvEoT,iBAAkB3S,KAAKgU,MAAMrB,mBACd8B,EAAAA,cAAoBiT,GAAAA,EAAa,CAChDxS,MAAO,CACLe,YAAa,QAEDxB,EAAAA,cAAoBkT,GAAAA,EAAc,CAChDnN,SAAS,EACTlC,SAAUA,EACVK,MAAOnR,EAAAA,EAAKC,EAAE,QACdgT,QAASA,IAAMza,KAAK2mB,gBACLlS,EAAAA,cAAoB8F,GAAAA,QAAY,CAC/C5B,MAAOnR,EAAAA,EAAKC,EAAE,WACd6Q,SAAUyO,EACVtM,QAASza,KAAK4nB,gBACZ5nB,KAAKgU,MAAMwT,mBAAkC/S,EAAAA,cAAoBoT,GAAwB,CAC3F/V,cAAelH,IACb5K,KAAKgU,MAAMlC,cAAclH,EAAW,OAG1C,EA4BF,QAAeW,EAAAA,GAAAA,KAAQgK,EAAAA,EAAAA,KARCpM,IAAK,CAC3BlB,aAAckB,EAAMuC,UAAUzD,aAC9BU,QAASQ,EAAMuC,UAAU/C,QACzBC,MAAOO,EAAMuC,UAAU9C,MACvBC,WAAYM,EAAMuC,UAAU7C,WAC5BC,YAAaK,EAAMuC,UAAU5C,YAC7B0e,kBAAmBlnB,EAAoB6I,EAAMuC,UAAUnL,qBAET,CAC9ComB,YnBdyBzlB,IACzB,IAAI,MACFU,EAAK,WACLE,EAAU,kBACVD,EAAiB,YACjBS,GACEpB,EACJ,OAAOmB,MAAOsO,EAAUI,KACtB,IACE,MACErF,WAAW,QACT/C,EAAO,MACPC,EAAK,YACLE,IAEAiI,SPzEiB+W,KACzB,IAAI,QACFnf,EAAO,MACP/G,EAAK,WACLE,EAAU,kBACVD,EAAiB,KACjBiX,EAAI,YACJhQ,GACEgf,EACJ,OAAO7lB,EAAOuB,OAAO,CACnB7C,SAAU,uBACV2C,KAAM,SACNK,KAAM,CACJgF,UACA/G,QACAE,aACAD,oBACAiX,OACAhQ,gBAEF,EOsDQ+H,CAAgB,CACpBlI,UACA/G,QACAE,aACAD,oBACAiX,KAAMlQ,EACNE,gBAEF6H,EAASF,GAAalH,EAA8B,CAClDjH,cACAC,KAAM,KAERoO,EAASG,KACX,CAAE,MAAO/I,GACP4I,EAASF,GAAalH,EAA4B,CAChDxB,UAEJ,EACD,EmBnBD2e,oBnBqBiCpkB,GAAeD,MAAOsO,EAAUI,KACjE,MAAM5H,EAAQ4H,IACd,UP1EkCpI,EO2EFQ,EAAMuC,UAAU/C,QP3ELmQ,EO2Ec3P,EAAMuC,UAAU9C,MP3ErB3G,EAAOuB,OAAO,CAClE7C,SAAU,gCACV2C,KAAM,SACN1C,OAAQ,CACN+H,WAEFhF,KAAMmV,KOsEJnI,EAASF,GAAalH,EAA8B,CAClDjH,YAAaA,EACbC,KAAM,KAERoO,EAASG,KACX,CAAE,MAAO/I,GACP4I,EAASF,GAAalH,EAA4B,CAChDxB,UAEJ,CPrFiC2e,IAAC/d,EAASmQ,COqF3C,EmBjCAzG,oBAAmB,GACnBG,kBAAiB,GACjBV,cAAa,GACbY,iBAAgB,GAChBC,iBAAgB,GAChBkU,qBnB8GkCtnB,GAAM8C,UACxC,IACE,MAAM0lB,OPjEiB1lB,WACzB,MAAM,KACJ0lB,SACQ9lB,EAAOR,MAAM,CACrBsmB,KAAM,CACJpnB,SAAU,QACVpB,KACAqB,OAAQ,CACNC,OAAQ,qBAId,MAAO,IACFknB,EACHzkB,KAAM,OACP,EOkDoBuN,CAAgBtR,GACnCoR,EAASF,GAAalH,GAAqCwe,GAC7D,CAAE,MAAOhgB,GACPigB,QAAQjgB,MAAMA,EAEhB,ImBpHC,KAAM,CACPyN,MAAM,IAVR,CAWI+Q,I,YC7NG,MAAMlN,GAAS,CACpBC,OAAQ,CACNiE,KAAM,MACN5H,UAAW,SACXC,UAAW,SACXG,OAAQ,sBACRkS,WAAY,QAEdC,YAAa,CACX1O,QAAS,OACT8K,cAAe,SACfjH,OAAQ,qBAEV8K,OAAQ,CACN3O,QAAS,QAEX4O,WAAY,CACV5O,QAAS,OACT2F,UAAW,UAEbkJ,iBAAkB,CAChB7O,QAAS,OACT2F,UAAW,SACXjJ,SAAU,OACVjX,WACF,GACAqpB,mBAAoB,CAClB9O,QAAS,OACT8K,cAAe,UAEjBiE,aAAc,CACZtS,YAAa,OACbgS,WAAY,OACZzO,QAAS,OACTwH,SAAU,QAEZ3J,KAAM,CACJtB,OAAQ,OACRyH,YAAa,MACbnF,aAAc,OAEhBmQ,kBAAmB,CACjBhP,QAAS,QAEXiP,4BAA6B,CAC3BxS,YAAa,OACboC,aAAc,MACdkF,KAAM,GAERmL,gBAAiB,CACfvJ,UAAW,WACX9G,aAAc,OACdpC,YAAa,QAEf0S,eAAgB,CACdtQ,aAAc,OACdmB,QAAS,OACT8K,cAAe,SACfrH,gBAAiBrJ,GAAM7H,QAAQa,aAC/ByQ,OAAQ,sBAEVuL,oBAAqB,CACnBhP,QAAS,QAGb,I,wBCzDA,MAAMP,GAAS,CACbC,MAAAA,CAAO2D,GACL,MAAO,CACLA,kBACArD,QAAS,sBAEb,EACAsO,YAAa,CACX7K,OAAQ,GACRwL,cAAe,OAEjBC,SAAU,CACRlP,QAAS,oBACT3a,WAAU,EACVmW,WAAY,WACZ2T,UAAW,cAEbC,WAAY,CACV/pB,WACF,GACAgqB,cAAe,CACbzP,QAAS,OACTE,eAAgB,WAChB8D,YAAa,QAEf6D,WAAY,CACVxH,SAAU,SACVC,aAAc,WACd1E,WAAY,SACZnW,WACF,IA8CF,OA5CgBsC,IACd,IAAI,gBACFmH,EAAe,QACfqB,EAAO,YACPjH,EAAW,YACX+e,EAAW,mBACXje,EAAkB,iBAClB+O,EAAgB,kBAChB6U,GACEjmB,EACJ,MAAM2nB,EAAYnf,EAAQ8V,OAAS/c,GAAeA,EAAYvD,KAAOwK,EAAQ8V,OAAOtgB,GAAK,KAAOwK,EAAQ8V,OAAOtY,YAAc,SACvHma,EAAQC,OACRC,EAAcD,KAAO5X,EAAQof,SAASrH,IAAIpZ,GAChD,OAAoB+L,EAAAA,cAAoB,MAAO,CAC7CS,MAAOmE,GAAOC,OAAO1F,GAAM7H,QAAQ6B,cACrB6G,EAAAA,cAAoB,MAAO,CACzCS,MAAOmE,GAAO6O,aACAzT,EAAAA,cAAoB,MAAO,CACzCS,MAAOmE,GAAO2P,YACbjf,EAAQqf,SAAW5hB,EAAAA,EAAKC,EAAE,yBAAyByhB,KAAe1hB,EAAAA,EAAKC,EAAE,gBAAgByhB,MAA4BzU,EAAAA,cAAoB,MAAO,CACjJS,MAAOmE,GAAO4P,eACAxU,EAAAA,cAAoB,MAAO,CACzCS,MAAOmE,GAAOgI,YACbK,EAAMc,KAAKZ,EAAa,SAAW,GAAK,GAAGA,EAAYa,KAAKf,OAAWE,EAAYe,OAAO,WAAajB,EAAMgB,SAAWd,EAAYc,OAASd,EAAYe,OAAO,iBAAmBf,EAAYe,OAAO,wBAAyB6E,GAAkC/S,EAAAA,cAAoBgT,GAAa,CACnShC,cAAe,WACfvQ,MAAO,CACLe,YAAa,GAEfnN,YAAaiB,EAAQjB,YACrBlF,mBAAoBA,EACpB+O,iBAAkBA,IACH8B,EAAAA,cAAoBwS,GAAAA,QAAU,CAC7C/R,MAAOmE,GAAOyP,UACArU,EAAAA,cAAoB4U,GAAAA,EAAS,KAAMtf,EAAQ+O,SAAU+I,GAA4BpN,EAAAA,cAAoByH,GAAAA,QAAS,MAAM,EC3EtI,SAAStJ,GAAgBC,EAAGrB,EAAG/J,GAAK,OAAQ+J,EAC5C,SAAwB/J,GAAK,IAAIwJ,EACjC,SAAsBxJ,EAAG+J,GAAK,GAAI,iBAAmB/J,IAAMA,EAAG,OAAOA,EAAG,IAAIoL,EAAIpL,EAAEqL,OAAOC,aAAc,QAAI,IAAWF,EAAG,CAAE,IAAI5B,EAAI4B,EAAEG,KAAKvL,EAAG+J,GAAK,WAAY,GAAI,iBAAmBP,EAAG,OAAOA,EAAG,MAAM,IAAIgC,UAAU,+CAAiD,CAAE,OAAQ,WAAazB,EAAI0B,OAASC,QAAQ1L,EAAI,CADlR2L,CAAa3L,EAAG,UAAW,MAAO,iBAAmBwJ,EAAIA,EAAIA,EAAI,EAAI,CAD1DoC,CAAe7B,MAAOqB,EAAIS,OAAOC,eAAeV,EAAGrB,EAAG,CAAEpO,MAAOqE,EAAG+L,YAAY,EAAIC,cAAc,EAAIC,UAAU,IAAQb,EAAErB,GAAK/J,EAAGoL,CAAG,CAiBnL,MAAMyW,WAAkBxV,EAAAA,UACtBC,WAAAA,CAAYC,GACVC,MAAMD,GACNpB,GAAgB5S,KAAM,gBAAgBupB,IACpC,MACE3gB,MAAOmB,EACP3B,4BAA6B8B,EAC7BhC,oBAAqB5F,GACnBtC,KAAKgU,MACThU,KAAKgU,MAAMwV,aAAa,CACtBzf,UACAwf,gBACArf,sBACA5H,gBAEFtC,KAAKuX,WAAW,IAElB3E,GAAgB5S,KAAM,aAAa,KACjCA,KAAKgU,MAAMxB,kBAAkB,GAAI,GAAI,IACrCxS,KAAKgU,MAAMlL,YAAYrJ,OAAS,GAAKO,KAAKgU,MAAMvB,mBAChDzS,KAAKmU,SAAS,CACZsV,YAAY,GACZ,IAEJ7W,GAAgB5S,KAAM,kBAAkB,CAAC6e,EAAO2H,KAC9CxmB,KAAKgU,MAAMxB,kBAAkB,GAAIgU,EAAU,GAAG,IAEhD5T,GAAgB5S,KAAM,iBAAiB,KACrC,MAAM+J,EAAUvC,EAAAA,EAAKC,EAAE,mBACjByB,EAAY9J,EAUlBY,KAAKmU,SAAS,CACZuV,cAAc,IAEhB1pB,KAAKgU,MAAM3B,oBAAoB,CAC7BtI,UACAf,mBAdyBA,IAAMhJ,KAAKmU,SAAS,CAC7CuV,cAAc,IAcdzgB,oBAZ0BA,KAC1BjJ,KAAKmU,SAAS,CACZuV,cAAc,IAEhB1pB,KAAKuX,WAAW,EAShBrO,cAEFlJ,KAAKmU,SAAS,CACZwV,UAAU,GACV,IAEJ3pB,KAAKmJ,MAAQ,CACXugB,cAAc,EAElB,CACAE,oBAAAA,GACE5pB,KAAKuX,WACP,CACA/C,MAAAA,GACE,OAAoBC,EAAAA,cAAoBuS,GAAAA,GAAM,CAC5C9R,MAAO,CACLiM,UAAW,OAEbwI,UAAU,GACIlV,EAAAA,cAAoBwS,GAAAA,GAAU,CAC5C/R,MAAO,CACL0E,QAAS,qBAEGnF,EAAAA,cAAoBqK,GAAAA,QAAW,CAC7C1I,IAAKpW,KAAKgU,MAAM9J,oBAAoB3K,GACpCA,GAAIS,KAAKgU,MAAM9J,oBAAoB3K,GACnC6nB,KAAM,EACNC,eAAe,EACfjkB,MAAOpD,KAAKmJ,MAAMugB,aAAe,GAAK1pB,KAAKgU,MAAMpL,MACjD0e,WAAW,EACX/O,WAAW,EACXG,kBAAmBlR,EAAAA,EAAKC,EAAE,WAC1BmX,SAAU5e,KAAK6pB,iBACb7pB,KAAKgU,MAAMwT,oBAAsBxnB,KAAKmJ,MAAMugB,cAA6BjV,EAAAA,cAAoBgT,GAAa,CAC5GhC,cAAe,SACf3c,YAAa9I,KAAKgU,MAAMlL,YACxB4J,iBAAkB9H,GAAc5K,KAAKgU,MAAMtB,iBAAiB9H,EAAWrL,IACvEoT,iBAAkB3S,KAAKgU,MAAMrB,mBACd8B,EAAAA,cAAoBiT,GAAAA,EAAa,CAChDxS,MAAO,CACLe,YAAa,QAEDxB,EAAAA,cAAoBkT,GAAAA,EAAc,CAChDnN,SAAS,EACT7B,MAAOnR,EAAAA,EAAKC,EAAE,SACd6Q,SAA+B,KAArBtY,KAAKgU,MAAMpL,OAAgB5I,KAAKmJ,MAAMugB,aAChDjP,QAASA,IAAMza,KAAKwpB,cAAa,KAC/BxpB,KAAKgU,MAAMvL,4BAAoE,WAAtCzI,KAAKgU,MAAM9L,oBAAoB3I,IAAgCkV,EAAAA,cAAoB8F,GAAAA,QAAY,CAC1IC,SAAS,EACT7B,MAAOnR,EAAAA,EAAKC,EAAE,kBACd6Q,SAA+B,KAArBtY,KAAKgU,MAAMpL,OAAgB5I,KAAKmJ,MAAMugB,aAChDjP,QAASA,IAAMza,KAAKwpB,cAAa,KAClB/U,EAAAA,cAAoB8F,GAAAA,QAAY,CAC/C5B,MAAOnR,EAAAA,EAAKC,EAAE,WACd6Q,SAA+B,KAArBtY,KAAKgU,MAAMpL,OAAgB5I,KAAKmJ,MAAMugB,aAChDjP,QAASza,KAAK4nB,gBACZ5nB,KAAKgU,MAAMwT,mBAAkC/S,EAAAA,cAAoBoT,GAAwB,CAC3F/V,cAAelH,IACb5K,KAAKgU,MAAMlC,cAAclH,EAAW,IAEpC,MACN,EA2BF,QAAeW,EAAAA,GAAAA,KAAQgK,EAAAA,EAAAA,KATCpM,IAAK,CAC3Bf,4BAA6Be,EAAMuC,UAAUtD,4BAC7CF,oBAAqBiB,EAAMuC,UAAUxD,oBACrCD,aAAckB,EAAMuC,UAAUzD,aAC9BW,MAAOO,EAAMuC,UAAU9C,MACvBH,2BAA4BU,EAAMuC,UAAUjD,2BAC5CK,YAAaK,EAAMuC,UAAU5C,YAC7B0e,kBAAmBlnB,EAAoB6I,EAAMuC,UAAUnL,qBAET,CAC9CipB,atBkG0B1B,IAC1B,IAAI,QACF/d,EAAO,cACPwf,EAAa,oBACbrf,EAAmB,YACnB5H,GACEwlB,EACJ,OAAOzlB,MAAOsO,EAAUI,KACtB,IACE,MAAM,GACJxR,GACE2K,EAEEpB,EADQiI,IACYrF,UAAU5C,YAAYzE,KAAIuG,GAAcA,EAAWrL,UP5FvD8C,WAC1B,IAAI,QACF0H,EAAO,cACPwf,EAAa,YACbzgB,EAAW,GACXvJ,GACEuqB,EACJ,MAAMlpB,EAAS,CACbwoB,SAAUG,GAKZ,OAHIzgB,EAAYrJ,OAAS,IACvBmB,EAAOkI,YAAcA,SAEV7G,EAAOuB,OAAO,CACzB7C,SAAU,wBAAwBpB,IAClC+D,KAAM,SACN1C,SACA+C,KAAMoG,GACN,EO2EQ8G,CAAiB,CACrB9G,UACAwf,gBACAzgB,cACAvJ,OAEFoR,EAASF,GNzPsB,wBMyPsB,CACnDvG,oBAAqBA,EACrB5H,YAAaA,EACbC,KAAM,KAERoO,EAASG,MACTH,EAASD,GAA+BxG,GAC1C,CAAE,MAAOnC,GACP4I,EAASF,GNhQoB,sBMgQsB,CACjD1I,UAEJ,EACD,EsBjID+B,uBAAsB,GACtB0I,kBAAiB,GACjBH,oBAAmB,GACnBP,cAAa,GACbY,iBAAgB,GAChBC,iBACF,IAAG,KAAM,CACP6C,MAAM,IATR,CAUI8T,ICjKJ,SAASS,KAAa,OAAOA,GAAWzW,OAAO0W,OAAS1W,OAAO0W,OAAO5S,OAAS,SAAU6S,GAAK,IAAK,IAAIpX,EAAI,EAAGA,EAAI3S,UAAUT,OAAQoT,IAAK,CAAE,IAAIpL,EAAIvH,UAAU2S,GAAI,IAAK,IAAIrB,KAAK/J,GAAG,CAAG,GAAEyiB,eAAelX,KAAKvL,EAAG+J,KAAOyY,EAAEzY,GAAK/J,EAAE+J,GAAK,CAAE,OAAOyY,CAAG,EAAGF,GAAS1pB,MAAM,KAAMH,UAAY,CACnR,SAAS0S,GAAgBC,EAAGrB,EAAG/J,GAAK,OAAQ+J,EAC5C,SAAwB/J,GAAK,IAAIwJ,EACjC,SAAsBxJ,EAAG+J,GAAK,GAAI,iBAAmB/J,IAAMA,EAAG,OAAOA,EAAG,IAAIoL,EAAIpL,EAAEqL,OAAOC,aAAc,QAAI,IAAWF,EAAG,CAAE,IAAI5B,EAAI4B,EAAEG,KAAKvL,EAAG+J,GAAK,WAAY,GAAI,iBAAmBP,EAAG,OAAOA,EAAG,MAAM,IAAIgC,UAAU,+CAAiD,CAAE,OAAQ,WAAazB,EAAI0B,OAASC,QAAQ1L,EAAI,CADlR2L,CAAa3L,EAAG,UAAW,MAAO,iBAAmBwJ,EAAIA,EAAIA,EAAI,EAAI,CAD1DoC,CAAe7B,MAAOqB,EAAIS,OAAOC,eAAeV,EAAGrB,EAAG,CAAEpO,MAAOqE,EAAG+L,YAAY,EAAIC,cAAc,EAAIC,UAAU,IAAQb,EAAErB,GAAK/J,EAAGoL,CAAG,CAuBnL,MAAM+P,GAAgB,CAAC,SAAU,qBAEjC,MAAMuH,WAA4BrW,EAAAA,UAChCC,WAAAA,CAAYC,GACVC,MAAMD,GACNpB,GAAgB5S,KAAM,cAAc,KAClC,MAAM,iCACJoS,EAAgC,oBAChClI,GACElK,KAAKgU,MACT6G,GAAQnZ,KAAK,IAAIwI,EAAoB5H,eACrC8P,GAAkC,IAEpCQ,GAAgB5S,KAAM,iBAAiB,KACrC,MAAM4B,EAAQ5B,KAAKmJ,MAAMN,WAAW9H,QAAOyQ,GAAgB,SAAXA,EAAElO,OAC5CxB,EAAa9B,KAAKmJ,MAAMN,WAAW9H,QAAOyQ,GAAgB,cAAXA,EAAElO,OACjDzB,EAAoB7B,KAAKmJ,MAAMN,WAAW9H,QAAOyQ,GAAgB,qBAAXA,EAAElO,QACxD,oBACJ4G,EACAhC,oBAAqB5F,GACnBtC,KAAKgU,MACThU,KAAKgU,MAAMvQ,cAAc,CACvB7B,QACAE,aACAD,oBACAqI,sBACA5H,gBAEFtC,KAAKmU,SAAS,CACZtL,WAAY,IACZ,IAEJ+J,GAAgB5S,KAAM,oBAAoB6I,IACxC7I,KAAKmU,SAAS,CACZtL,cACA,IAEJ7I,KAAKmJ,MAAQ,CACXN,WAAY,GACZmX,OAAQ,OAEZ,CACAxL,MAAAA,GACE,MAAM,oBACJtK,EAAmB,YACnBpH,GACE9C,KAAKgU,MACHkM,EAAWhW,EAAoBgW,SAC/BI,KAAkBsC,GAAciB,QAAQ3Z,EAAoB5H,aAAe,GAC3EimB,EAAere,EAAoBkgB,aAAaC,MAAM,EAhDjC,IAgD4DhmB,KAAIimB,IAAgBxnB,EAAYvD,IAAMS,KAAKmJ,MAAMohB,oBAAsBznB,EAAYvD,KAAO+qB,EAAYvC,KAAKxoB,GAAK+qB,EAAYvC,KAAKxgB,YAAcC,EAAAA,EAAKC,EAAE,QACvO+iB,EAAqBtgB,EAAoBkgB,aAAa3qB,OAI5D,OAHI+qB,EAlDuB,IAmDzBjC,EAAa7mB,KAAK,MAAMqJ,OAAOyf,EAnDN,KAqDP/V,EAAAA,cAAoB,MAAO,CAC7ClV,GAAI,sBACJ2V,MAAOmE,GAAOC,QACA7E,EAAAA,cAAoB,MAAO,CACzCS,MAAOmE,GAAO6O,aACAzT,EAAAA,cAAoB,MAAO,CACzCS,MAAOmE,GAAO8O,QACA1T,EAAAA,cAAoB0G,GAAAA,QAAY,CAC9CjG,MAAOmE,GAAO+O,WACdqC,gBAAiB,eACjBhQ,QAASza,KAAK0qB,WACdtP,QAAS5T,EAAAA,EAAKC,EAAE,sBACFgN,EAAAA,cAAoB4J,GAAAA,EAAgB,OAAqB5J,EAAAA,cAAoB8H,GAAAA,QAAW,CACtGrH,MAAOmE,GAAOgP,kBACbne,EAAoBvB,SAAU3I,KAAKgU,MAAMwH,wBAAuC/G,EAAAA,cAAoB6N,GAAqB,CAC1HrN,MAAOrB,GAAM7H,QAAQqB,SACrBsT,WAAW,EACX3F,MAAOvT,EAAAA,EAAKC,EAAE,UACdkR,MAAOzO,EAAoBzH,SACzBzC,KAAKgU,MAAMwH,wBAAuC/G,EAAAA,cAAoB6N,GAAqB,CAC7FrN,MAAOrB,GAAM7H,QAAQqB,SACrBsT,WAAW,EACX3F,MAAOvT,EAAAA,EAAKC,EAAE,YACdkR,MAAOzO,EAAoBxH,WACzB4d,GAA6B7L,EAAAA,cAAoB6N,GAAqB,CACxErN,MAAOrB,GAAM7H,QAAQqB,SACrBsT,WAAW,EACX3F,MAAOvT,EAAAA,EAAKC,EAAE,YACdkR,MAAOzO,EAAoBqY,SAAWrY,EAAoBqY,SAAShb,iBAAcY,KACjEsM,EAAAA,cAAoB,MAAO,CAC3CS,MAAOmE,GAAOiP,oBACA7T,EAAAA,cAAoB8H,GAAAA,QAAW,CAC7CrH,MAAO,CACLe,YAAa,OACbgS,WAAY,SAEbzgB,EAAAA,EAAKC,EAAE,iBAA+BgN,EAAAA,cAAoB,MAAO,CAClES,MAAOmE,GAAOkP,cACbA,EAAalkB,KAAIsmB,GAA4BlW,EAAAA,cAAoBmW,GAAAA,QAAM,CACxExU,IAAKuU,EACLzV,MAAOmE,GAAOhC,MACbsT,OAA8BlW,EAAAA,cAAoB,MAAO,CAC1DS,MAAOmE,GAAOmP,mBACA/T,EAAAA,cAAoBsC,GAAiB,CACnD7B,MAAOmE,GAAOoP,4BACd9P,MAAOnR,EAAAA,EAAKC,EAAE,oCACdyC,oBAAqBA,EACrBrB,WAAY7I,KAAKmJ,MAAMN,WACvB6O,iBAAkB1X,KAAK0X,iBACvBmT,iBAAkB3gB,EAAoBkgB,eACvB3V,EAAAA,cAAoB,MAAO,CAC1CS,MAAOmE,GAAOqP,iBACAjU,EAAAA,cAAoB8F,GAAAA,QAAY,CAC9C4D,KAAmB1J,EAAAA,cAAoBqW,GAAAA,EAAS,MAChDrQ,QAASA,IAAMza,KAAKyD,gBACpBkV,MAAOnR,EAAAA,EAAKC,EAAE,YACIgN,EAAAA,cAAoB,MAAO,CAC7CS,MAAOmE,GAAOsP,gBACAlU,EAAAA,cAAoByJ,GAAAA,QAAO,CACzChJ,MAAOmE,GAAOuP,qBACb1I,EAAS7b,KAAI,CAAC0F,EAASkH,IAAmBwD,EAAAA,cAAoBsW,GAAS,CACxE3U,IAAKrM,EAAQxK,GACbmJ,gBAAiB1I,KAAKgU,MAAMtL,gBAC5BqB,QAASA,EACTG,oBAAqBA,EACrBoW,aAAcA,EACdxd,YAAa9C,KAAKmJ,MAAMrG,YACxB+e,YAAa5Q,EAAI,IAAMiP,EAASzgB,OAChCmE,mBAAoBgH,GAAc5K,KAAKgU,MAAMpQ,mBAAmBsG,EAAoB3K,GAAIwK,EAAQxK,GAAIqL,EAAWrL,IAC/GoT,iBAAkB3S,KAAKgU,MAAMrB,iBAC7B6U,kBAAmBxnB,KAAKgU,MAAMwT,uBACb/S,EAAAA,cAAoB6U,GAAWS,GAAS,CAAC,EAAG/pB,KAAKgU,MAAO,CACzE9J,oBAAqBA,MAEzB,EAoBF,QAAeqL,EAAAA,EAAAA,KANSpM,IAAK,CAC3BrG,YAAaqG,EAAMuC,UAAU5I,YAC7BoF,oBAAqBiB,EAAMuC,UAAUxD,oBACrCQ,gBAAiBS,EAAMuC,UAAUhD,gBACjC8e,kBAAmBlnB,EAAoB6I,EAAMuC,UAAUnL,qBAEjB,CACtCkD,cvB6H2BqmB,IAC3B,IAAI,MACFloB,EAAK,WACLE,EAAU,kBACVD,EAAiB,oBACjBqI,EAAmB,YACnB5H,GACEwnB,EACJ,OAAOznB,UACL,IACE,MACE9C,GAAI4D,GACF+G,QACE2G,EAAkB,CACtBjP,QACAE,aACAD,oBACAsB,0BAEFwN,EAASF,GNhRuB,yBMgRsB,CACpDvG,oBAAqBA,EACrB5H,YAAaA,EACbC,KAAM,KAERoO,EAASD,GAA+BxG,GAC1C,CAAE,MAAOnC,GACP4I,EAASF,GNtRqB,uBMsRsB,CAClD1I,UAEJ,EACD,EuB1JDnE,mBvBoLgCA,CAACT,EAAuBU,EAAWC,IAAiB6M,IACpFE,EAAuB1N,EAAuBU,EAAWC,GACzD6M,EAASF,GN9SgC,+BM8SkB,EuBrL3DkC,iBAAgB,GAChBP,iCACF,IALA,CAKG+X,ICjLH,SAASJ,KAAa,OAAOA,GAAWzW,OAAO0W,OAAS1W,OAAO0W,OAAO5S,OAAS,SAAU6S,GAAK,IAAK,IAAIpX,EAAI,EAAGA,EAAI3S,UAAUT,OAAQoT,IAAK,CAAE,IAAIpL,EAAIvH,UAAU2S,GAAI,IAAK,IAAIrB,KAAK/J,GAAG,CAAG,GAAEyiB,eAAelX,KAAKvL,EAAG+J,KAAOyY,EAAEzY,GAAK/J,EAAE+J,GAAK,CAAE,OAAOyY,CAAG,EAAGF,GAAS1pB,MAAM,KAAMH,UAAY,CACnR,SAAS0S,GAAgBC,EAAGrB,EAAG/J,GAAK,OAAQ+J,EAC5C,SAAwB/J,GAAK,IAAIwJ,EACjC,SAAsBxJ,EAAG+J,GAAK,GAAI,iBAAmB/J,IAAMA,EAAG,OAAOA,EAAG,IAAIoL,EAAIpL,EAAEqL,OAAOC,aAAc,QAAI,IAAWF,EAAG,CAAE,IAAI5B,EAAI4B,EAAEG,KAAKvL,EAAG+J,GAAK,WAAY,GAAI,iBAAmBP,EAAG,OAAOA,EAAG,MAAM,IAAIgC,UAAU,+CAAiD,CAAE,OAAQ,WAAazB,EAAI0B,OAASC,QAAQ1L,EAAI,CADlR2L,CAAa3L,EAAG,UAAW,MAAO,iBAAmBwJ,EAAIA,EAAIA,EAAI,EAAI,CAD1DoC,CAAe7B,MAAOqB,EAAIS,OAAOC,eAAeV,EAAGrB,EAAG,CAAEpO,MAAOqE,EAAG+L,YAAY,EAAIC,cAAc,EAAIC,UAAU,IAAQb,EAAErB,GAAK/J,EAAGoL,CAAG,CAoBnL,MAAMmY,GAAmB,CAAC,SAAU,qBAC9BC,GAAoB,IACpBC,GAAuB,IAE7B,MAAMC,WAAwBrX,EAAAA,UAC5BC,WAAAA,CAAYC,GACVC,MAAMD,GACNpB,GAAgB5S,KAAM,kBAAkBqlB,KAEjCA,GAAerlB,KAAKorB,aACvBC,cAAcrrB,KAAKorB,YACnBprB,KAAKorB,WAAa,MAEhB/F,IACFrlB,KAAKorB,WAAaE,YAAYtrB,KAAKurB,KAAML,KAE3ClrB,KAAKmU,SAAS,CACZkR,cACAF,aAAc8F,IACd,IAEJrY,GAAgB5S,KAAM,QAAQ,KACJA,KAAKmJ,MAAMgc,aAAe+F,IAAwB,GAExElrB,KAAKwrB,UACLxrB,KAAKmU,SAAS,CACZgR,aAAc8F,MAGhBjrB,KAAKmU,UAASI,IAAS,CACrB4Q,aAAc5Q,EAAU4Q,aAAe+F,MAE3C,IAEFtY,GAAgB5S,KAAM,WAAW,KAC/BA,KAAKgU,MAAM/L,aAAa5D,KAAI/B,GAAetC,KAAKgU,MAAMlD,yBAAyBxO,EAAatC,KAAKgU,MAAM9L,uBACnGlI,KAAKgU,MAAM5L,6BACbpI,KAAKgU,MAAMtD,+BAA+B1Q,KAAKgU,MAAM5L,4BACvD,IAEFwK,GAAgB5S,KAAM,kBAAkB,KACtCA,KAAKmU,SAAS,CACZ8J,UAAWje,KAAKmJ,MAAM8U,UACtB,IAEJje,KAAKorB,WAAa,KAClBprB,KAAKmJ,MAAQ,CACXkc,aAAa,EACblL,cAAc,EACdgL,aAAc8F,GACdhN,UAAU,EAEd,CACA2I,iBAAAA,GACE,MAAM1e,EAAsBlI,KAAKgU,MAAMgR,MAAMpkB,OAAO0B,YAC9CmpB,EAAazrB,KAAKgU,MAAMgR,MAAMpkB,OAAOiD,UAC3C,GAAI4nB,GAAcA,IAAevjB,GAAsC,WAAfujB,EAAyB,CAC/E,MAAMC,EAA6B,CACjCnsB,GAAIksB,GAENzrB,KAAKgU,MAAMtD,+BAA+Bgb,EAC5C,C/B2HsCrpB,WACxC,MACEspB,eAAe,mBACbC,UAEM3pB,EAAOR,MAAM,CACrBkqB,cAAe,CACbhrB,SAAU,mBAUd,MAAO,CACLgK,WARiB7H,EAAYkF,YAAY6jB,SAAS,QAAU/oB,EAAYhB,WAAWgqB,MAAKxZ,IACxF,IAAI,GACF/S,GACE+S,EACJ,OAAO/S,IAAOqsB,EAAmBrsB,EAAE,IAKnC8B,qBAH2BuqB,EAAmBrsB,GAI/C,E+B9ICsR,CAA+B7Q,KAAKgU,MAAMlR,aAAaqO,MAAKP,GAAU5Q,KAAKgU,MAAM+X,8BAA8Bnb,KAC/G5Q,KAAKgU,MAAM/L,aAAa5D,KAAI/B,GAAetC,KAAKgU,MAAMlD,yBAAyBxO,EAAa4F,KAC5FlI,KAAKgU,MAAMgY,oBACb,CACA3X,kBAAAA,GACE,MAAMnM,EAAsBlI,KAAKgU,MAAMgR,MAAMpkB,OAAO0B,YAC9CmpB,EAAazrB,KAAKgU,MAAMgR,MAAMpkB,OAAOiD,UAC3C,IAAK7D,KAAKgU,MAAM3L,oCAAsCojB,GAAcvjB,IAAwBujB,GAA6B,WAAfA,SAAuEtjB,IAA3CnI,KAAKgU,MAAM5L,6BAA6CqjB,IAAezrB,KAAKgU,MAAM5L,4BAA4B7I,IAAK,CACvP,MAAMmsB,EAA6B,CACjCnsB,GAAIksB,GAENzrB,KAAKgU,MAAMtD,+BAA+Bgb,EAC5C,CACIxjB,IAAwBujB,GAAcvjB,IAAwBlI,KAAKgU,MAAM9L,oBAAoB3I,IAC/FS,KAAKgU,MAAMlK,uBAAuB5B,GAE/BA,IAAwBujB,GAA6B,WAAfA,QAAuEtjB,IAA3CnI,KAAKgU,MAAM5L,6BAChFpI,KAAKgU,MAAM5B,kCAEf,CACAwX,oBAAAA,GACM5pB,KAAKorB,YACPC,cAAcrrB,KAAKorB,WAEvB,CACA5W,MAAAA,GACE,MAAMjV,EAAKS,KAAKgU,MAAMgR,MAAMpkB,OAAOiD,UAC7B2X,IAA0Bxb,KAAKgU,MAAM9L,wBAAyB8iB,GAAiBnH,QAAQ7jB,KAAKgU,MAAM9L,oBAAoB3I,IAAM,IAAeS,KAAKgU,MAAMvL,2BAC5J,OAAoBgM,EAAAA,cAAoB,MAAO,CAC7CiR,UAAW,oBACGjR,EAAAA,cAAoBoJ,GAASkM,GAAS,CAAC,EAAG/pB,KAAKgU,MAAO,CACpEzU,GAAIA,EACJ0e,SAAUje,KAAKmJ,MAAM8U,SACrBzC,uBAAwBA,EACxB8D,eAAgBtf,KAAKsf,kBACL7K,EAAAA,cAAoB,MAAO,CAC3CiR,UAAW,kCACGjR,EAAAA,cAAoBsQ,GAAagF,GAAS,CAAC,EAAG/pB,KAAKgU,MAAO,CACxEiY,WAAYjsB,KAAKmJ,MAAM8iB,WACvBhkB,aAAcjI,KAAKgU,MAAM/L,aACzBod,YAAarlB,KAAKmJ,MAAMkc,YACxBF,aAAcnlB,KAAKmJ,MAAMgc,aACzBI,eAAgBvlB,KAAKulB,uBACyBpd,IAA3CnI,KAAKgU,MAAM5L,+BAA+CpI,KAAKmJ,MAAM8U,UAAmB,WAAP1e,IAAiCkV,EAAAA,cAAoBqO,GAAyB,CAClK7E,SAAUje,KAAKmJ,MAAM8U,SACrBzC,uBAAwBA,GAA0Bxb,KAAKmJ,MAAM8U,WACpD,WAAP1e,GAAgCkV,EAAAA,cAAoB8R,GAAewD,GAAS,CAAC,EAAG/pB,KAAKgU,MAAO,CAC9FiK,SAAUje,KAAKmJ,MAAM8U,iBACyB9V,IAA3CnI,KAAKgU,MAAM5L,8BAA8CpI,KAAKmJ,MAAM8U,UAAyBxJ,EAAAA,cAAoBqO,GAAyB,CAC7I7E,SAAUje,KAAKmJ,MAAM8U,SACrBzC,uBAAwBA,GAA0Bxb,KAAKmJ,MAAM8U,WAC3Dje,KAAKgU,MAAM5L,6BAAsC,WAAP7I,OAA6D4I,IAA3CnI,KAAKgU,MAAM5L,6BAA0DqM,EAAAA,cAAoB0V,GAAqBJ,GAAS,CAAC,EAAG/pB,KAAKgU,MAAO,CACrM9J,oBAAqBlK,KAAKgU,MAAM5L,4BAChC6V,SAAUje,KAAKmJ,MAAM8U,SACrBiO,aAAa,EACb1Q,uBAAwBA,MACnBxb,KAAKmJ,MAAM8U,UAAmB,WAAP1e,GAAgCkV,EAAAA,cAAoB,MAAO,CACvFiR,UAAW,yCACGjR,EAAAA,cAAoB8H,GAAAA,QAAW,CAC7CrH,MAAOc,IACNxO,EAAAA,EAAKC,EAAE,qBAAmCgN,EAAAA,cAAoB0X,GAAAA,EAAU,CACzEjX,MAAO,CACLD,MAAOrB,GAAM7H,QAAQI,cACrBoN,MAAO,IACPxD,OAAQ,SAGd,EAqCF,QAAexK,EAAAA,GAAAA,KAAQgK,EAAAA,EAAAA,KApBCpM,IAAK,CAC3BrG,YAAaqG,EAAMuC,UAAU5I,YAC7BiG,aAAcI,EAAMuC,UAAU3C,aAC9Bd,aAAckB,EAAMuC,UAAUzD,aAC9BhF,qBAAsBkG,EAAMuC,UAAUzI,qBACtCT,cAAe2G,EAAMuC,UAAUlJ,cAC/B+F,aAAcY,EAAMuC,UAAUnD,aAC9BC,eAAgBW,EAAMuC,UAAUlD,eAChC7F,mBAAoBwG,EAAMuC,UAAU/I,mBACpCC,wBAAyBuG,EAAMuC,UAAU9I,wBACzCC,aAAcsG,EAAMuC,UAAU7I,aAC9BqF,oBAAqBiB,EAAMuC,UAAUxD,oBACrCE,4BAA6Be,EAAMuC,UAAUtD,4BAC7CC,mCAAoCc,EAAMuC,UAAUrD,mCACpDC,WAAYa,EAAMuC,UAAUpD,WAC5ByU,eAAgB5T,EAAMuC,UAAUpD,WAAW7I,OAAS,EACpDkI,OAAQwB,EAAMuC,UAAU/D,OACxBc,2BAA4BU,EAAMuC,UAAUjD,2BAC5CK,YAAaK,EAAMuC,UAAU5C,eAEiB,CAC9CgI,yBAAwB,GACxBib,8BxByN2CtjB,GAA8BgI,GAAalH,EAAyC,CAC/Hd,+BwBzNA0J,gBAAe,GACfzB,+BAA8B,GAC9B5G,uBAAsB,GACtBsI,iCAAgC,GAChCI,kBAAiB,GACjBD,UAAS,GACTyZ,mBxBzKgCA,IAAM3pB,UACtC,IACE,MAAM+pB,OPsDmB/pB,WAC3B,MAAM,WACJgqB,SACQpqB,EAAOR,MAAM,CACrB4qB,WAAY,CACV1rB,SAAU,iBAGd,OAAO0rB,EAAWD,UAAU,EO9DDvb,GACnBnI,EAAkBiZ,OAASa,KAAKb,KAAOyK,IAxB7B,IAyBhBzb,EAASF,GAAalH,GAAuCb,GAC/D,CAAE,MAAOX,GACP4I,EAASF,GNK8B,8BMLoB,CACzD1I,UAEJ,GwBiKA0K,iBACF,IAAG,KAAM,CACP+C,MAAM,IAZR,CAaI2V,ICvLJ,OAZemB,IAAmB7X,EAAAA,cAAoB8X,GAAAA,GAAQ,CAC5D1R,QAASA,IACKpG,EAAAA,cAAoB,MAAO,KAAmBA,EAAAA,cAAoB+X,GAAAA,GAAO,CACvFC,OAAO,EACPC,KAAM,IACNC,UAAWA,IAAmBlY,EAAAA,cAAoBmY,GAAAA,GAAU,CAC1DC,GAAI,eAESpY,EAAAA,cAAoB+X,GAAAA,GAAO,CAC1CE,KAAM,0CACNC,UAAWxB,OCgCb,QAAe5V,EAAAA,EAAAA,KAAQpM,IAAK,CAC1BrG,YAAaqG,EAAMuC,UAAU5I,eAC3B,CACFgqB,e1BlC4BA,IAAMzqB,UAClCsO,EAASF,GAAalH,IACtB,IACE,MAAM,YACJzG,SPR8Bb,EAAOR,MAAM,CAC/CqB,YAAa,CACXnC,SAAU,KACVC,OAAQ,CACNC,OAAQ,CAAC,KAAM,cAAe,sBOMhC8P,EAASF,GAAalH,EAAkCzG,GAC1D,CAAE,MACA6N,EAASF,GAAalH,EAAgC,+BACxD,G0B0BAwjB,oB1BsWiCC,GAAWvc,GAAalH,GAAgCyjB,I0B1W3F,EApCYzrB,IACV,IAAI,YACFuB,EAAW,eACXgqB,EAAc,oBACdC,GACExrB,EACJ,MAAM,QACJqG,EAAO,MACPG,GACEjF,GACE,cACJmqB,IACEC,EAAAA,EAAAA,MAKJ,OAJAC,EAAAA,EAAAA,YAAU,KACRJ,EAAoBE,EAAcG,OAClCN,GAAgB,GACf,IACCllB,EACkB6M,EAAAA,cAAoB,MAAO,CAC7CiR,UAAW2H,IACG5Y,EAAAA,cAAoBuP,GAAAA,EAAkB,CACpDhZ,KAAM,MAGNjD,EACkB0M,EAAAA,cAAoB,MAAO,CAC7CiR,UAAW4H,KAAGD,GAAgBA,KAC7BtlB,GAEe0M,EAAAA,cAAoB,MAAO,KAAmBA,EAAAA,cAAoBZ,GAAgB,MAAoBY,EAAAA,cAAoB6X,GAAQ,MAAM,I,SCrB9J,OATmBiB,KACjB,MAAMtrB,GAASurB,EAAAA,EAAAA,MAEf,OADAtrB,EAAUD,GACUwS,EAAAA,cAAoBmC,EAAAA,GAAU,CAChDC,MAAOA,IACOpC,EAAAA,cAAoBgZ,EAAAA,EAAkB,CACpDC,SAAU9Z,IACIa,EAAAA,cAAoBkZ,GAAK,OAAO,C","sources":["D2App/constants/development.js","D2App/utils/helpers.js","D2App/utils/createRecipientSearchQuery.js","D2App/api/api.js","D2App/constants/actions.js","D2App/constants/messageTypes.js","D2App/reducers/messageReducer.js","D2App/store.js","D2App/styles/theme.js","D2App/locales/index.js","D2App/actions/index.js","D2App/components/Common/CustomSnackBar.js","webpack://@dhis2/app-shell/./src/D2App/components/App/App.module.css?0760","D2App/utils/history.js","D2App/styles/style.js","D2App/constants/extendedChoices.js","D2App/components/Common/DialogWithReduxState.js","D2App/components/Common/SuggestionField.js","D2App/components/Common/AssignToDialog.js","D2App/components/Common/ToolbarExtendedChoicePicker.js","D2App/components/Common/Toolbar.js","D2App/components/List/ListItemHeader.js","D2App/components/Common/ExtendedChoiceLabel.js","D2App/components/List/MessageConversationListItem.js","D2App/components/List/MessageConversationList.js","D2App/components/List/MessageTypeItem.js","D2App/components/List/SidebarList.js","D2App/components/Attachments/Attachments.js","D2App/components/Attachments/AttachmentUploadButton.js","D2App/components/MessageConversation/CreateMessage.js","D2App/styles/messageConversationStyles.js","D2App/components/MessageConversation/Message.js","D2App/components/MessageConversation/ReplyCard.js","D2App/components/MessageConversation/MessageConversation.js","D2App/components/MessagingCenter/MessagingCenter.js","D2App/components/App/Routes.js","D2App/components/App/App.js","D2App/components/App/AppWrapper.js"],"sourcesContent":["export const pageSize = 35;\nexport const fontFamily = 'Roboto, Helvetica, Arial, sans-serif';\nexport const NEUTRAL = 'NEUTRAL';\nexport const POSITIVE = 'POSITIVE';\nexport const NEGATIVE = 'NEGATIVE';","export function dedupeById(list) {\n  if (!Array.isArray(list)) {\n    return undefined;\n  }\n  const lookup = new Set();\n  return list.filter(item => {\n    if (lookup.has(item.id)) {\n      return false;\n    }\n    lookup.add(item.id);\n    return true;\n  });\n}\nexport function findIndexOfId(list, id) {\n  const len = list.length;\n  for (let index = 0; index < len; index++) {\n    if (list[index].id === id) {\n      return index;\n    }\n  }\n  return undefined;\n}\nexport function debounce(fn, delay) {\n  let timer = null;\n  return function () {\n    const context = this;\n    const args = arguments;\n    clearTimeout(timer);\n    timer = setTimeout(function () {\n      fn.apply(context, args);\n    }, delay);\n  };\n}\nexport function supportsAttachments(dhis2CoreVersion) {\n  return dhis2CoreVersion > 30;\n}\nexport function supportsUserLookupEndPoint(dhis2CoreVersion) {\n  return dhis2CoreVersion > 34;\n}","import { supportsUserLookupEndPoint } from './helpers.js';\nconst MAX_RECIPIENT = 10;\nfunction createUserQuery(_ref) {\n  let {\n    searchValue,\n    searchOnlyFeedbackRecipients,\n    feedbackRecipientsId,\n    dhis2CoreVersion\n  } = _ref;\n  if (supportsUserLookupEndPoint(dhis2CoreVersion)) {\n    // version >= v2.35\n    return {\n      resource: searchOnlyFeedbackRecipients ? 'userLookup/feedbackRecipients' : 'userLookup',\n      params: {\n        query: searchValue\n      }\n    };\n  } else {\n    // version < 2.35\n    const filter = [`displayName:token:${searchValue}`];\n    if (searchOnlyFeedbackRecipients) {\n      filter.push(`userGroups.id:eq:${feedbackRecipientsId}`);\n    }\n    return {\n      resource: 'users',\n      params: {\n        filter,\n        pageSize: MAX_RECIPIENT\n      }\n    };\n  }\n}\nfunction createOrganisationUnitQuery(searchValue) {\n  return {\n    resource: 'organisationUnits',\n    params: {\n      fields: ['id', 'displayName'],\n      pageSize: MAX_RECIPIENT,\n      filter: [`displayName:token:${searchValue}`, 'users:gte:1']\n    }\n  };\n}\nfunction createUserGroupQuery(searchValue) {\n  return {\n    resource: 'userGroups',\n    params: {\n      fields: 'id, displayName',\n      pageSize: MAX_RECIPIENT,\n      filter: [`displayName:token:${searchValue}`]\n    }\n  };\n}\nexport default function createRecipientSearchQuery(_ref2) {\n  let {\n    searchValue,\n    searchOnlyUsers,\n    searchOnlyFeedbackRecipients,\n    feedbackRecipientsId,\n    dhis2CoreVersion\n  } = _ref2;\n  const userQuery = createUserQuery({\n    searchValue,\n    searchOnlyFeedbackRecipients,\n    feedbackRecipientsId,\n    dhis2CoreVersion\n  });\n  return searchOnlyUsers ? {\n    users: userQuery\n  } : {\n    users: userQuery,\n    organisationUnits: createOrganisationUnitQuery(searchValue),\n    userGroups: createUserGroupQuery(searchValue)\n  };\n}","import { pageSize } from '../constants/development.js';\nimport createRecipientSearchQuery from '../utils/createRecipientSearchQuery.js';\nconst initialMessageConversationFields = ['id', 'displayName', 'subject', 'messageType', 'lastSender[id, displayName]', 'assignee[id, displayName]', 'status', 'priority', 'lastUpdated', 'read', 'lastMessage', 'followUp'];\nconst messageConversationFields = ['*', 'assignee[id, displayName]', 'messages[*,sender[id,displayName]', 'attachments[id, name, contentLength]]', 'userMessages[user[id, displayName]]'];\nconst order = 'lastMessage:desc';\n\n// The rest of the code in this module will expect that\n// engine has been set and can use it safely\nlet engine = null;\nexport const setEngine = engineInstance => {\n  engine = engineInstance;\n};\nexport const getCurrentUser = () => engine.query({\n  currentUser: {\n    resource: 'me',\n    params: {\n      fields: ['id', 'authorities', 'userGroups[id]']\n    }\n  }\n});\nexport const getMessageConversations = async _ref => {\n  let {\n    messageType,\n    page,\n    messageFilter,\n    status,\n    priority,\n    assignedToMeFilter,\n    markedForFollowUpFilter,\n    unreadFilter,\n    currentUser\n  } = _ref;\n  const filter = [`messageType:eq:${messageType}`];\n  if (status) {\n    filter.push(`status:eq:${status}`);\n  }\n  if (priority) {\n    filter.push(`priority:eq:${priority}`);\n  }\n  if (markedForFollowUpFilter) {\n    filter.push('followUp:eq:true');\n  }\n  if (unreadFilter) {\n    filter.push('read:eq:false');\n  }\n  if (assignedToMeFilter) {\n    filter.push(`assignee.id:eq:${currentUser.id}`);\n  }\n  const query = {\n    resource: 'messageConversations',\n    params: {\n      filter,\n      pageSize,\n      page,\n      fields: initialMessageConversationFields,\n      order,\n      queryString: messageFilter\n    }\n  };\n  const {\n    messageConversations\n  } = await engine.query({\n    messageConversations: query\n  });\n  return messageConversations;\n};\nexport const getMessageConversation = async _ref2 => {\n  let {\n    id\n  } = _ref2;\n  const {\n    messageConversation\n  } = await engine.query({\n    messageConversation: {\n      resource: 'messageConversations',\n      id,\n      params: {\n        fields: messageConversationFields\n      }\n    }\n  });\n  return messageConversation;\n};\nexport const getServerDate = async () => {\n  const {\n    systemInfo\n  } = await engine.query({\n    systemInfo: {\n      resource: 'system/info'\n    }\n  });\n  return systemInfo.serverDate;\n};\nexport const updateMessageConversationStatus = (messageConversationId, value) => engine.mutate({\n  resource: `messageConversations/${messageConversationId}/status`,\n  type: 'create',\n  params: {\n    messageConversationStatus: value\n  }\n});\nexport const updateMessageConversationPriority = (messageConversationId, value) => engine.mutate({\n  resource: `messageConversations/${messageConversationId}/priority`,\n  type: 'create',\n  params: {\n    messageConversationPriority: value\n  }\n});\nexport const updateMessageConversationAssignee = async (messageConversationId, value) => {\n  const mutation = value ? {\n    resource: `messageConversations/${messageConversationId}/assign`,\n    type: 'create',\n    params: {\n      userId: value\n    }\n  } : {\n    resource: `messageConversations`,\n    id: `${messageConversationId}/assign`,\n    type: 'delete'\n  };\n  return await engine.mutate(mutation);\n};\nexport const updateMessageConversationFollowup = (messageConversationIds, value) => engine.mutate({\n  resource: `messageConversations/${value ? 'followup' : 'unfollowup'}`,\n  type: 'create',\n  data: messageConversationIds\n});\nexport const getNrOfUnread = async messageType => {\n  const {\n    messageConversations\n  } = await engine.query({\n    messageConversations: {\n      resource: 'messageConversations',\n      params: {\n        fields: ['read'],\n        filter: ['read:eq:false', `messageType:eq:${messageType}`],\n        pageSize: 1\n      }\n    }\n  });\n  return messageConversations.pager.total;\n};\nexport const sendMessage = _ref3 => {\n  let {\n    subject,\n    users,\n    userGroups,\n    organisationUnits,\n    text,\n    attachments\n  } = _ref3;\n  return engine.mutate({\n    resource: 'messageConversations',\n    type: 'create',\n    data: {\n      subject,\n      users,\n      userGroups,\n      organisationUnits,\n      text,\n      attachments\n    }\n  });\n};\nexport const sendFeedbackMessage = (subject, text) => engine.mutate({\n  resource: 'messageConversations/feedback',\n  type: 'create',\n  params: {\n    subject\n  },\n  data: text\n});\nexport const replyMessage = async _ref4 => {\n  let {\n    message,\n    internalReply,\n    attachments,\n    id\n  } = _ref4;\n  const params = {\n    internal: internalReply\n  };\n  if (attachments.length > 0) {\n    params.attachments = attachments;\n  }\n  return await engine.mutate({\n    resource: `messageConversations/${id}`,\n    type: 'create',\n    params,\n    data: message\n  });\n};\nexport const deleteMessageConversation = (messageConversationId, currentUserId) => engine.mutate({\n  resource: `messageConversations/${messageConversationId}/${currentUserId}`,\n  type: 'delete'\n});\nexport const markRead = markedReadConversations => engine.mutate({\n  resource: 'messageConversations/read',\n  type: 'create',\n  data: markedReadConversations\n});\nexport const markUnread = markedUnreadConversations => engine.mutate({\n  resource: 'messageConversations/unread',\n  type: 'create',\n  data: markedUnreadConversations\n});\nexport const isInFeedbackRecipientGroup = async currentUser => {\n  const {\n    configuration: {\n      feedbackRecipients\n    }\n  } = await engine.query({\n    configuration: {\n      resource: 'configuration'\n    }\n  });\n  const authorized = currentUser.authorities.includes('ALL') || currentUser.userGroups.some(_ref5 => {\n    let {\n      id\n    } = _ref5;\n    return id === feedbackRecipients.id;\n  });\n  const feedbackRecipientsId = feedbackRecipients.id;\n  return {\n    authorized,\n    feedbackRecipientsId\n  };\n};\nexport const searchRecipients = async _ref6 => {\n  var _results$users, _results$organisation, _results$userGroups;\n  let {\n    searchValue,\n    searchOnlyUsers,\n    searchOnlyFeedbackRecipients,\n    feedbackRecipientsId,\n    dhis2CoreVersion\n  } = _ref6;\n  const query = createRecipientSearchQuery({\n    searchValue,\n    searchOnlyUsers,\n    searchOnlyFeedbackRecipients,\n    feedbackRecipientsId,\n    dhis2CoreVersion\n  });\n  const results = await engine.query(query);\n  return {\n    users: (_results$users = results.users) === null || _results$users === void 0 ? void 0 : _results$users.users,\n    organisationUnits: results === null || results === void 0 ? void 0 : (_results$organisation = results.organisationUnits) === null || _results$organisation === void 0 ? void 0 : _results$organisation.organisationUnits,\n    userGroups: results === null || results === void 0 ? void 0 : (_results$userGroups = results.userGroups) === null || _results$userGroups === void 0 ? void 0 : _results$userGroups.userGroups\n  };\n};\nexport const addRecipients = _ref7 => {\n  let {\n    users,\n    userGroups,\n    organisationUnits,\n    messageConversationId\n  } = _ref7;\n  return engine.mutate({\n    resource: `messageConversations/${messageConversationId}/recipients`,\n    type: 'create',\n    data: {\n      users,\n      userGroups,\n      organisationUnits\n    }\n  });\n};\nexport const getUserById = async id => {\n  const {\n    user\n  } = await engine.query({\n    user: {\n      resource: 'users',\n      id,\n      params: {\n        fields: 'id,displayName'\n      }\n    }\n  });\n  return {\n    ...user,\n    type: 'user'\n  };\n};\nexport const addAttachment = attachment => engine.mutate({\n  resource: 'fileResources',\n  type: 'create',\n  params: {\n    domain: 'MESSAGE_ATTACHMENT'\n  },\n  data: {\n    file: attachment\n  }\n});\nconst joinPath = function () {\n  for (var _len = arguments.length, parts = new Array(_len), _key = 0; _key < _len; _key++) {\n    parts[_key] = arguments[_key];\n  }\n  const realParts = parts.filter(part => !!part);\n  return realParts.map(part => part.replace(/^\\/+|\\/+$/g, '')).join('/');\n};\nexport const downloadAttachment = (messageConversationId, messageId, attachmentId) => {\n  const filePath = joinPath(engine.link.baseUrl, engine.link.apiPath, 'messageConversations', messageConversationId, messageId, 'attachments', attachmentId);\n  const link = document.createElement('a');\n  link.href = filePath;\n  link.download = filePath.split('/').pop();\n  link.target = '_blank';\n  document.body.appendChild(link);\n  link.click();\n  document.body.removeChild(link);\n};","export const SET_CURRENT_USER = 'SET_CURRENT_USER';\nexport const SET_CURRENT_USER_SUCCESS = 'SET_CURRENT_USER_SUCCESS';\nexport const SET_CURRENT_USER_ERROR = 'SET_CURRENT_USER_ERROR';\nexport const LOAD_MESSAGE_CONVERSATIONS = 'LOAD_MESSAGE_CONVERSATIONS';\nexport const LOAD_MORE_MESSAGE_CONVERSATIONS = 'LOAD_MORE_MESSAGE_CONVERSATIONS';\nexport const MESSAGE_CONVERSATIONS_LOAD_SUCCESS = 'MESSAGE_CONVERSATIONS_LOAD_SUCCESS';\nexport const MESSAGE_CONVERSATIONS_LOAD_ERROR = 'MESSAGE_CONVERSATIONS_LOAD_ERROR';\nexport const DELETE_MESSAGE_CONVERSATIONS = 'DELETE_MESSAGE_CONVERSATIONS';\nexport const MESSAGE_CONVERSATIONS_DELETE_SUCCESS = 'MESSAGE_CONVERSATIONS_DELETE_SUCCESS';\nexport const MESSAGE_CONVERSATIONS_DELETE_ERROR = 'MESSAGE_CONVERSATIONS_DELETE_ERROR';\nexport const UPDATE_MESSAGE_CONVERSATIONS = 'UPDATE_MESSAGE_CONVERSATIONS';\nexport const MESSAGE_CONVERSATION_UPDATE_SUCCESS = 'MESSAGE_CONVERSATION_UPDATE_SUCCESS';\nexport const MESSAGE_CONVERSATION_UPDATE_ERROR = 'MESSAGE_CONVERSATION_UPDATE_ERROR';\nexport const MARK_MESSAGE_CONVERSATIONS = 'MARK_MESSAGE_CONVERSATIONS';\nexport const MARK_MESSAGE_CONVERSATIONS_SUCCESS = 'MARK_MESSAGE_CONVERSATIONS_SUCCESS';\nexport const MARK_MESSAGE_CONVERSATIONS_ERROR = 'MARK_MESSAGE_CONVERSATIONS_ERROR';\nexport const SEND_MESSAGE = 'SEND_MESSAGE';\nexport const SEND_MESSAGE_SUCCESS = 'SEND_MESSAGE_SUCCESS';\nexport const SEND_MESSAGE_ERROR = 'SEND_MESSAGE_ERROR';\nexport const SEND_FEEDBACK_MESSAGE = 'SEND_FEEDBACK_MESSAGE';\nexport const REPLY_MESSAGE = 'REPLY_MESSAGE';\nexport const REPLY_MESSAGE_SUCCESS = 'REPLY_MESSAGE_SUCCESS';\nexport const REPLY_MESSAGE_ERROR = 'REPLY_MESSAGE_ERROR';\nexport const SET_FILTER = 'SET_FILTER';\nexport const DISPLAY_SNACK_MESSAGE = 'DISPLAY_SNACK_MESSAGE;';\nexport const CLEAR_SNACK_MESSAGE = 'CLEAR_SNACK_MESSAGE';\nexport const SET_CHECKED = 'SET_CHECKED';\nexport const SET_ALL_CHECKED = 'SET_ALL_CHECKED';\nexport const CLEAR_CHECKED = 'CLEAR_CHECKED';\nexport const SET_SELECTED_MESSAGE_TYPE = 'SET_SELECTED_MESSAGE_TYPE';\nexport const CLEAR_SELECTED_MESSAGE_CONVERSATION = 'CLEAR_SELECTED_MESSAGE_CONVERSATION';\nexport const SET_SELECTED_MESSAGE_CONVERSATION = 'SET_SELECTED_MESSAGE_CONVERSATION';\nexport const SET_SELECTED_MESSAGE_CONVERSATION_SUCCESS = 'SET_SELECTED_MESSAGE_CONVERSATION_SUCCESS';\nexport const SET_SELECTED_MESSAGE_CONVERSATION_ERROR = 'SET_SELECTED_MESSAGE_CONVERSATION_ERROR';\nexport const UPDATE_INPUT_FIELDS = 'UPDATE_INPUT_FIELDS';\nexport const SET_IN_FEEDBACK_RECIPIENT_GROUP = 'SET_IN_FEEDBACK_RECIPIENT_GROUP';\nexport const SET_DISPLAY_TIME_DIFF = 'SET_DISPLAY_TIME_DIFF';\nexport const SET_DISPLAY_TIME_DIFF_SUCCESS = 'SET_DISPLAY_TIME_DIFF_SUCCESS';\nexport const SET_DISPLAY_TIME_DIFF_ERROR = 'SET_DISPLAY_TIME_DIFF_ERROR';\n\n/* Recipient actions */\nexport const RECIPIENT_SEARCH = 'RECIPIENT_SEARCH';\nexport const RECIPIENT_SEARCH_SUCCESS = 'RECIPIENT_SEARCH_SUCCESS';\nexport const RECIPIENT_SEARCH_ERROR = 'RECIPIENT_SEARCH_ERROR';\nexport const ADD_RECIPIENTS = 'ADD_RECIPIENTS';\nexport const ADD_RECIPIENTS_SUCCESS = 'ADD_RECIPIENTS_SUCCESS';\nexport const ADD_RECIPIENTS_ERROR = 'ADD_RECIPIENTS_ERROR';\nexport const ADD_RECIPIENT_BY_ID_SUCCESS = 'ADD_RECIPIENT_BY_ID_SUCCESS';\n\n/* Attachments */\nexport const ADD_ATTACHMENT = 'ADD_ATTACHMENT';\nexport const ADD_ATTACHMENT_SUCCESS = 'ADD_ATTACHMENT_SUCCESS';\nexport const ADD_ATTACHMENT_ERROR = 'ADD_ATTACHMENT_ERROR';\nexport const DOWNLOAD_ATTACHMENT = 'DOWNLOAD_ATTACHMENT';\nexport const DOWNLOAD_ATTACHMENT_SUCCESS = 'DOWNLOAD_ATTACHMENT_SUCCESS';\nexport const DOWNLOAD_ATTACHMENT_ERROR = 'DOWNLOAD_ATTACHMENT_ERROR';\nexport const REMOVE_ATTACHMENT = 'REMOVE_ATTACHMENT';\nexport const CLEAR_ATTACHMENTS = 'CLEAR_ATTACHMENTS';\nexport const CANCEL_ATTACHMENT = 'CANCEL_ATTACHMENT';\n\n/* DHIS2 CORE VERSION */\nexport const SET_DHIS2_CORE_VERSION = 'SET_DHIS2_CORE_VERSION';","import i18n from '@dhis2/d2-i18n';\nconst messageTypes = [{\n  id: 'PRIVATE',\n  displayName: i18n.t('Inbox'),\n  unread: 0,\n  loaded: 0,\n  loading: false,\n  total: 0,\n  page: 1\n}, {\n  id: 'VALIDATION_RESULT',\n  displayName: i18n.t('Validation'),\n  unread: 0,\n  loaded: 0,\n  loading: false,\n  total: 0,\n  page: 1\n}, {\n  id: 'TICKET',\n  displayName: i18n.t('Ticket'),\n  unread: 0,\n  loaded: 0,\n  loading: false,\n  total: 0,\n  page: 1\n}, {\n  id: 'SYSTEM',\n  displayName: i18n.t('System'),\n  unread: 0,\n  loaded: 0,\n  loading: false,\n  total: 0,\n  page: 1\n}];\nexport default messageTypes;","import i18n from '@dhis2/d2-i18n';\nimport log from 'loglevel';\nimport * as actions from '../constants/actions.js';\nimport { POSITIVE, NEGATIVE, NEUTRAL } from '../constants/development.js';\nimport messageTypes from '../constants/messageTypes.js';\nimport { findIndexOfId } from '../utils/helpers.js';\nexport const initialState = {\n  currentUser: {\n    loading: true,\n    error: null,\n    id: null,\n    authorities: null,\n    userGroups: null\n  },\n  // Message conversation\n  messageConversations: {},\n  messageTypes,\n  selectedMessageType: undefined,\n  selectedMessageConversation: undefined,\n  settingSelectedMessageConversation: false,\n  checkedIds: [],\n  messageFilter: undefined,\n  statusFilter: undefined,\n  priorityFilter: undefined,\n  assignedToMeFilter: false,\n  markedForFollowUpFilter: false,\n  unreadFilter: false,\n  isInFeedbackRecipientGroup: false,\n  feedbackRecipientsId: undefined,\n  displayTimeDiff: 0,\n  // Input for create and reply\n  subject: '',\n  input: '',\n  recipients: [],\n  // Attachments\n  attachments: [],\n  // Snackbar\n  snackMessage: '',\n  onSnackActionClick: undefined,\n  onSnackRequestClose: undefined,\n  snackType: NEUTRAL\n};\nfunction messageReducer() {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n  const stateMessageTypes = state.messageTypes;\n  const oldAttachments = state.attachments;\n  switch (action.type) {\n    case actions.SET_CURRENT_USER:\n      return {\n        ...state,\n        currentUser: {\n          loading: true,\n          error: null,\n          id: null,\n          authorities: null,\n          userGroups: null\n        }\n      };\n    case actions.SET_CURRENT_USER_SUCCESS:\n      return {\n        ...state,\n        currentUser: {\n          loading: false,\n          error: null,\n          id: action.payload.id,\n          authorities: action.payload.authorities,\n          userGroups: action.payload.userGroups\n        }\n      };\n    case actions.SET_CURRENT_USER_ERROR:\n      return {\n        ...state,\n        currentUser: {\n          loading: false,\n          error: action.payload,\n          id: null,\n          authorities: null,\n          userGroups: null\n        }\n      };\n    case actions.SET_DISPLAY_TIME_DIFF_SUCCESS:\n      return {\n        ...state,\n        displayTimeDiff: action.payload\n      };\n    case actions.MESSAGE_CONVERSATIONS_LOAD_SUCCESS:\n      {\n        const replaceMessageType = stateMessageTypes.find(type => type.id === action.payload.messageType.id);\n        replaceMessageType.loaded = action.payload.messageConversations.length;\n        replaceMessageType.total = action.payload.pager.total;\n        replaceMessageType.unread = action.payload.nrOfUnread;\n        replaceMessageType.page = action.payload.pager.page;\n        replaceMessageType.loading = false;\n        messageTypes.splice([findIndexOfId(stateMessageTypes, replaceMessageType.id)], 1, replaceMessageType);\n        const setSelectedMessageType = action.payload.selectedMessageType === replaceMessageType.id && (action.payload.selectedMessageType === state.selectedMessageType || state.selectedMessageType === undefined);\n        return {\n          ...state,\n          messageTypes,\n          messageConversations: {\n            ...state.messageConversations,\n            [replaceMessageType.id]: action.payload.messageConversations\n          },\n          selectedMessageType: setSelectedMessageType ? replaceMessageType : state.selectedMessageType\n        };\n      }\n    case actions.MESSAGE_CONVERSATION_UPDATE_ERROR:\n      return {\n        ...state,\n        snackMessage: action.payload.error.message,\n        snackType: NEGATIVE\n      };\n    case actions.MESSAGE_CONVERSATION_UPDATE_SUCCESS:\n      {\n        let snackMessage = '';\n        switch (action.payload.identifier) {\n          case 'STATUS':\n            snackMessage = i18n.t('Successfully updated status');\n            break;\n          case 'PRIORITY':\n            snackMessage = i18n.t('Successfully updated priority');\n            break;\n          case 'ASSIGNEE':\n            snackMessage = i18n.t('Successfully updated assignee');\n            break;\n          case 'FOLLOW_UP':\n            snackMessage = i18n.t('Successfully changed followup');\n            break;\n          default:\n            log.error('Unexpected identifier for updateMessageConversations success');\n            break;\n        }\n        return {\n          ...state,\n          snackMessage,\n          snackType: POSITIVE\n        };\n      }\n    case actions.SEND_MESSAGE_ERROR:\n      return {\n        ...state,\n        snackMessage: action.payload.error.message,\n        snackType: NEGATIVE\n      };\n    case actions.MESSAGE_CONVERSATIONS_DELETE_ERROR:\n      return {\n        ...state,\n        snackMessage: action.payload.error.message,\n        snackType: NEGATIVE\n      };\n    case actions.MESSAGE_CONVERSATIONS_DELETE_SUCCESS:\n      return {\n        ...state,\n        snackMessage: i18n.t('Successfully deleted message conversation(s)'),\n        snackType: POSITIVE\n      };\n    case actions.DISPLAY_SNACK_MESSAGE:\n      return {\n        ...state,\n        snackMessage: action.payload.message,\n        snackType: action.payload.snackType,\n        onSnackActionClick: action.payload.onSnackActionClick,\n        onSnackRequestClose: action.payload.onSnackRequestClose\n      };\n    case actions.CLEAR_SNACK_MESSAGE:\n      return {\n        ...state,\n        snackMessage: '',\n        snackType: NEUTRAL\n      };\n    case actions.SET_CHECKED:\n      {\n        const messageConversation = action.payload.messageConversation;\n        let checkedIds = state.checkedIds;\n        if (action.payload.selectedValue) {\n          checkedIds.push(messageConversation);\n        } else {\n          checkedIds = checkedIds.filter(element => element.id !== messageConversation.id);\n        }\n        return {\n          ...state,\n          checkedIds\n        };\n      }\n    case actions.SET_ALL_CHECKED:\n      return {\n        ...state,\n        checkedIds: action.payload.messageConversationIds\n      };\n    case actions.CLEAR_CHECKED:\n      return {\n        ...state,\n        checkedIds: []\n      };\n    case actions.SET_SELECTED_MESSAGE_CONVERSATION_SUCCESS:\n      return {\n        ...state,\n        selectedMessageConversation: action.payload.messageConversation,\n        settingSelectedMessageConversation: false\n      };\n    case actions.SET_SELECTED_MESSAGE_CONVERSATION:\n      return {\n        ...state,\n        settingSelectedMessageConversation: true\n      };\n    case actions.CLEAR_SELECTED_MESSAGE_CONVERSATION:\n      return {\n        ...state,\n        selectedMessageConversation: undefined\n      };\n    case actions.SET_SELECTED_MESSAGE_TYPE:\n      return {\n        ...state,\n        checkedIds: [],\n        selectedMessageType: stateMessageTypes.find(type => type.id === action.payload.messageTypeId),\n        selectedMessageConversations: state.messageConversations[action.payload.messageTypeId],\n        selectedMessageConversation: undefined\n      };\n    case actions.UPDATE_INPUT_FIELDS:\n      return {\n        ...state,\n        subject: action.payload.subject,\n        input: action.payload.input,\n        recipients: action.payload.recipients\n      };\n    case actions.ADD_RECIPIENT_BY_ID_SUCCESS:\n      return {\n        ...state,\n        recipients: [...state.recipients, action.payload]\n      };\n    case actions.SET_FILTER:\n      return {\n        ...state,\n        messageFilter: action.payload.filterType === 'MESSAGE' ? action.payload.filter : state.messageFilter,\n        statusFilter: action.payload.filterType === 'STATUS' ? action.payload.filter : state.statusFilter,\n        priorityFilter: action.payload.filterType === 'PRIORITY' ? action.payload.filter : state.priorityFilter,\n        assignedToMeFilter: action.payload.filterType === 'ASSIGNED_TO_ME' ? action.payload.filter : state.assignedToMeFilter,\n        markedForFollowUpFilter: action.payload.filterType === 'MARKED_FOR_FOLLOWUP' ? action.payload.filter : state.markedForFollowUpFilter,\n        unreadFilter: action.payload.filterType === 'UNREAD' ? action.payload.filter : state.unreadFilter\n      };\n    case actions.LOAD_MESSAGE_CONVERSATIONS:\n      {\n        const loadingMessageType = action.payload.messageType;\n        loadingMessageType.loading = true;\n        if (action.payload.loadMore) {\n          loadingMessageType.page++;\n        }\n        messageTypes[findIndexOfId(messageTypes, loadingMessageType.id)] = loadingMessageType;\n\n        // TODO: This can probably be removed because action.payload.messageType === state.selectedMessageType\n        const selectedMessageType = state.selectedMessageType;\n        if (selectedMessageType) {\n          selectedMessageType.loading = true;\n          if (action.payload.loadMore) {\n            selectedMessageType.page++;\n          }\n        }\n        return {\n          ...state,\n          messageTypes,\n          selectedMessageType\n        };\n      }\n    case actions.SET_IN_FEEDBACK_RECIPIENT_GROUP:\n      return {\n        ...state,\n        isInFeedbackRecipientGroup: action.payload.isInFeedbackRecipientGroup.authorized,\n        feedbackRecipientsId: action.payload.isInFeedbackRecipientGroup.feedbackRecipientsId\n      };\n    case actions.ADD_ATTACHMENT_SUCCESS:\n      return {\n        ...state,\n        attachments: state.attachments.map(attachment => attachment.name === action.payload.name ? {\n          id: action.payload.id,\n          name: attachment.name,\n          contentLength: attachment.contentLength,\n          loading: false\n        } : attachment)\n      };\n    case actions.ADD_ATTACHMENT_ERROR:\n      return {\n        ...state,\n        attachments: oldAttachments.filter(attachment => attachment.id !== action.payload.attachmentId),\n        snackMessage: action.payload.error.message,\n        snackType: NEGATIVE\n      };\n    case actions.ADD_ATTACHMENT:\n      return {\n        ...state,\n        attachments: state.attachments.concat({\n          name: action.payload.name,\n          contentLength: action.payload.size,\n          loading: true\n        })\n      };\n    case actions.REMOVE_ATTACHMENT:\n      return {\n        ...state,\n        attachments: oldAttachments.filter(attachment => attachment.id !== action.payload.attachmentId)\n      };\n    case actions.CANCEL_ATTACHMENT:\n      return {\n        ...state,\n        attachments: oldAttachments.filter(attachment => attachment.name !== action.payload.attachmentName)\n      };\n    case actions.CLEAR_ATTACHMENTS:\n      return {\n        ...state,\n        attachments: []\n      };\n    case actions.SET_DHIS2_CORE_VERSION:\n      return {\n        ...state,\n        dhis2CoreVersion: action.payload\n      };\n    default:\n      return state;\n  }\n}\nexport default messageReducer;","import { createStore, applyMiddleware, combineReducers, compose } from 'redux';\nimport ReduxThunk from 'redux-thunk';\nimport messageReducer from './reducers/messageReducer.js';\nconst middlewares = [ReduxThunk];\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\nconst reducer = combineReducers({\n  messaging: messageReducer\n});\nexport default createStore(reducer, composeEnhancers(applyMiddleware(...middlewares)));","import { blue50, blue100, blue300, blue500, pinkA200, grey50, grey100, grey300, grey500, grey700, grey900, orange500, white, darkBlack, fullBlack } from 'material-ui/styles/colors';\nimport getMuiTheme from 'material-ui/styles/getMuiTheme';\nimport { fade } from 'material-ui/utils/colorManipulator';\nexport default getMuiTheme({\n  palette: {\n    negative: pinkA200,\n    blue50,\n    primary1Color: '#1D8BF1',\n    primary2Color: blue100,\n    primary3Color: blue300,\n    primary4Color: blue500,\n    accent1Color: grey50,\n    accent2Color: grey100,\n    accent3Color: grey300,\n    accent4Color: grey500,\n    followUp: orange500,\n    darkGray: grey700,\n    superDarkGray: grey900,\n    textColor: darkBlack,\n    alternateTextColor: white,\n    canvasColor: white,\n    borderColor: grey300,\n    clockCircleColor: fade(darkBlack, 0.07),\n    shadowColor: fullBlack\n  }\n});","//------------------------------------------------------------------------------\n// <auto-generated>\n// This code was generated by d2-i18n-generate.\n//\n// Changes to this file may cause incorrect behavior and will be lost if\n// the code is regenerated.\n// </auto-generated>\n//------------------------------------------------------------------------------\nimport i18n from '@dhis2/d2-i18n';\nimport arTranslations from './ar/translations.json';\nimport ar_IQTranslations from './ar_IQ/translations.json';\nimport bnTranslations from './bn/translations.json';\nimport ckbTranslations from './ckb/translations.json';\nimport csTranslations from './cs/translations.json';\nimport daTranslations from './da/translations.json';\nimport enTranslations from './en/translations.json';\nimport esTranslations from './es/translations.json';\nimport es_419Translations from './es_419/translations.json';\nimport frTranslations from './fr/translations.json';\nimport hi_INTranslations from './hi_IN/translations.json';\nimport idTranslations from './id/translations.json';\nimport kmTranslations from './km/translations.json';\nimport loTranslations from './lo/translations.json';\nimport myTranslations from './my/translations.json';\nimport nbTranslations from './nb/translations.json';\nimport neTranslations from './ne/translations.json';\nimport nlTranslations from './nl/translations.json';\nimport prsTranslations from './prs/translations.json';\nimport psTranslations from './ps/translations.json';\nimport ptTranslations from './pt/translations.json';\nimport pt_BRTranslations from './pt_BR/translations.json';\nimport roTranslations from './ro/translations.json';\nimport ruTranslations from './ru/translations.json';\nimport siTranslations from './si/translations.json';\nimport svTranslations from './sv/translations.json';\nimport tetTranslations from './tet/translations.json';\nimport tgTranslations from './tg/translations.json';\nimport ukTranslations from './uk/translations.json';\nimport urTranslations from './ur/translations.json';\nimport uz_CyrlTranslations from './uz_Cyrl/translations.json';\nimport uz_LatnTranslations from './uz_Latn/translations.json';\nimport uz_UZ_CyrlTranslations from './uz_UZ_Cyrl/translations.json';\nimport uz_UZ_LatnTranslations from './uz_UZ_Latn/translations.json';\nimport viTranslations from './vi/translations.json';\nimport zhTranslations from './zh/translations.json';\nimport zh_CNTranslations from './zh_CN/translations.json';\nconst namespace = 'default';\ni18n.addResources('ar', namespace, arTranslations);\ni18n.addResources('ar_IQ', namespace, ar_IQTranslations);\ni18n.addResources('bn', namespace, bnTranslations);\ni18n.addResources('ckb', namespace, ckbTranslations);\ni18n.addResources('cs', namespace, csTranslations);\ni18n.addResources('da', namespace, daTranslations);\ni18n.addResources('en', namespace, enTranslations);\ni18n.addResources('es', namespace, esTranslations);\ni18n.addResources('es_419', namespace, es_419Translations);\ni18n.addResources('fr', namespace, frTranslations);\ni18n.addResources('hi_IN', namespace, hi_INTranslations);\ni18n.addResources('id', namespace, idTranslations);\ni18n.addResources('km', namespace, kmTranslations);\ni18n.addResources('lo', namespace, loTranslations);\ni18n.addResources('my', namespace, myTranslations);\ni18n.addResources('nb', namespace, nbTranslations);\ni18n.addResources('ne', namespace, neTranslations);\ni18n.addResources('nl', namespace, nlTranslations);\ni18n.addResources('prs', namespace, prsTranslations);\ni18n.addResources('ps', namespace, psTranslations);\ni18n.addResources('pt', namespace, ptTranslations);\ni18n.addResources('pt_BR', namespace, pt_BRTranslations);\ni18n.addResources('ro', namespace, roTranslations);\ni18n.addResources('ru', namespace, ruTranslations);\ni18n.addResources('si', namespace, siTranslations);\ni18n.addResources('sv', namespace, svTranslations);\ni18n.addResources('tet', namespace, tetTranslations);\ni18n.addResources('tg', namespace, tgTranslations);\ni18n.addResources('uk', namespace, ukTranslations);\ni18n.addResources('ur', namespace, urTranslations);\ni18n.addResources('uz_Cyrl', namespace, uz_CyrlTranslations);\ni18n.addResources('uz_Latn', namespace, uz_LatnTranslations);\ni18n.addResources('uz_UZ_Cyrl', namespace, uz_UZ_CyrlTranslations);\ni18n.addResources('uz_UZ_Latn', namespace, uz_UZ_LatnTranslations);\ni18n.addResources('vi', namespace, viTranslations);\ni18n.addResources('zh', namespace, zhTranslations);\ni18n.addResources('zh_CN', namespace, zh_CNTranslations);\nexport default i18n;","import log from 'loglevel';\nimport moment from 'moment';\nimport * as api from '../api/api.js';\nimport * as actions from '../constants/actions.js';\n\n// Simple hack to solve negative time difference\nconst FUTURE_HACK = 5000;\nconst createAction = (type, payload) => ({\n  type,\n  payload\n});\n\n/******************\n * THUNKS SECTION *\n ******************/\n\nexport const setCurrentUser = () => async dispatch => {\n  dispatch(createAction(actions.SET_CURRENT_USER));\n  try {\n    const {\n      currentUser\n    } = await api.getCurrentUser();\n    dispatch(createAction(actions.SET_CURRENT_USER_SUCCESS, currentUser));\n  } catch {\n    dispatch(createAction(actions.SET_CURRENT_USER_ERROR, 'Could not load current user'));\n  }\n};\nexport const setDisplayTimeDiff = () => async dispatch => {\n  try {\n    const serverDate = await api.getServerDate();\n    const displayTimeDiff = moment().diff(moment(serverDate)) - FUTURE_HACK;\n    dispatch(createAction(actions.SET_DISPLAY_TIME_DIFF_SUCCESS, displayTimeDiff));\n  } catch (error) {\n    dispatch(createAction(actions.SET_DISPLAY_TIME_DIFF_ERROR, {\n      error\n    }));\n  }\n};\nexport const setSelectedMessageConversation = messageConversation => async dispatch => {\n  dispatch(createAction(actions.SET_SELECTED_MESSAGE_CONVERSATION));\n  try {\n    const result = await api.getMessageConversation(messageConversation);\n    dispatch(createAction(actions.SET_SELECTED_MESSAGE_CONVERSATION_SUCCESS, {\n      messageConversation: result\n    }));\n  } catch (error) {\n    dispatch(createAction(actions.SET_SELECTED_MESSAGE_CONVERSATION_ERROR, {\n      error\n    }));\n  }\n};\nexport const updateMessageConversations = _ref => {\n  let {\n    messageConversationIds,\n    identifier,\n    value,\n    messageType,\n    selectedMessageConversation\n  } = _ref;\n  return async dispatch => {\n    if (identifier === 'FOLLOW_UP') {\n      try {\n        await api.updateMessageConversationFollowup(messageConversationIds, value);\n        dispatch(createAction(actions.MESSAGE_CONVERSATION_UPDATE_SUCCESS, {\n          messageType: messageType,\n          page: 1,\n          identifier: identifier\n        }));\n        dispatch(loadMessageConversations());\n      } catch (error) {\n        dispatch(createAction(actions.MESSAGE_CONVERSATION_UPDATE_ERROR, {\n          error\n        }));\n      }\n    } else {\n      const promises = messageConversationIds.map(messageConversationId => {\n        let promise;\n        switch (identifier) {\n          case 'STATUS':\n            promise = api.updateMessageConversationStatus(messageConversationId, value);\n            break;\n          case 'PRIORITY':\n            promise = api.updateMessageConversationPriority(messageConversationId, value);\n            break;\n          case 'ASSIGNEE':\n            if (value !== undefined && messageType.id === 'VALIDATION_RESULT') {\n              promise = api.addRecipients({\n                users: value.map(value => ({\n                  id: value\n                })),\n                userGroups: [],\n                organisationUnits: [],\n                messageConversationId\n              }).then(() => api.updateMessageConversationAssignee(messageConversationId, value));\n            } else {\n              promise = api.updateMessageConversationAssignee(messageConversationId, value);\n            }\n            break;\n          default:\n            log.error('Unexpected identifier for updateMessageConversations');\n            break;\n        }\n        return promise;\n      });\n      try {\n        await Promise.all(promises);\n        dispatch(createAction(actions.MESSAGE_CONVERSATION_UPDATE_SUCCESS, {\n          messageType: messageType,\n          page: 1,\n          identifier: identifier\n        }));\n        dispatch(loadMessageConversations());\n      } catch (error) {\n        dispatch(createAction(actions.MESSAGE_CONVERSATION_UPDATE_ERROR, {\n          error\n        }));\n      }\n    }\n    if (selectedMessageConversation) {\n      dispatch(setSelectedMessageConversation(selectedMessageConversation));\n    }\n  };\n};\nexport const loadMessageConversations = function (messageType, selectedMessageType) {\n  let loadMore = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n  return async (dispatch, getState) => {\n    const promises = [];\n    const state = getState();\n    const {\n      messageFilter,\n      statusFilter: status,\n      priorityFilter: priority,\n      assignedToMeFilter,\n      markedForFollowUpFilter,\n      unreadFilter,\n      currentUser\n    } = state.messaging;\n\n    // Default fallback values so this action can be called without arguments\n    messageType = messageType || state.messaging.selectedMessageType;\n    selectedMessageType = selectedMessageType || state.messaging.selectedMessageType.id;\n    dispatch(createAction(actions.LOAD_MESSAGE_CONVERSATIONS, {\n      messageType,\n      loadMore\n    }));\n    try {\n      for (let i = 1; i <= messageType.page; i++) {\n        const promise = api.getMessageConversations({\n          messageType: messageType.id,\n          page: i,\n          messageFilter,\n          status,\n          priority,\n          assignedToMeFilter,\n          markedForFollowUpFilter,\n          unreadFilter,\n          currentUser\n        }).then(result => ({\n          messageConversations: result.messageConversations,\n          pager: result.pager\n        }));\n        promises.push(promise);\n      }\n      const result = await Promise.all(promises);\n      const nrOfUnread = await api.getNrOfUnread(messageType.id);\n      const messageConversations = result.reduce((accumulated, r) => accumulated.concat(r.messageConversations), []);\n      dispatch(createAction(actions.MESSAGE_CONVERSATIONS_LOAD_SUCCESS, {\n        messageConversations,\n        pager: result[result.length - 1].pager,\n        messageType,\n        selectedMessageType,\n        nrOfUnread\n      }));\n    } catch (error) {\n      dispatch(createAction(actions.MESSAGE_CONVERSATIONS_LOAD_ERROR, {\n        error\n      }));\n    }\n  };\n};\nexport const deleteMessageConversations = (messageConversationIds, messageType) => async (dispatch, getState) => {\n  try {\n    const state = getState();\n    const {\n      currentUser\n    } = state.messaging;\n    const promises = messageConversationIds.map(messageConversationId => api.deleteMessageConversation(messageConversationId, currentUser.id));\n    await Promise.all(promises);\n    dispatch(createAction(actions.MESSAGE_CONVERSATIONS_DELETE_SUCCESS, {\n      messageType: messageType,\n      page: 1\n    }));\n    dispatch(loadMessageConversations());\n  } catch (error) {\n    dispatch(createAction(actions.MESSAGE_CONVERSATIONS_DELETE_ERROR, {\n      error\n    }));\n  }\n};\nexport const sendMessage = _ref2 => {\n  let {\n    users,\n    userGroups,\n    organisationUnits,\n    messageType\n  } = _ref2;\n  return async (dispatch, getState) => {\n    try {\n      const {\n        messaging: {\n          subject,\n          input,\n          attachments\n        }\n      } = getState();\n      await api.sendMessage({\n        subject,\n        users,\n        userGroups,\n        organisationUnits,\n        text: input,\n        attachments\n      });\n      dispatch(createAction(actions.SEND_MESSAGE_SUCCESS, {\n        messageType,\n        page: 1\n      }));\n      dispatch(loadMessageConversations());\n    } catch (error) {\n      dispatch(createAction(actions.SEND_MESSAGE_ERROR, {\n        error\n      }));\n    }\n  };\n};\nexport const sendFeedbackMessage = messageType => async (dispatch, getState) => {\n  const state = getState();\n  try {\n    await api.sendFeedbackMessage(state.messaging.subject, state.messaging.input);\n    dispatch(createAction(actions.SEND_MESSAGE_SUCCESS, {\n      messageType: messageType,\n      page: 1\n    }));\n    dispatch(loadMessageConversations());\n  } catch (error) {\n    dispatch(createAction(actions.SEND_MESSAGE_ERROR, {\n      error\n    }));\n  }\n};\nexport const replyMessage = _ref3 => {\n  let {\n    message,\n    internalReply,\n    messageConversation,\n    messageType\n  } = _ref3;\n  return async (dispatch, getState) => {\n    try {\n      const {\n        id\n      } = messageConversation;\n      const state = getState();\n      const attachments = state.messaging.attachments.map(attachment => attachment.id);\n      await api.replyMessage({\n        message,\n        internalReply,\n        attachments,\n        id\n      });\n      dispatch(createAction(actions.REPLY_MESSAGE_SUCCESS, {\n        messageConversation: messageConversation,\n        messageType: messageType,\n        page: 1\n      }));\n      dispatch(loadMessageConversations());\n      dispatch(setSelectedMessageConversation(messageConversation));\n    } catch (error) {\n      dispatch(createAction(actions.REPLY_MESSAGE_ERROR, {\n        error\n      }));\n    }\n  };\n};\nexport const markMessageConversations = (mode, markedConversations, messageType) => async dispatch => {\n  try {\n    await (mode === 'read' ? api.markRead(markedConversations) : api.markUnread(markedConversations));\n    dispatch(createAction(actions.MARK_MESSAGE_CONVERSATIONS_SUCCESS, {\n      messageType: messageType,\n      page: 1\n    }));\n    dispatch(loadMessageConversations());\n  } catch (error) {\n    dispatch(createAction(actions.MARK_MESSAGE_CONVERSATIONS_ERROR, {\n      error\n    }));\n  }\n};\nexport const addRecipients = _ref4 => {\n  let {\n    users,\n    userGroups,\n    organisationUnits,\n    messageConversation,\n    messageType\n  } = _ref4;\n  return async dispatch => {\n    try {\n      const {\n        id: messageConversationId\n      } = messageConversation;\n      await api.addRecipients({\n        users,\n        userGroups,\n        organisationUnits,\n        messageConversationId\n      });\n      dispatch(createAction(actions.ADD_RECIPIENTS_SUCCESS, {\n        messageConversation: messageConversation,\n        messageType: messageType,\n        page: 1\n      }));\n      dispatch(setSelectedMessageConversation(messageConversation));\n    } catch (error) {\n      dispatch(createAction(actions.ADD_RECIPIENTS_ERROR, {\n        error\n      }));\n    }\n  };\n};\nexport const addRecipientByUserId = id => async dispatch => {\n  try {\n    const user = await api.getUserById(id);\n    dispatch(createAction(actions.ADD_RECIPIENT_BY_ID_SUCCESS, user));\n  } catch (error) {\n    console.error(error);\n    // No action required, the field will just be empty\n  }\n};\nexport const addAttachment = attachment => async dispatch => {\n  dispatch(createAction(actions.ADD_ATTACHMENT, attachment));\n  try {\n    const result = await api.addAttachment(attachment);\n    dispatch(createAction(actions.ADD_ATTACHMENT_SUCCESS, {\n      id: result.response.fileResource.id,\n      name: attachment.name,\n      contentLength: result.response.fileResource.contentLength\n    }));\n  } catch (error) {\n    dispatch(createAction(actions.ADD_ATTACHMENT_ERROR, {\n      error\n    }));\n  }\n};\nexport const downloadAttachment = (messageConversationId, messageId, attachmentId) => dispatch => {\n  api.downloadAttachment(messageConversationId, messageId, attachmentId);\n  dispatch(createAction(actions.DOWNLOAD_ATTACHMENT_SUCCESS));\n};\n\n/************************\n * PLAIN ACTION SECTION *\n ************************/\n\nexport const clearSnackMessage = () => createAction(actions.CLEAR_SNACK_MESSAGE);\nexport const clearCheckedIds = () => createAction(actions.CLEAR_CHECKED);\nexport const clearSelectedMessageConversation = () => createAction(actions.CLEAR_SELECTED_MESSAGE_CONVERSATION);\nexport const displaySnackMessage = _ref5 => {\n  let {\n    message,\n    onSnackActionClick,\n    onSnackRequestClose,\n    snackType\n  } = _ref5;\n  return createAction(actions.DISPLAY_SNACK_MESSAGE, {\n    message,\n    onSnackActionClick,\n    onSnackRequestClose,\n    snackType\n  });\n};\nexport const setAllChecked = messageConversationIds => createAction(actions.SET_ALL_CHECKED, {\n  messageConversationIds\n});\nexport const setChecked = (messageConversation, selectedValue) => createAction(actions.SET_CHECKED, {\n  messageConversation,\n  selectedValue\n});\nexport const setFilter = (filter, filterType) => createAction(actions.SET_FILTER, {\n  filter,\n  filterType\n});\nexport const updateInputFields = (subject, input, recipients) => createAction(actions.UPDATE_INPUT_FIELDS, {\n  subject,\n  input,\n  recipients\n});\nexport const clearAttachments = () => createAction(actions.CLEAR_ATTACHMENTS);\nexport const setSelectedMessageType = messageTypeId => createAction(actions.SET_SELECTED_MESSAGE_TYPE, {\n  messageTypeId\n});\nexport const removeAttachment = attachmentId => createAction(actions.REMOVE_ATTACHMENT, {\n  attachmentId\n});\nexport const cancelAttachment = attachmentName => createAction(actions.CANCEL_ATTACHMENT, {\n  attachmentName\n});\nexport const setIsInFeedbackRecipientGroup = isInFeedbackRecipientGroup => createAction(actions.SET_IN_FEEDBACK_RECIPIENT_GROUP, {\n  isInFeedbackRecipientGroup\n});\nexport const setDhis2CoreVersion = version => createAction(actions.SET_DHIS2_CORE_VERSION, version);","function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == typeof i ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != typeof t || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != typeof i) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nimport Snackbar from 'material-ui/Snackbar';\nimport propTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { compose, pure } from 'recompose';\nimport { clearSnackMessage } from '../../actions/index.js';\nimport theme from '../../styles/theme.js';\nconst DEFAULT_MESSAGE_DURATION = 4000;\nconst contentColorStyle = {\n  NEGATIVE: theme.palette.negative,\n  NEUTRAL: theme.palette.primary1Color,\n  POSITIVE: theme.palette.alternateTextColor\n};\nclass CustomSnackBar extends Component {\n  constructor(props) {\n    super(props);\n    _defineProperty(this, \"closeMessage\", () => {\n      this.props.clearSnackMessage();\n      this.setState({\n        show: false\n      });\n      this.props.onSnackRequestClose && this.props.onSnackRequestClose();\n    });\n    this.state = {\n      show: false\n    };\n  }\n  componentDidUpdate(_prevProps, prevState) {\n    if (!prevState.show && this.props.message) {\n      this.setState({\n        show: true\n      });\n    }\n  }\n  render() {\n    return /*#__PURE__*/React.createElement(Snackbar, {\n      open: this.props.message !== '' && this.state.show,\n      message: this.props.message || 'Missing snackbar message',\n      autoHideDuration: DEFAULT_MESSAGE_DURATION,\n      onRequestClose: this.closeMessage,\n      action: this.props.onSnackActionClick && 'undo',\n      onActionClick: () => {\n        this.props.onSnackActionClick();\n        this.setState({\n          show: false\n        });\n      },\n      contentStyle: {\n        color: contentColorStyle[this.props.type]\n      },\n      style: {\n        pointerEvents: 'none',\n        whiteSpace: 'nowrap'\n      },\n      bodyStyle: {\n        pointerEvents: 'initial',\n        maxWidth: 'none'\n      }\n    });\n  }\n}\nCustomSnackBar.propTypes = {\n  clearSnackMessage: propTypes.func,\n  message: propTypes.string,\n  type: propTypes.oneOf(['NEGATIVE', 'NEUTRAL', 'POSITIVE']),\n  onSnackActionClick: propTypes.func,\n  onSnackRequestClose: propTypes.func\n};\nconst mapStateToProps = state => ({\n  message: state.messaging.snackMessage,\n  type: state.messaging.snackType,\n  onSnackActionClick: state.messaging.onSnackActionClick,\n  onSnackRequestClose: state.messaging.onSnackRequestClose\n});\nexport default compose(connect(mapStateToProps, {\n  clearSnackMessage\n}), pure)(CustomSnackBar);","// extracted by mini-css-extract-plugin\nexport default {\"center\":\"App_center__Mhcp8\",\"error\":\"App_error__Z9hJR\"};","import { createHashHistory } from 'history';\nexport default createHashHistory();","import theme from '../styles/theme.js';\nexport const messagePanelContainer = {\n  overflowY: 'scroll',\n  overflowX: 'hidden',\n  borderRightWidth: '1px',\n  borderRightColor: theme.palette.accent4Color,\n  height: 'calc(100vh - 95px)'\n};\nexport const subheader = {\n  paddingLeft: '0px',\n  fontSize: '20px'\n};","import i18n from '@dhis2/d2-i18n';\nconst extendedChoices = {\n  STATUS: [{\n    key: 'NONE',\n    value: 'NONE',\n    primaryText: i18n.t('No status')\n  }, {\n    key: 'OPEN',\n    value: 'OPEN',\n    primaryText: i18n.t('Open')\n  }, {\n    key: 'PENDING',\n    value: 'PENDING',\n    primaryText: i18n.t('Pending')\n  }, {\n    key: 'INVALID',\n    value: 'INVALID',\n    primaryText: i18n.t('Invalid')\n  }, {\n    key: 'SOLVED',\n    value: 'SOLVED',\n    primaryText: i18n.t('Solved')\n  }],\n  PRIORITY: [{\n    key: 'NONE',\n    value: 'NONE',\n    primaryText: i18n.t('No priority')\n  }, {\n    key: 'HIGH',\n    value: 'HIGH',\n    primaryText: i18n.t('High')\n  }, {\n    key: 'MEDIUM',\n    value: 'MEDIUM',\n    primaryText: i18n.t('Medium')\n  }, {\n    key: 'LOW',\n    value: 'LOW',\n    primaryText: i18n.t('Low')\n  }]\n};\nexport default extendedChoices;","import Dialog from 'material-ui/Dialog';\nimport propTypes from 'prop-types';\nimport React from 'react';\nimport { Provider, ReactReduxContext } from 'react-redux';\n\n/*\n * This component is needed because in this version of MUI\n * the redux context is not propagated onto a Portal\n */\nexport default function DialogWithReduxState(props) {\n  return /*#__PURE__*/React.createElement(ReactReduxContext.Consumer, null, ctx => /*#__PURE__*/React.createElement(Dialog, props, /*#__PURE__*/React.createElement(Provider, {\n    store: ctx.store\n  }, props.children)));\n}\nDialogWithReduxState.propTypes = {\n  children: propTypes.node\n};","function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == typeof i ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != typeof t || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != typeof i) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nimport i18n from '@dhis2/d2-i18n';\nimport ChipInput from 'material-ui-chip-input';\nimport propTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport * as api from '../../api/api.js';\nimport { debounce } from '../../utils/helpers.js';\nconst searchDelay = 1200;\nconst minCharLength = 2;\n\n/*\n * An AutoComplete text field with suggestions from a given list of\n * identifiable objects. Selected objects are shown as chips in the text field.\n */\n\nclass SuggestionField extends Component {\n  constructor() {\n    super(...arguments);\n    _defineProperty(this, \"state\", {\n      input: '',\n      searchResult: [],\n      searchOnlyUsers: this.props.searchOnlyUsers,\n      searchOnlyFeedbackRecipients: this.props.searchOnlyFeedbackRecipients,\n      lastSearch: '',\n      errorText: undefined\n    });\n    _defineProperty(this, \"debouncedSearch\", debounce(this.search.bind(this), searchDelay));\n    _defineProperty(this, \"onSuggestionClick\", chip => {\n      if (this.props.onSuggestionClick !== undefined) {\n        this.props.onSuggestionClick(chip);\n      } else {\n        this.wipeInput();\n        this.debouncedSearch('');\n        const doInsert = !this.props.recipients.find(recipient => recipient.id === chip.id);\n        doInsert && this.props.updateRecipients([...this.props.recipients, this.state.searchResult.find(result => result.id === chip.id)]);\n      }\n    });\n    _defineProperty(this, \"onRemoveChip\", id => {\n      this.props.updateRecipients(this.props.recipients.filter(recipient => recipient.id !== id));\n    });\n    _defineProperty(this, \"wipeInput\", () => {\n      this.setState({\n        input: '',\n        searchResult: []\n      });\n    });\n    _defineProperty(this, \"updateInput\", input => {\n      this.debouncedSearch(input);\n      this.setState({\n        input\n      });\n    });\n  }\n  search(input) {\n    const doSearch = !this.state.searchResult.find(result => result.displayName === input) && input !== '' && input.length >= minCharLength;\n    if (doSearch) {\n      const {\n        feedbackRecipientsId,\n        searchOnlyUsers,\n        searchOnlyFeedbackRecipients,\n        dhis2CoreVersion\n      } = this.props;\n      api.searchRecipients({\n        searchValue: input,\n        searchOnlyUsers,\n        searchOnlyFeedbackRecipients,\n        feedbackRecipientsId,\n        dhis2CoreVersion\n      }).then(_ref => {\n        let {\n          users,\n          userGroups,\n          organisationUnits\n        } = _ref;\n        const addType = type => result => ({\n          ...result,\n          type\n        });\n        let internalSearchResult = users.map(addType('user'));\n        if (!this.state.searchOnlyUsers) {\n          internalSearchResult = internalSearchResult.concat(userGroups.map(addType('userGroup'))).concat(organisationUnits.map(addType('organisationUnit')));\n        }\n        this.setState({\n          searchResult: internalSearchResult,\n          errorText: internalSearchResult.length === 0 ? i18n.t('No results found') : undefined\n        });\n      });\n    } else {\n      this.setState({\n        lastSearch: input,\n        searchResult: this.state.lastSearch !== '' && input === '' || input.length < minCharLength ? [] : this.state.searchResult,\n        errorText: input !== '' && input.length < minCharLength ? i18n.t(`Please enter at least ${minCharLength} characters`) : this.state.searchWarning\n      });\n    }\n  }\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        ...this.props.style,\n        height: this.props.inputHeight\n      }\n    }, /*#__PURE__*/React.createElement(ChipInput, {\n      style: {\n        marginBottom: 16\n      },\n      disabled: this.props.disabled === undefined ? false : this.props.disabled,\n      errorText: this.props.errorText || this.state.errorText,\n      value: this.props.recipients,\n      fullWidth: true,\n      openOnFocus: true,\n      searchText: this.state.input,\n      floatingLabelText: this.props.label,\n      dataSource: this.state.searchResult,\n      dataSourceConfig: {\n        text: 'displayName',\n        value: 'id'\n      },\n      onUpdateInput: this.updateInput,\n      onRequestAdd: chip => this.onSuggestionClick(chip),\n      onRequestDelete: id => this.onRemoveChip(id)\n    }));\n  }\n}\nSuggestionField.propTypes = {\n  dhis2CoreVersion: propTypes.number,\n  disabled: propTypes.bool,\n  errorText: propTypes.string,\n  feedbackRecipientsId: propTypes.string,\n  inputHeight: propTypes.string,\n  label: propTypes.string,\n  recipients: propTypes.array,\n  searchOnlyFeedbackRecipients: propTypes.bool,\n  searchOnlyUsers: propTypes.bool,\n  style: propTypes.object,\n  updateRecipients: propTypes.func,\n  onSuggestionClick: propTypes.func\n};\nexport default connect(state => ({\n  dhis2CoreVersion: state.messaging.dhis2CoreVersion\n}))(SuggestionField);","import i18n from '@dhis2/d2-i18n';\nimport propTypes from 'prop-types';\nimport React from 'react';\nimport DialogWithReduxState from './DialogWithReduxState.js';\nimport SuggestionField from './SuggestionField.js';\nconst AssignToDialog = _ref => {\n  let {\n    open,\n    onRequestClose,\n    updateMessageConversations,\n    messageType,\n    feedbackRecipientsId\n  } = _ref;\n  return /*#__PURE__*/React.createElement(DialogWithReduxState, {\n    open: open,\n    onRequestClose: () => {\n      onRequestClose();\n    }\n  }, /*#__PURE__*/React.createElement(SuggestionField, {\n    onSuggestionClick: chip => {\n      updateMessageConversations([chip.id]);\n      onRequestClose();\n    },\n    searchOnlyUsers: true,\n    searchOnlyFeedbackRecipients: messageType.id === 'TICKET',\n    feedbackRecipientsId: feedbackRecipientsId,\n    recipients: [],\n    key: 'suggestionField',\n    label: i18n.t('Assignee')\n  }));\n};\nAssignToDialog.propTypes = {\n  feedbackRecipientsId: propTypes.string,\n  messageType: propTypes.shape({\n    id: propTypes.string\n  }),\n  open: propTypes.bool,\n  updateMessageConversations: propTypes.func,\n  onRequestClose: propTypes.func\n};\nexport default AssignToDialog;","function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == typeof i ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != typeof t || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != typeof i) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nimport i18n from '@dhis2/d2-i18n';\nimport Divider from 'material-ui/Divider';\nimport FlatButton from 'material-ui/FlatButton';\nimport IconButton from 'material-ui/IconButton';\nimport IconMenu from 'material-ui/IconMenu';\nimport MenuItem from 'material-ui/MenuItem';\nimport Subheader from 'material-ui/Subheader';\nimport MoreVertIcon from 'material-ui/svg-icons/navigation/more-vert';\nimport ArrowDropRight from 'material-ui/svg-icons/navigation-arrow-drop-right';\nimport Assignment from 'material-ui-icons/Assignment';\nimport Delete from 'material-ui-icons/Delete';\nimport Done from 'material-ui-icons/Done';\nimport MarkUnread from 'material-ui-icons/Markunread';\nimport propTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { compose } from 'recompose';\nimport { clearCheckedIds, clearSelectedMessageConversation, deleteMessageConversations, updateMessageConversations, markMessageConversations } from '../../actions/index.js';\nimport extendedChoices from '../../constants/extendedChoices.js';\nimport history from '../../utils/history.js';\nimport AssignToDialog from './AssignToDialog.js';\nimport DialogWithReduxState from './DialogWithReduxState.js';\nconst multiSelectDisplayLimit = 99;\nconst styles = {\n  canvas: {\n    width: '400px',\n    display: 'flex'\n  },\n  extendedChoices: {\n    display: 'flex',\n    justifyContent: 'flex-start'\n  },\n  nrSelected: {\n    padding: '0px 0px',\n    overflow: 'hidden',\n    textOverflow: 'ellipsis',\n    whiteSpace: 'nowrap'\n  }\n};\nclass ToolbarExtendedChoicePicker extends Component {\n  constructor(props) {\n    super(props);\n    _defineProperty(this, \"getIds\", () => this.props.selectedMessageConversation && this.props.checkedIds.length === 0 ? [this.props.selectedMessageConversation.id] : this.props.checkedIds.map(id => id.id));\n    _defineProperty(this, \"updateMessageConversation\", (identifier, value) => {\n      const {\n        selectedMessageType: messageType,\n        selectedMessageConversation\n      } = this.props;\n      const messageConversationIds = this.getIds();\n      this.props.updateMessageConversations({\n        messageConversationIds,\n        identifier,\n        value,\n        messageType,\n        selectedMessageConversation\n      });\n      this.props.checkedIds.length > 0 && this.props.clearCheckedIds();\n    });\n    _defineProperty(this, \"markMessageConversations\", mode => {\n      const ids = this.getIds();\n      this.props.markMessageConversations(mode, ids, this.props.selectedMessageType);\n      this.props.checkedIds.length > 0 && this.props.clearCheckedIds();\n    });\n    _defineProperty(this, \"toggleDialog\", () => {\n      this.setState({\n        dialogOpen: !this.state.dialogOpen\n      });\n    });\n    this.state = {\n      checkedItems: false,\n      dialogOpen: false,\n      assignToOpen: false\n    };\n  }\n  render() {\n    const messageConversation = this.props.selectedMessageConversation;\n    const multiSelect = this.props.checkedIds.length > 0;\n    const display = multiSelect || messageConversation !== undefined;\n    const actionButtons = /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(FlatButton, {\n      label: i18n.t('Cancel'),\n      primary: true,\n      onClick: () => this.toggleDialog()\n    }), /*#__PURE__*/React.createElement(FlatButton, {\n      label: i18n.t('Submit'),\n      primary: true,\n      keyboardFocused: true,\n      onClick: () => {\n        this.props.deleteMessageConversations(this.getIds(), this.props.selectedMessageType);\n        this.props.clearCheckedIds();\n        this.toggleDialog();\n        if (this.props.selectedMessageConversation) {\n          this.props.clearSelectedMessageConversation();\n          history.push(`/${this.props.selectedMessageType.id}`);\n        }\n      }\n    }));\n    const displayNumberOfCheckedIds = this.props.checkedIds.length > multiSelectDisplayLimit ? `${multiSelectDisplayLimit}+` : this.props.checkedIds.length;\n    return display ? /*#__PURE__*/React.createElement(\"div\", {\n      style: styles.canvas\n    }, /*#__PURE__*/React.createElement(DialogWithReduxState, {\n      title: i18n.t('Are you sure you want to delete selected message conversation(s)?'),\n      actions: actionButtons,\n      modal: false,\n      open: this.state.dialogOpen,\n      onRequestClose: this.toggleDialog\n    }), /*#__PURE__*/React.createElement(AssignToDialog, {\n      open: this.state.assignToOpen,\n      onRequestClose: () => this.setState({\n        assignToOpen: !this.state.assignToOpen\n      }),\n      updateMessageConversations: id => this.updateMessageConversation('ASSIGNEE', id),\n      messageType: this.props.selectedMessageType,\n      feedbackRecipientsId: this.props.feedbackRecipientsId\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      style: styles.extendedChoices\n    }, /*#__PURE__*/React.createElement(IconButton, {\n      tooltip: i18n.t('Delete selected'),\n      onClick: () => {\n        this.toggleDialog();\n      }\n    }, /*#__PURE__*/React.createElement(Delete, null)), /*#__PURE__*/React.createElement(IconButton, {\n      tooltip: i18n.t('Mark selected as unread'),\n      onClick: () => {\n        this.markMessageConversations('unread');\n      }\n    }, /*#__PURE__*/React.createElement(MarkUnread, null)), /*#__PURE__*/React.createElement(IconButton, {\n      tooltip: i18n.t('Mark selected as read'),\n      onClick: () => {\n        this.markMessageConversations('read');\n      }\n    }, /*#__PURE__*/React.createElement(Done, null)), this.props.displayExtendedChoices && /*#__PURE__*/React.createElement(IconButton, {\n      onClick: () => this.setState({\n        assignToOpen: !this.state.assignToOpen\n      }),\n      tooltip: i18n.t('Assign selected')\n    }, /*#__PURE__*/React.createElement(Assignment, null)), /*#__PURE__*/React.createElement(IconMenu, {\n      iconButtonElement: /*#__PURE__*/React.createElement(IconButton, null, /*#__PURE__*/React.createElement(MoreVertIcon, null)),\n      anchorOrigin: {\n        horizontal: 'left',\n        vertical: 'top'\n      },\n      targetOrigin: {\n        horizontal: 'left',\n        vertical: 'top'\n      }\n    }, /*#__PURE__*/React.createElement(MenuItem, {\n      key: 'markFollowUp',\n      value: 'markFollowUp',\n      primaryText: i18n.t('Mark for followup'),\n      onClick: () => this.updateMessageConversation('FOLLOW_UP', true)\n    }), /*#__PURE__*/React.createElement(MenuItem, {\n      key: 'clearFollowUp',\n      value: 'clearFollowUp',\n      primaryText: i18n.t('Clear followup'),\n      onClick: () => this.updateMessageConversation('FOLLOW_UP', false)\n    }), this.props.displayExtendedChoices && /*#__PURE__*/React.createElement(Divider, null), this.props.displayExtendedChoices && /*#__PURE__*/React.createElement(MenuItem, {\n      key: 'clearAssigned',\n      value: 'clearAssigned',\n      primaryText: i18n.t('Clear assignee'),\n      onClick: () => this.updateMessageConversation('ASSIGNEE', undefined)\n    }), this.props.displayExtendedChoices && /*#__PURE__*/React.createElement(MenuItem, {\n      primaryText: i18n.t('Set status'),\n      key: 'setStatus',\n      rightIcon: /*#__PURE__*/React.createElement(ArrowDropRight, null),\n      menuItems: extendedChoices.STATUS.map(elem => /*#__PURE__*/React.createElement(MenuItem, {\n        key: `${elem.key}_status`,\n        value: elem.value,\n        primaryText: elem.primaryText,\n        onClick: () => this.updateMessageConversation('STATUS', elem.key)\n      }))\n    }), this.props.displayExtendedChoices && /*#__PURE__*/React.createElement(MenuItem, {\n      primaryText: i18n.t('Set priority'),\n      key: 'setPriority',\n      rightIcon: /*#__PURE__*/React.createElement(ArrowDropRight, null),\n      menuItems: extendedChoices.PRIORITY.map(elem => /*#__PURE__*/React.createElement(MenuItem, {\n        key: `${elem.key}_priority`,\n        value: elem.value,\n        primaryText: elem.primaryText,\n        onClick: () => this.updateMessageConversation('PRIORITY', elem.key)\n      }))\n    }))), multiSelect && /*#__PURE__*/React.createElement(Subheader, {\n      style: styles.nrSelected\n    }, `${displayNumberOfCheckedIds} ${i18n.t('selected')}`)) : /*#__PURE__*/React.createElement(\"div\", null);\n  }\n}\nToolbarExtendedChoicePicker.propTypes = {\n  checkedIds: propTypes.array,\n  clearCheckedIds: propTypes.func,\n  clearSelectedMessageConversation: propTypes.func,\n  deleteMessageConversations: propTypes.func,\n  displayExtendedChoices: propTypes.bool,\n  feedbackRecipientsId: propTypes.string,\n  markMessageConversations: propTypes.func,\n  selectedMessageConversation: propTypes.object,\n  selectedMessageType: propTypes.object,\n  updateMessageConversations: propTypes.func\n};\nconst mapStateToProps = state => ({\n  selectedMessageType: state.messaging.selectedMessageType,\n  selectedMessageConversation: state.messaging.selectedMessageConversation,\n  checkedIds: state.messaging.checkedIds,\n  feedbackRecipientsId: state.messaging.feedbackRecipientsId\n});\nexport default compose(connect(mapStateToProps, {\n  clearCheckedIds,\n  clearSelectedMessageConversation,\n  deleteMessageConversations,\n  updateMessageConversations,\n  markMessageConversations\n}, null, {\n  pure: false\n}))(ToolbarExtendedChoicePicker);","function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == typeof i ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != typeof t || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != typeof i) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nimport i18n from '@dhis2/d2-i18n';\nimport Checkbox from 'material-ui/Checkbox/Checkbox';\nimport FlatButton from 'material-ui/FlatButton';\nimport IconButton from 'material-ui/IconButton';\nimport IconMenu from 'material-ui/IconMenu';\nimport MenuItem from 'material-ui/MenuItem';\nimport Paper from 'material-ui/Paper';\nimport SelectField from 'material-ui/SelectField';\nimport Subheader from 'material-ui/Subheader';\nimport MoreVertIcon from 'material-ui/svg-icons/navigation/more-vert';\nimport TextField from 'material-ui/TextField';\nimport CreateMessageIcon from 'material-ui-icons/Add';\nimport NavigationBack from 'material-ui-icons/ArrowBack';\nimport ViewList from 'material-ui-icons/ViewHeadline';\nimport ViewFancy from 'material-ui-icons/ViewList';\nimport propTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport extendedChoices from '../../constants/extendedChoices.js';\nimport theme from '../../styles/theme.js';\nimport { debounce } from '../../utils/helpers.js';\nimport history from '../../utils/history.js';\nimport ToolbarExtendedChoicePicker from './ToolbarExtendedChoicePicker.js';\nconst headerHeight = '48px';\nconst searchDelay = 300;\nconst styles = {\n  canvas(checkedOptions) {\n    return {\n      display: 'flex',\n      justifyContent: 'flex-start',\n      alignItems: 'center',\n      backgroundColor: checkedOptions ? theme.palette.blue50 : theme.palette.accent2Color,\n      zIndex: 10\n    };\n  },\n  checkedOption: {\n    display: 'flex',\n    justifyContent: 'flex-start',\n    minWidth: '200px',\n    margin: '6px 0'\n  },\n  filterControl: {\n    flex: 2,\n    height: headerHeight,\n    marginRight: 16,\n    maxWidth: 256\n  },\n  rightHandCanvas: {\n    flex: '2 0',\n    display: 'flex',\n    paddingLeft: 16\n  },\n  // IE11 has buggy support for `justifyContent: flex-end;`\n  // to achieve the same result we use a spacer div\n  ie11Spacer: {\n    flexGrow: 1\n  },\n  iconMenu: {\n    width: '30px',\n    display: 'flex'\n  }\n};\nclass Toolbar extends Component {\n  constructor() {\n    super(...arguments);\n    _defineProperty(this, \"state\", {\n      lastMessageFilter: ''\n    });\n    _defineProperty(this, \"debouncedSearch\", debounce(this.search, searchDelay));\n  }\n  search(messageFilter) {\n    if (this.props.selectedMessageType && this.state.lastMessageFilter !== messageFilter) {\n      this.props.loadMessageConversations(this.props.selectedMessageType, this.props.selectedMessageType.id);\n      this.setState({\n        lastMessageFilter: messageFilter\n      });\n    }\n  }\n  componentDidUpdate(prevProps) {\n    if (prevProps.selectedMessageType && this.props.selectedMessageType.id !== prevProps.selectedMessageType.id) {\n      this.debouncedSearch('');\n      this.props.messageFilter !== undefined && this.props.setFilter(undefined, 'MESSAGE');\n      this.props.statusFilter !== undefined && this.props.setFilter(undefined, 'STATUS');\n      this.props.priorityFilter !== undefined && this.props.setFilter(undefined, 'PRIORITY');\n      this.props.assignedToMeFilter && this.props.setFilter(false, 'ASSIGNED_TO_ME');\n      this.props.markedForFollowUpFilter && this.props.setFilter(false, 'MARKED_FOR_FOLLOWUP');\n      this.props.unreadFilter && this.props.setFilter(false, 'UNREAD');\n    }\n    if (this.props.selectedMessageType !== undefined && !this.props.selectedMessageType.loading && (prevProps.statusFilter !== this.props.statusFilter || prevProps.priorityFilter !== this.props.priorityFilter || prevProps.assignedToMeFilter !== this.props.assignedToMeFilter || prevProps.markedForFollowUpFilter !== this.props.markedForFollowUpFilter || prevProps.unreadFilter !== this.props.unreadFilter || prevProps.selectedMessageType === undefined || prevProps.selectedMessageType.id !== this.props.selectedMessageType.id)) {\n      this.props.loadMessageConversations(this.props.selectedMessageType, this.props.selectedMessageType.id);\n    }\n  }\n  render() {\n    const id = this.props.id;\n    const displayExtendedChoices = this.props.displayExtendedChoices;\n    const checkedOptions = this.props.checkedOptions;\n    const displaySearch = !this.props.wideview || this.props.selectedMessageConversation === undefined && id !== 'create';\n    return /*#__PURE__*/React.createElement(Paper, {\n      style: styles.canvas(checkedOptions)\n    }, /*#__PURE__*/React.createElement(\"div\", null, !checkedOptions && /*#__PURE__*/React.createElement(FlatButton, {\n      style: styles.checkedOption,\n      icon: /*#__PURE__*/React.createElement(CreateMessageIcon, null),\n      onClick: () => history.push('/PRIVATE/create'),\n      label: i18n.t('Compose')\n    }), checkedOptions && /*#__PURE__*/React.createElement(FlatButton, {\n      style: styles.checkedOption,\n      icon: /*#__PURE__*/React.createElement(NavigationBack, null),\n      onClick: () => this.props.clearCheckedIds(),\n      label: i18n.t('Deselect all')\n    })), /*#__PURE__*/React.createElement(ToolbarExtendedChoicePicker, {\n      displayExtendedChoices: displayExtendedChoices\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      style: styles.rightHandCanvas\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      style: styles.ie11Spacer\n    }), displayExtendedChoices && displaySearch && !checkedOptions && /*#__PURE__*/React.createElement(SelectField, {\n      style: styles.filterControl,\n      labelStyle: {\n        color: this.props.statusFilter === undefined ? 'lightGray' : 'black',\n        top: this.props.statusFilter === undefined ? '-15px' : '-2px'\n      },\n      selectedMenuItemStyle: {\n        color: theme.palette.primary1Color\n      },\n      floatingLabelText: this.props.statusFilter === undefined ? i18n.t('Status') : '',\n      floatingLabelStyle: {\n        top: '15px'\n      },\n      iconStyle: {\n        top: this.props.statusFilter === undefined ? '-15px' : '0px'\n      },\n      value: this.props.statusFilter,\n      onChange: (event, key, payload) => {\n        this.props.setFilter(payload === null ? undefined : payload, 'STATUS');\n      }\n    }, /*#__PURE__*/React.createElement(MenuItem, {\n      key: null,\n      value: null,\n      primaryText: ''\n    }), extendedChoices.STATUS.map(elem => /*#__PURE__*/React.createElement(MenuItem, {\n      key: elem.key,\n      value: elem.value,\n      primaryText: elem.primaryText\n    }))), displayExtendedChoices && displaySearch && !checkedOptions && /*#__PURE__*/React.createElement(SelectField, {\n      style: styles.filterControl,\n      labelStyle: {\n        color: this.props.priorityFilter === undefined ? 'lightGray' : 'black',\n        top: this.props.priorityFilter === undefined ? '-15px' : '-2px'\n      },\n      selectedMenuItemStyle: {\n        color: theme.palette.primary1Color\n      },\n      floatingLabelText: this.props.priorityFilter === undefined ? i18n.t('Priority') : '',\n      floatingLabelStyle: {\n        top: '15px'\n      },\n      iconStyle: {\n        top: this.props.priorityFilter === undefined ? '-15px' : '0px'\n      },\n      value: this.props.priorityFilter,\n      onChange: (event, key, payload) => {\n        this.props.setFilter(payload === null ? undefined : payload, 'PRIORITY');\n      }\n    }, /*#__PURE__*/React.createElement(MenuItem, {\n      key: null,\n      value: null,\n      primaryText: ''\n    }), extendedChoices.PRIORITY.map(elem => /*#__PURE__*/React.createElement(MenuItem, {\n      key: elem.key,\n      value: elem.value,\n      primaryText: elem.primaryText\n    }))), !checkedOptions && displaySearch && /*#__PURE__*/React.createElement(TextField, {\n      style: styles.filterControl,\n      fullWidth: true,\n      hintText: i18n.t('Search'),\n      value: this.props.messageFilter || '',\n      onChange: (event, messageFilter) => {\n        this.debouncedSearch(messageFilter);\n        this.props.setFilter(messageFilter, 'MESSAGE');\n      },\n      type: \"search\"\n    }), !checkedOptions && displaySearch && /*#__PURE__*/React.createElement(IconMenu, {\n      iconButtonElement: /*#__PURE__*/React.createElement(IconButton, null, /*#__PURE__*/React.createElement(MoreVertIcon, null)),\n      anchorOrigin: {\n        horizontal: 'right',\n        vertical: 'top'\n      },\n      targetOrigin: {\n        horizontal: 'right',\n        vertical: 'top'\n      },\n      style: styles.iconMenu,\n      menuStyle: {\n        overflowX: 'hidden'\n      }\n    }, /*#__PURE__*/React.createElement(Subheader, {\n      style: {\n        padding: '0px 16px'\n      }\n    }, i18n.t('Set filter')), this.props.displayExtendedChoices && /*#__PURE__*/React.createElement(Checkbox, {\n      style: {\n        padding: '0px 16px'\n      },\n      key: 'assignedToMeFilter',\n      label: i18n.t('Assigned to me'),\n      checked: this.props.assignedToMeFilter,\n      onClick: () => {\n        this.props.setFilter(!this.props.assignedToMeFilter, 'ASSIGNED_TO_ME');\n      }\n    }), /*#__PURE__*/React.createElement(Checkbox, {\n      style: {\n        padding: '0px 16px'\n      },\n      key: 'markedForFollowUpFilter',\n      label: i18n.t('Marked for followup'),\n      checked: this.props.markedForFollowUpFilter,\n      onClick: () => {\n        this.props.setFilter(!this.props.markedForFollowUpFilter, 'MARKED_FOR_FOLLOWUP');\n      }\n    }), /*#__PURE__*/React.createElement(Checkbox, {\n      style: {\n        padding: '0px 16px'\n      },\n      key: 'unreadFilter',\n      label: i18n.t('Unread messages'),\n      checked: this.props.unreadFilter,\n      onClick: () => {\n        this.props.setFilter(!this.props.unreadFilter, 'UNREAD');\n      }\n    })), /*#__PURE__*/React.createElement(FlatButton, {\n      style: {\n        width: '50px',\n        alignSelf: 'center'\n      },\n      icon: !this.props.wideview ? /*#__PURE__*/React.createElement(ViewList, null) : /*#__PURE__*/React.createElement(ViewFancy, null),\n      onClick: () => this.props.toogleWideview()\n    })));\n  }\n}\nToolbar.propTypes = {\n  assignedToMeFilter: propTypes.bool,\n  checkedOptions: propTypes.bool,\n  clearCheckedIds: propTypes.func,\n  displayExtendedChoices: propTypes.bool,\n  id: propTypes.string,\n  loadMessageConversations: propTypes.func,\n  markedForFollowUpFilter: propTypes.bool,\n  messageFilter: propTypes.string,\n  priorityFilter: propTypes.string,\n  selectedMessageConversation: propTypes.object,\n  selectedMessageType: propTypes.object,\n  setFilter: propTypes.func,\n  statusFilter: propTypes.string,\n  toogleWideview: propTypes.func,\n  unreadFilter: propTypes.bool,\n  wideview: propTypes.bool\n};\nexport default Toolbar;","import i18n from '@dhis2/d2-i18n';\nimport Checkbox from 'material-ui/Checkbox';\nimport Paper from 'material-ui/Paper';\nimport Subheader from 'material-ui/Subheader/Subheader';\nimport propTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { compose } from 'recompose';\nimport { setAllChecked, clearCheckedIds } from '../../actions/index.js';\nimport { fontFamily } from '../../constants/development.js';\nimport theme from '../../styles/theme.js';\nconst fontSize = '16px';\nconst styles = {\n  canvas(backgroundColor) {\n    return {\n      backgroundColor,\n      display: 'flex',\n      transition: 'all 0.2s ease-in-out',\n      boxSizing: 'border-box',\n      position: 'relative',\n      whiteSpace: 'nowrap',\n      alignSelf: 'center',\n      boxShadow: 'none',\n      borderBottom: '1px solid #dfdfdf'\n    };\n  },\n  checkBox: {\n    flex: '0 0 32px',\n    display: 'flex',\n    alignSelf: 'center',\n    paddingLeft: '12px'\n  },\n  sender: {\n    fontFamily,\n    fontSize,\n    flex: 3,\n    overflow: 'hidden',\n    textOverflow: 'ellipsis',\n    whiteSpace: 'nowrap',\n    color: 'black',\n    paddingLeft: 10,\n    alignSelf: 'center'\n  },\n  subject: {\n    flex: 8,\n    overflow: 'hidden',\n    textOverflow: 'ellipsis',\n    whiteSpace: 'nowrap',\n    fontFamily,\n    fontSize,\n    color: 'black',\n    paddingLeft: 10\n  },\n  extendedLabel: {\n    flex: 2,\n    color: 'black',\n    fontSize,\n    overflow: 'hidden',\n    textOverflow: 'ellipsis',\n    whiteSpace: 'nowrap',\n    padding: '0 0 0 10px'\n  }\n};\nclass MessageConversationListItem extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      cursor: 'auto',\n      allChecked: false\n    };\n  }\n  componentDidUpdate() {\n    if (this.state.allChecked && this.props.checkedIds.length < this.props.messages.length) {\n      this.setState({\n        allChecked: false\n      });\n    }\n  }\n  render() {\n    const displayExtendedChoices = this.props.displayExtendedChoices;\n    return /*#__PURE__*/React.createElement(Paper, {\n      style: styles.canvas(theme.palette.canvasColor)\n    }, /*#__PURE__*/React.createElement(Checkbox, {\n      checked: this.state.allChecked,\n      style: styles.checkBox,\n      onCheck: () => {\n        this.state.allChecked ? this.props.clearCheckedIds() : this.props.setAllChecked(this.props.messages.map(child => ({\n          id: child.id\n        })));\n        this.setState({\n          allChecked: !this.state.allChecked\n        });\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      style: styles.sender\n    }, i18n.t('Sender')), /*#__PURE__*/React.createElement(Subheader, {\n      style: styles.subject\n    }, i18n.t('Subject')), displayExtendedChoices && /*#__PURE__*/React.createElement(Subheader, {\n      style: styles.extendedLabel\n    }, i18n.t('Status')), displayExtendedChoices && /*#__PURE__*/React.createElement(Subheader, {\n      style: styles.extendedLabel\n    }, i18n.t('Priority')), this.props.notification && /*#__PURE__*/React.createElement(Subheader, {\n      style: styles.extendedLabel\n    }, i18n.t('Assignee')), /*#__PURE__*/React.createElement(Subheader, {\n      style: styles.extendedLabel\n    }, i18n.t('Date')));\n  }\n}\nMessageConversationListItem.propTypes = {\n  checkedIds: propTypes.array,\n  clearCheckedIds: propTypes.func,\n  displayExtendedChoices: propTypes.bool,\n  messages: propTypes.array,\n  notification: propTypes.bool,\n  setAllChecked: propTypes.func\n};\nconst mapStateToProps = state => ({\n  checkedIds: state.messaging.checkedIds,\n  isInFeedbackRecipientGroup: state.messaging.isInFeedbackRecipientGroup\n});\nexport default compose(connect(mapStateToProps, {\n  setAllChecked,\n  clearCheckedIds\n}))(MessageConversationListItem);","import Subheader from 'material-ui/Subheader/Subheader';\nimport propTypes from 'prop-types';\nimport React from 'react';\nconst styles = {\n  subheaderTitle: {\n    height: '32px',\n    color: 'black',\n    paddingLeft: 0,\n    paddingRight: 16\n  },\n  subheader(color, fontWeight) {\n    return {\n      height: '32px',\n      overflow: 'hidden',\n      textOverflow: 'ellipsis',\n      whiteSpace: 'nowrap',\n      padding: 0,\n      color,\n      fontWeight\n    };\n  }\n};\nconst ExtendedChoiceLabel = _ref => {\n  let {\n    showTitle,\n    title,\n    label,\n    color,\n    fontWeight\n  } = _ref;\n  const displayLabel = label && label !== 'NONE' ? title === 'Assignee' ? label : `${label.charAt(0)}${label.toLowerCase().substr(1, label.length)}` : '-';\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      flex: 2,\n      paddingLeft: 10,\n      maxWidth: 200\n    }\n  }, showTitle && /*#__PURE__*/React.createElement(Subheader, {\n    style: styles.subheaderTitle\n  }, \" \", title, \" \"), /*#__PURE__*/React.createElement(Subheader, {\n    style: styles.subheader(color, fontWeight)\n  }, displayLabel));\n};\nExtendedChoiceLabel.propTypes = {\n  color: propTypes.string,\n  fontWeight: propTypes.string,\n  label: propTypes.string,\n  showTitle: propTypes.bool,\n  title: propTypes.string\n};\nexport default ExtendedChoiceLabel;","function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == typeof i ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != typeof t || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != typeof i) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nimport i18n from '@dhis2/d2-i18n';\nimport Checkbox from 'material-ui/Checkbox';\nimport Paper from 'material-ui/Paper';\nimport Subheader from 'material-ui/Subheader/Subheader';\nimport Flag from 'material-ui-icons/Flag';\nimport moment from 'moment';\nimport propTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { compose } from 'recompose';\nimport { setChecked, setSelectedMessageConversation, markMessageConversations, clearCheckedIds, setFilter, updateInputFields, clearAttachments } from '../../actions/index.js';\nimport { fontFamily } from '../../constants/development.js';\nimport theme from '../../styles/theme.js';\nimport history from '../../utils/history.js';\nimport ExtendedChoiceLabel from '../Common/ExtendedChoiceLabel.js';\nconst styles = {\n  container(backgroundColor, wideview, cursor) {\n    return {\n      backgroundColor,\n      display: 'flex',\n      transition: 'all 0.2s ease-in-out',\n      cursor: cursor,\n      boxSizing: 'border-box',\n      position: 'relative',\n      whiteSpace: 'nowrap',\n      boxShadow: 'none',\n      borderBottom: '1px solid #dfdfdf',\n      flexWrap: wideview ? 'nowrap' : 'wrap'\n    };\n  },\n  checkBox(wideview) {\n    return {\n      flex: '0 0 32px',\n      display: 'flex',\n      alignSelf: 'center',\n      paddingLeft: wideview ? 12 : 6\n    };\n  },\n  flag: {\n    color: theme.palette.followUp,\n    marginRight: 4\n  },\n  sender(wideview, fontWeight) {\n    return {\n      fontFamily,\n      fontSize: '14px',\n      flex: 3,\n      overflow: 'hidden',\n      textOverflow: 'ellipsis',\n      whiteSpace: 'nowrap',\n      display: 'flex',\n      alignItems: 'center',\n      color: 'black',\n      paddingLeft: wideview ? 10 : 0,\n      fontWeight\n    };\n  },\n  subject(wideview, fontColor, fontWeight) {\n    return {\n      flex: 8,\n      overflow: 'hidden',\n      textOverflow: 'ellipsis',\n      whiteSpace: 'nowrap',\n      paddingLeft: 10,\n      fontFamily,\n      color: fontColor,\n      fontWeight,\n      order: wideview ? 'inherit' : 10,\n      marginTop: wideview ? 0 : -10,\n      flexBasis: wideview ? '0%' : '100%'\n    };\n  },\n  dateFormat(wideview, fontColor, fontWeight) {\n    return {\n      flex: 2,\n      fontFamily,\n      paddingLeft: wideview ? 10 : 0,\n      paddingRight: wideview ? 0 : 10,\n      overflow: 'hidden',\n      textOverflow: 'ellipsis',\n      whiteSpace: 'nowrap',\n      textAlign: wideview ? '' : 'end',\n      color: fontColor,\n      fontWeight\n    };\n  }\n};\nclass MessageConversationListItem extends Component {\n  constructor(props) {\n    super(props);\n    _defineProperty(this, \"onClick\", messageConversation => {\n      this.props.setSelectedMessageConversation(messageConversation);\n      if (messageConversation && !messageConversation.read) {\n        this.props.markMessageConversations('read', [messageConversation.id], this.props.selectedMessageType);\n      }\n      this.props.updateInputFields('', '', []);\n      this.props.attachments.length > 0 && this.props.clearAttachments();\n      history.push(`/${messageConversation.messageType}/${messageConversation.id}`);\n    });\n    _defineProperty(this, \"onMouseEnter\", () => this.setState({\n      cursor: 'pointer',\n      backgroundColor: theme.palette.accent2Color\n    }));\n    _defineProperty(this, \"onMouseLeave\", () => this.setState({\n      cursor: 'auto',\n      backgroundColor: theme.palette.canvasColor\n    }));\n    _defineProperty(this, \"getBackgroundColor\", (messageConversation, checked) => {\n      const selectedMessageConversation = this.props.selectedMessageConversation && messageConversation.id === this.props.selectedMessageConversation.id;\n      if (checked && !selectedMessageConversation) {\n        return theme.palette.blue50;\n      } else if (selectedMessageConversation) {\n        return theme.palette.accent3Color;\n      }\n      return this.state.backgroundColor;\n    });\n    this.state = {\n      backgroundColor: theme.palette.canvasColor,\n      cursor: 'auto'\n    };\n  }\n  render() {\n    const messageConversation = this.props.messageConversation;\n    const title = messageConversation.lastSender ? messageConversation.lastSender.displayName : this.props.selectedMessageType.displayName;\n    const checked = !!this.props.checkedIds.find(x => x.id === messageConversation.id);\n    const displayExtendedChoices = this.props.displayExtendedChoices;\n    const displayTimeDiff = this.props.displayTimeDiff;\n    const today = moment();\n    const messageDate = moment(messageConversation.lastMessage).add(displayTimeDiff);\n    const fontWeight = !messageConversation.read ? 'bold' : '';\n    const fontColor = this.props.messageConversation.read ? 'black' : theme.palette.darkGray;\n    const containerBackgroundColor = this.getBackgroundColor(messageConversation, checked);\n    return /*#__PURE__*/React.createElement(Paper, {\n      style: styles.container(containerBackgroundColor, this.props.wideview, this.state.cursor),\n      onClick: event => {\n        const onClick = event.target.innerText !== undefined && event.target.innerText !== '';\n        if (onClick && !this.props.settingSelectedMessageConversation) {\n          this.onClick(messageConversation);\n          this.props.checkedIds.length > 0 && this.props.clearCheckedIds();\n          if (this.props.wideview && (this.props.messageFilter !== undefined || this.props.priorityFilter !== undefined || this.props.statusFilter !== undefined)) {\n            this.props.setFilter(undefined, 'MESSAGE');\n          }\n        }\n      },\n      onMouseEnter: this.onMouseEnter,\n      onMouseLeave: this.onMouseLeave\n    }, /*#__PURE__*/React.createElement(Checkbox, {\n      checked: checked,\n      style: styles.checkBox(this.props.wideview),\n      onCheck: () => {\n        this.props.setChecked(messageConversation, !checked);\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      style: styles.sender(this.props.wideview, fontWeight)\n    }, messageConversation.followUp && /*#__PURE__*/React.createElement(Flag, {\n      style: styles.flag\n    }), /*#__PURE__*/React.createElement(\"span\", null, title)), /*#__PURE__*/React.createElement(Subheader, {\n      style: styles.subject(this.props.wideview, fontColor, fontWeight)\n    }, messageConversation.subject), displayExtendedChoices && /*#__PURE__*/React.createElement(ExtendedChoiceLabel, {\n      showTitle: false,\n      title: i18n.t('Status'),\n      color: fontColor,\n      fontWeight: fontWeight,\n      label: messageConversation.status\n    }), displayExtendedChoices && /*#__PURE__*/React.createElement(ExtendedChoiceLabel, {\n      showTitle: false,\n      title: i18n.t('Priority'),\n      color: fontColor,\n      fontWeight: fontWeight,\n      label: messageConversation.priority\n    }), this.props.notification && this.props.wideview && /*#__PURE__*/React.createElement(ExtendedChoiceLabel, {\n      showTitle: false,\n      title: i18n.t('Assignee'),\n      color: fontColor,\n      fontWeight: fontWeight,\n      label: messageConversation.assignee ? messageConversation.assignee.displayName : undefined\n    }), /*#__PURE__*/React.createElement(Subheader, {\n      style: styles.dateFormat(this.props.wideview, fontColor, fontWeight)\n    }, today.diff(messageDate, 'hours') < 72 ? messageDate.from(today) : today.year() === messageDate.year() ? messageDate.format('MMM DD') : messageDate.format('ll')));\n  }\n}\nMessageConversationListItem.propTypes = {\n  attachments: propTypes.array,\n  checkedIds: propTypes.array,\n  clearAttachments: propTypes.func,\n  clearCheckedIds: propTypes.func,\n  displayExtendedChoices: propTypes.bool,\n  displayTimeDiff: propTypes.number,\n  markMessageConversations: propTypes.func,\n  messageConversation: propTypes.object,\n  messageFilter: propTypes.string,\n  notification: propTypes.bool,\n  priorityFilter: propTypes.string,\n  selectedMessageConversation: propTypes.object,\n  selectedMessageType: propTypes.object,\n  setChecked: propTypes.func,\n  setFilter: propTypes.func,\n  setSelectedMessageConversation: propTypes.func,\n  settingSelectedMessageConversation: propTypes.bool,\n  statusFilter: propTypes.string,\n  updateInputFields: propTypes.func,\n  wideview: propTypes.bool\n};\nconst mapStateToProps = state => ({\n  selectedMessageConversation: state.messaging.selectedMessageConversation,\n  settingSelectedMessageConversation: state.messaging.settingSelectedMessageConversation,\n  selectedMessageType: state.messaging.selectedMessageType,\n  checkedIds: state.messaging.checkedIds,\n  displayTimeDiff: state.messaging.displayTimeDiff,\n  messageFilter: state.messaging.messageFilter,\n  statusFilter: state.messaging.statusFilter,\n  priorityFilter: state.messaging.priorityFilter,\n  attachments: state.messaging.attachments\n});\nexport default compose(connect(mapStateToProps, {\n  setChecked,\n  setSelectedMessageConversation,\n  markMessageConversations,\n  clearCheckedIds,\n  setFilter,\n  updateInputFields,\n  clearAttachments\n}, null, {\n  pure: false\n}))(MessageConversationListItem);","function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == typeof i ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != typeof t || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != typeof i) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nimport i18n from '@dhis2/d2-i18n';\nimport CircularProgress from 'material-ui/CircularProgress';\nimport Subheader from 'material-ui/Subheader/Subheader';\nimport propTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { compose } from 'recompose';\nimport { loadMessageConversations } from '../../actions/index.js';\nimport { messagePanelContainer } from '../../styles/style.js';\nimport theme from '../../styles/theme.js';\nimport { dedupeById, debounce } from '../../utils/helpers.js';\nimport ListItemHeader from './ListItemHeader.js';\nimport MessageConversationListItem from './MessageConversationListItem.js';\nconst NOTIFICATIONS = ['VALIDATION_RESULT', 'TICKET'];\nconst bottomEmptyHeight = 50;\nconst styles = {\n  canvas(wideview) {\n    return {\n      flex: '1 0',\n      maxWidth: wideview ? 'none' : '350px',\n      minWidth: wideview ? 'none' : '250px',\n      borderRightStyle: wideview ? '' : 'solid',\n      ...messagePanelContainer\n    };\n  },\n  loading: {\n    backgroundColor: theme.palette.accent2Color,\n    height: `${bottomEmptyHeight}px`,\n    transition: 'all 0.2s ease-in-out',\n    display: 'flex',\n    justifyContent: 'center'\n  }\n};\nclass MessageConversationList extends Component {\n  constructor() {\n    super(...arguments);\n    _defineProperty(this, \"onScroll\", messageType => {\n      const messageList = document.getElementById('messagelist');\n      if (!this.props.selectedMessageType.loading && this.isBottom(messageList) && messageType.loaded < messageType.total) {\n        this.props.loadMessageConversations(messageType, messageType.id, true);\n      }\n    });\n    _defineProperty(this, \"debouncedOnScroll\", debounce(this.onScroll, 150));\n    _defineProperty(this, \"isBottom\", el => el.scrollHeight - el.scrollTop < window.outerHeight);\n  }\n  render() {\n    const messages = dedupeById(this.props.messageConversations[this.props.selectedMessageType.id]);\n    const messageType = this.props.selectedMessageType ? this.props.selectedMessageType : '';\n    const selectedValue = this.props.selectedMessageConversation ? this.props.selectedMessageConversation.id : '';\n    const notification = !!(NOTIFICATIONS.indexOf(messageType.id) + 1);\n    return /*#__PURE__*/React.createElement(\"div\", {\n      id: 'messagelist',\n      onScroll: () => this.debouncedOnScroll(this.props.selectedMessageType),\n      style: styles.canvas(this.props.wideview)\n    }, this.props.wideview && /*#__PURE__*/React.createElement(ListItemHeader, {\n      notification: notification,\n      displayExtendedChoices: this.props.displayExtendedChoices,\n      messages: messages\n    }), messages && messages.length !== 0 ? messages.map(child => /*#__PURE__*/React.createElement(MessageConversationListItem, {\n      key: child.id,\n      messageConversation: child,\n      wideview: this.props.wideview,\n      selectedValue: selectedValue,\n      notification: notification,\n      displayExtendedChoices: this.props.displayExtendedChoices\n    })) : !this.props.selectedMessageType.loading && /*#__PURE__*/React.createElement(Subheader, null, i18n.t(`No messages in '{{messageType}}'`, {\n      messageType: messageType.displayName\n    })), this.props.selectedMessageType.loading && /*#__PURE__*/React.createElement(\"div\", {\n      style: styles.loading\n    }, /*#__PURE__*/React.createElement(CircularProgress, {\n      style: {\n        marginTop: '10px'\n      },\n      color: theme.palette.primary1Color\n    })));\n  }\n}\nMessageConversationList.propTypes = {\n  displayExtendedChoices: propTypes.bool,\n  loadMessageConversations: propTypes.func,\n  messageConversations: propTypes.object,\n  selectedMessageConversation: propTypes.object,\n  selectedMessageType: propTypes.shape({\n    id: propTypes.string,\n    loading: propTypes.bool\n  }),\n  wideview: propTypes.bool\n};\nconst mapStateToProps = state => ({\n  messageTypes: state.messaging.messageTypes,\n  messageFilter: state.messaging.messageFilter,\n  statusFilter: state.messaging.statusFilter,\n  priorityFilter: state.messaging.priorityFilter,\n  messageConversations: state.messaging.messageConversations,\n  selectedMessageConversation: state.messaging.selectedMessageConversation,\n  selectedMessageType: state.messaging.selectedMessageType\n});\nexport default compose(connect(mapStateToProps, {\n  loadMessageConversations\n}, null, {\n  pure: false\n}))(MessageConversationList);","function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == typeof i ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != typeof t || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != typeof i) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nimport i18n from '@dhis2/d2-i18n';\nimport Badge from 'material-ui/Badge';\nimport CircularProgress from 'material-ui/CircularProgress';\nimport Subheader from 'material-ui/Subheader/Subheader';\nimport propTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport theme from '../../styles/theme.js';\nclass MessageTypeItem extends Component {\n  constructor(props) {\n    super(props);\n    _defineProperty(this, \"onClick\", () => {\n      this.props.onClick();\n    });\n    _defineProperty(this, \"onMouseEnter\", () => {\n      this.setHoverText();\n      this.setState({\n        cursor: 'pointer'\n      });\n    });\n    _defineProperty(this, \"onMouseLeave\", () => {\n      this.setNeutralText();\n      this.setState({\n        cursor: 'auto'\n      });\n    });\n    _defineProperty(this, \"setNeutralText\", () => this.setTextColor(theme.palette.accent2Color));\n    _defineProperty(this, \"setHoverText\", () => this.setTextColor(theme.palette.accent3Color));\n    _defineProperty(this, \"setTextColor\", color => {\n      this.setState({\n        backgroundColor: color\n      });\n    });\n    _defineProperty(this, \"getBackgroundColor\", (selectedValue, id) => selectedValue && id === selectedValue.id ? theme.palette.accent3Color : this.state.backgroundColor);\n    this.state = {\n      backgroundColor: theme.palette.accent2Color,\n      textColor: theme.palette.darkGray\n    };\n  }\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      role: \"presentation\",\n      style: {\n        ...this.state,\n        backgroundColor: this.getBackgroundColor(this.props.selectedMessageType, this.props.messageType.id),\n        cursor: this.state.cursor,\n        alignItems: 'center',\n        height: '49px',\n        display: 'flex',\n        flexDirection: 'row',\n        justifyContent: 'space-between'\n      },\n      onMouseEnter: this.onMouseEnter,\n      onMouseLeave: this.onMouseLeave,\n      onClick: () => this.onClick()\n    }, /*#__PURE__*/React.createElement(Subheader, {\n      style: {\n        marginLeft: '5px',\n        fontSize: this.props.selectedMessageType && this.props.messageType.id === this.props.selectedMessageType.id ? '18px' : '16px',\n        overflow: 'hidden',\n        textOverflow: 'ellipsis',\n        whiteSpace: 'nowrap',\n        color: this.props.selectedMessageType && this.props.messageType.id === this.props.selectedMessageType.id ? theme.palette.primary1Color : this.state.textColor\n      }\n    }, i18n.t(this.props.messageType.displayName)), this.props.loading ? /*#__PURE__*/React.createElement(CircularProgress, {\n      style: {\n        marginRight: '10px'\n      },\n      color: theme.palette.primary1Color,\n      size: 24\n    }) : this.props.messageType.unread > 0 && /*#__PURE__*/React.createElement(Badge, {\n      style: {\n        marginTop: '12px',\n        marginRight: '5px'\n      },\n      badgeContent: this.props.messageType.unread > 100 ? '99+' : this.props.messageType.unread,\n      secondary: true,\n      badgeStyle: {\n        backgroundColor: '#439E8E'\n      }\n    }));\n  }\n}\nMessageTypeItem.propTypes = {\n  loading: propTypes.bool,\n  messageType: propTypes.object,\n  selectedMessageType: propTypes.object,\n  onClick: propTypes.func\n};\nexport default MessageTypeItem;","import i18n from '@dhis2/d2-i18n';\nimport Divider from 'material-ui/Divider';\nimport { List } from 'material-ui/List';\nimport Toggle from 'material-ui/Toggle';\nimport moment from 'moment';\nimport propTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { compose } from 'recompose';\nimport { setSelectedMessageType, clearCheckedIds } from '../../actions/index.js';\nimport theme from '../../styles/theme.js';\nimport history from '../../utils/history.js';\nimport MessageTypeItem from './MessageTypeItem.js';\nconst styles = {\n  canvas: {\n    display: 'flex',\n    flexDirection: 'column',\n    justifyContent: 'space-between',\n    height: 'calc(100vh - 95px)',\n    borderLeftStyle: 'solid',\n    borderLeftWidth: '0.5px',\n    borderLeftColor: theme.palette.accent4Color,\n    borderRightStyle: 'solid',\n    borderRightWidth: '1px',\n    borderRightColor: theme.palette.accent4Color,\n    overflowY: 'auto',\n    overflowX: 'hidden',\n    minWidth: '200px'\n  }\n};\nclass SidebarList extends Component {\n  constructor(props) {\n    super(props);\n    this.props.setSelectedMessageType(this.props.match.params.messageType);\n  }\n  render() {\n    const messageTypes = this.props.messageTypes;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      style: styles.canvas\n    }, /*#__PURE__*/React.createElement(List, {\n      style: {\n        padding: '0px'\n      }\n    }, messageTypes && messageTypes.map(messageType => /*#__PURE__*/React.createElement(\"div\", {\n      key: messageType.id\n    }, /*#__PURE__*/React.createElement(MessageTypeItem, {\n      messageType: messageType,\n      onClick: () => {\n        this.props.setSelectedMessageType(messageType.id);\n        this.props.updateInputFields('', '', []);\n        this.props.attachments.length > 0 && this.props.clearAttachments();\n        history.push(`/${messageType.id}`);\n      },\n      selectedMessageType: this.props.selectedMessageType,\n      loading: messageType.loading\n    }), /*#__PURE__*/React.createElement(Divider, null)))), /*#__PURE__*/React.createElement(Toggle, {\n      style: {\n        width: '',\n        margin: '20px'\n      },\n      label: `${i18n.t('Auto refresh')} (${moment(this.props.refreshTimer).format('mm:ss')})`,\n      toggled: this.props.autoRefresh,\n      onToggle: () => this.props.setAutoRefresh(!this.props.autoRefresh)\n    }));\n  }\n}\nSidebarList.propTypes = {\n  attachments: propTypes.array,\n  autoRefresh: propTypes.bool,\n  clearAttachments: propTypes.func,\n  match: propTypes.object,\n  messageTypes: propTypes.array,\n  refreshTimer: propTypes.number,\n  selectedMessageType: propTypes.object,\n  setAutoRefresh: propTypes.func,\n  setSelectedMessageType: propTypes.func,\n  updateInputFields: propTypes.func\n};\nconst mapStateToProps = state => ({\n  selectedMessageType: state.messaging.selectedMessageType,\n  messageTypes: state.messaging.messageTypes\n});\nexport default compose(connect(mapStateToProps, {\n  setSelectedMessageType,\n  clearCheckedIds\n}, null, {\n  pure: false\n}))(SidebarList);","import FlatButton from 'material-ui/FlatButton';\nimport LinearProgress from 'material-ui/LinearProgress';\nimport Clear from 'material-ui-icons/Clear';\nimport Download from 'material-ui-icons/CloudDownload';\nimport propTypes from 'prop-types';\nimport React from 'react';\nimport theme from '../../styles/theme.js';\nimport './Attachments.css';\nconst Attachments = _ref => {\n  let {\n    dataDirection,\n    attachments,\n    style,\n    removeAttachment,\n    downloadAttachment,\n    cancelAttachment\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"attachment\",\n    style: {\n      ...style\n    }\n  }, attachments.map((attachment, index) => /*#__PURE__*/React.createElement(Attachment\n  // combining name with index prevents errors when user uploads files with duplicate names\n  , {\n    key: `${attachment.name}-${index}`,\n    dataDirection: dataDirection,\n    attachment: attachment,\n    removeAttachment: removeAttachment,\n    downloadAttachment: downloadAttachment,\n    cancelAttachment: cancelAttachment\n  })));\n};\nAttachments.propTypes = {\n  attachments: propTypes.array,\n  cancelAttachment: propTypes.func,\n  dataDirection: propTypes.string,\n  downloadAttachment: propTypes.func,\n  removeAttachment: propTypes.func,\n  style: propTypes.object\n};\nconst Attachment = _ref2 => {\n  let {\n    dataDirection,\n    attachment,\n    removeAttachment,\n    downloadAttachment,\n    cancelAttachment\n  } = _ref2;\n  return /*#__PURE__*/React.createElement(FlatButton, {\n    className: \"attachment__button\",\n    backgroundColor: theme.palette.accent2Color,\n    label: `${attachment.name} (${parseFloat(parseInt(attachment.contentLength, 10) / 1000000).toFixed(2)} MB)`,\n    labelPosition: \"after\",\n    onClick: () => {\n      dataDirection === 'download' ? downloadAttachment(attachment) : attachment.loading ? cancelAttachment(attachment.name) : removeAttachment(attachment);\n    },\n    icon: dataDirection === 'download' ? /*#__PURE__*/React.createElement(Download, null) : /*#__PURE__*/React.createElement(Clear, null)\n  }, attachment.loading && /*#__PURE__*/React.createElement(LinearProgress, {\n    className: 'attachment__progress',\n    mode: \"indeterminate\"\n  }));\n};\nAttachment.propTypes = {\n  attachment: propTypes.object,\n  cancelAttachment: propTypes.func,\n  dataDirection: propTypes.string,\n  downloadAttachment: propTypes.func,\n  removeAttachment: propTypes.func\n};\nexport default Attachments;","import i18n from '@dhis2/d2-i18n';\nimport FlatButton from 'material-ui/FlatButton';\nimport AttachFile from 'material-ui-icons/AttachFile';\nimport propTypes from 'prop-types';\nimport React from 'react';\nimport './AttachmentUploadButton.css';\nconst createHandleChange = addAttachment => event => {\n  const files = event.target.files;\n  const hasFile = files.length > 0;\n  if (hasFile) {\n    addAttachment(files[0]);\n  }\n};\nconst AttachmentUploadButton = _ref => {\n  let {\n    addAttachment\n  } = _ref;\n  return /*#__PURE__*/React.createElement(FlatButton, {\n    className: \"attachment__upload-button\",\n    label: i18n.t('Upload attachment'),\n    labelPosition: \"after\",\n    containerElement: \"label\",\n    icon: /*#__PURE__*/React.createElement(AttachFile, null)\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    className: \"attachment__upload-button--input\",\n    type: \"file\",\n    onChange: createHandleChange(addAttachment)\n  }));\n};\nAttachmentUploadButton.propTypes = {\n  addAttachment: propTypes.func\n};\nexport default AttachmentUploadButton;","function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == typeof i ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != typeof t || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != typeof i) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nimport i18n from '@dhis2/d2-i18n';\nimport { Card, CardActions, CardText } from 'material-ui/Card';\nimport FlatButton from 'material-ui/FlatButton';\nimport RadioButton from 'material-ui/RadioButton';\nimport RaisedButton from 'material-ui/RaisedButton';\nimport Subheader from 'material-ui/Subheader/Subheader';\nimport TextField from 'material-ui/TextField';\nimport propTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { compose } from 'recompose';\nimport { sendMessage, sendFeedbackMessage, displaySnackMessage, updateInputFields, addAttachment, removeAttachment, cancelAttachment, addRecipientByUserId } from '../../actions/index.js';\nimport { NEGATIVE } from '../../constants/development.js';\nimport { subheader } from '../../styles/style.js';\nimport { supportsAttachments } from '../../utils/helpers.js';\nimport history from '../../utils/history.js';\nimport Attachments from '../Attachments/Attachments.js';\nimport AttachmentUploadButton from '../Attachments/AttachmentUploadButton.js';\nimport SuggestionField from '../Common/SuggestionField.js';\nconst styles = {\n  canvas: {\n    flex: '3 0',\n    margin: '10px',\n    overflowY: 'scroll',\n    overflowX: 'hidden',\n    height: 'calc(100vh - 110px)'\n  },\n  messageTypeField: {\n    display: 'flex',\n    flexDirection: 'row'\n  },\n  messageType: {\n    width: '300px',\n    marginTop: '10px'\n  }\n};\nclass CreateMessage extends Component {\n  constructor(props) {\n    super(props);\n    _defineProperty(this, \"subjectUpdate\", (event, newValue) => {\n      this.props.updateInputFields(newValue, this.props.input, this.props.recipients);\n    });\n    _defineProperty(this, \"inputUpdate\", (event, newValue) => {\n      this.props.updateInputFields(this.props.subject, newValue, this.props.recipients);\n    });\n    _defineProperty(this, \"updateRecipients\", recipients => {\n      this.props.updateInputFields(this.props.subject, this.props.input, recipients);\n    });\n    _defineProperty(this, \"sendMessage\", () => {\n      const messageTypeId = this.state.isMessageFeedback ? 'TICKET' : 'PRIVATE';\n      const messageType = this.props.messageTypes.find(messageType => messageType.id === messageTypeId);\n      if (this.state.isMessageFeedback) {\n        this.props.sendFeedbackMessage(messageType);\n        history.push('/TICKET');\n      } else {\n        const users = this.props.recipients.filter(r => r.type === 'user');\n        const userGroups = this.props.recipients.filter(r => r.type === 'userGroup');\n        const organisationUnits = this.props.recipients.filter(r => r.type === 'organisationUnit');\n        this.props.sendMessage({\n          users,\n          userGroups,\n          organisationUnits,\n          messageType\n        });\n        history.push('/PRIVATE');\n      }\n    });\n    _defineProperty(this, \"wipeInput\", () => {\n      this.props.updateInputFields('', '', []);\n      this.props.attachments.length > 0 && this.props.clearAttachments();\n    });\n    _defineProperty(this, \"handleDiscard\", () => {\n      const message = i18n.t('Message discarded');\n      const snackType = NEGATIVE;\n      const onSnackActionClick = () => history.push('/PRIVATE/create');\n      const onSnackRequestClose = () => this.wipeInput();\n      this.props.displaySnackMessage({\n        message,\n        onSnackActionClick,\n        onSnackRequestClose,\n        snackType\n      });\n      history.push('/PRIVATE');\n    });\n    this.state = {\n      isMessageFeedback: false\n    };\n  }\n  componentDidMount() {\n    const {\n      addRecipientByUserId\n    } = this.props;\n    const {\n      messageId,\n      recipientId\n    } = this.props.match.params;\n\n    // This happens when the \"Send message\" button in the user-app is clicked\n    if (messageId === 'create' && recipientId) {\n      addRecipientByUserId(recipientId);\n    }\n  }\n  render() {\n    const disabled = this.props.subject === '' || this.props.input === '' || !this.state.isMessageFeedback && this.props.recipients.length === 0;\n    const discardDisabled = this.props.subject === '' && this.props.input === '' && !this.state.isMessageFeedback && this.props.recipients.length === 0;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      style: styles.canvas\n    }, /*#__PURE__*/React.createElement(Subheader, {\n      style: subheader\n    }, \" \", i18n.t('Create')), /*#__PURE__*/React.createElement(Card, null, /*#__PURE__*/React.createElement(CardText, null, /*#__PURE__*/React.createElement(SuggestionField, {\n      style: {\n        margin: '0px'\n      },\n      label: i18n.t('To'),\n      disabled: this.state.isMessageFeedback,\n      recipients: this.state.isMessageFeedback ? [{\n        id: 'id',\n        displayName: i18n.t('Feedback recipient group')\n      }] : this.props.recipients,\n      updateRecipients: this.updateRecipients,\n      inputHeight: '100px'\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      style: styles.messageTypeField\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      style: styles.messageType\n    }, /*#__PURE__*/React.createElement(RadioButton, {\n      label: i18n.t('Private message'),\n      checked: !this.state.isMessageFeedback,\n      onCheck: () => {\n        this.setState({\n          isMessageFeedback: !this.state.isMessageFeedback\n        });\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      style: styles.messageType\n    }, /*#__PURE__*/React.createElement(RadioButton, {\n      label: i18n.t('Feedback message'),\n      checked: this.state.isMessageFeedback,\n      onCheck: () => {\n        this.setState({\n          isMessageFeedback: !this.state.isMessageFeedback\n        });\n      }\n    }))), /*#__PURE__*/React.createElement(TextField, {\n      floatingLabelText: i18n.t('Subject'),\n      fullWidth: true,\n      value: this.props.subject,\n      onChange: this.subjectUpdate\n    }), /*#__PURE__*/React.createElement(TextField, {\n      key: 'createMessage',\n      id: 'createMessage',\n      rows: 5,\n      underlineShow: false,\n      value: this.props.input,\n      multiLine: true,\n      fullWidth: true,\n      floatingLabelText: i18n.t('Message'),\n      onChange: this.inputUpdate\n    }), this.props.enableAttachments && /*#__PURE__*/React.createElement(Attachments, {\n      dataDirection: 'upload',\n      attachments: this.props.attachments,\n      removeAttachment: attachment => this.props.removeAttachment(attachment.id),\n      cancelAttachment: this.props.cancelAttachment\n    }), /*#__PURE__*/React.createElement(CardActions, {\n      style: {\n        paddingLeft: '0px'\n      }\n    }, /*#__PURE__*/React.createElement(RaisedButton, {\n      primary: true,\n      disabled: disabled,\n      label: i18n.t('Send'),\n      onClick: () => this.sendMessage()\n    }), /*#__PURE__*/React.createElement(FlatButton, {\n      label: i18n.t('Discard'),\n      disabled: discardDisabled,\n      onClick: this.handleDiscard\n    }), this.props.enableAttachments && /*#__PURE__*/React.createElement(AttachmentUploadButton, {\n      addAttachment: attachment => {\n        this.props.addAttachment(attachment);\n      }\n    })))));\n  }\n}\nCreateMessage.propTypes = {\n  addAttachment: propTypes.func,\n  addRecipientByUserId: propTypes.func,\n  attachments: propTypes.array,\n  cancelAttachment: propTypes.func,\n  clearAttachments: propTypes.func,\n  displaySnackMessage: propTypes.func,\n  enableAttachments: propTypes.bool,\n  input: propTypes.string,\n  match: propTypes.object,\n  messageTypes: propTypes.array,\n  recipients: propTypes.array,\n  removeAttachment: propTypes.func,\n  sendFeedbackMessage: propTypes.func,\n  sendMessage: propTypes.func,\n  subject: propTypes.string,\n  updateInputFields: propTypes.func\n};\nconst mapStateToProps = state => ({\n  messageTypes: state.messaging.messageTypes,\n  subject: state.messaging.subject,\n  input: state.messaging.input,\n  recipients: state.messaging.recipients,\n  attachments: state.messaging.attachments,\n  enableAttachments: supportsAttachments(state.messaging.dhis2CoreVersion)\n});\nexport default compose(connect(mapStateToProps, {\n  sendMessage,\n  sendFeedbackMessage,\n  displaySnackMessage,\n  updateInputFields,\n  addAttachment,\n  removeAttachment,\n  cancelAttachment,\n  addRecipientByUserId\n}, null, {\n  pure: false\n}))(CreateMessage);","import { fontFamily } from '../constants/development.js';\nimport theme from '../styles/theme.js';\nexport const styles = {\n  canvas: {\n    flex: '3 0',\n    overflowY: 'scroll',\n    overflowX: 'hidden',\n    height: 'calc(100vh - 110px)',\n    paddingTop: '10px'\n  },\n  innerCanvas: {\n    display: 'flex',\n    flexDirection: 'column',\n    margin: '0px 10px 0px 10px'\n  },\n  header: {\n    display: 'flex'\n  },\n  iconButton: {\n    display: 'flex',\n    alignSelf: 'center'\n  },\n  subjectSubheader: {\n    display: 'flex',\n    alignSelf: 'center',\n    fontSize: '20px',\n    fontFamily\n  },\n  participantsCanvas: {\n    display: 'flex',\n    flexDirection: 'column'\n  },\n  participants: {\n    paddingLeft: '12px',\n    paddingTop: '10px',\n    display: 'flex',\n    flexWrap: 'wrap'\n  },\n  chip: {\n    height: '32px',\n    marginRight: '3px',\n    marginBottom: '3px'\n  },\n  participantAddRow: {\n    display: 'flex'\n  },\n  participantsSuggestionField: {\n    paddingLeft: '12px',\n    marginBottom: '0px',\n    flex: 1\n  },\n  participantsAdd: {\n    alignSelf: 'flex-end',\n    marginBottom: '28px',\n    paddingLeft: '12px'\n  },\n  messagesCanvas: {\n    marginBottom: '50px',\n    display: 'flex',\n    flexDirection: 'column',\n    backgroundColor: theme.palette.accent2Color,\n    margin: '0px 10px 10px 10px'\n  },\n  messagesInnerCanvas: {\n    padding: '0px'\n  }\n};\nexport default styles;","import i18n from '@dhis2/d2-i18n';\nimport CardText from 'material-ui/Card/CardText';\nimport Divider from 'material-ui/Divider';\nimport moment from 'moment';\nimport propTypes from 'prop-types';\nimport React from 'react';\nimport Linkify from 'react-linkify';\nimport { fontFamily } from '../../constants/development.js';\nimport theme from '../../styles/theme.js';\nimport Attachments from '../Attachments/Attachments.js';\nconst styles = {\n  canvas(backgroundColor) {\n    return {\n      backgroundColor,\n      padding: '16px 16px 16px 16px'\n    };\n  },\n  innerCanvas: {\n    margin: '',\n    paddingBottom: '0px'\n  },\n  cardText: {\n    padding: '16px 0px 16px 0px',\n    fontFamily,\n    whiteSpace: 'pre-wrap',\n    wordBreak: 'break-word'\n  },\n  fromFormat: {\n    fontFamily\n  },\n  datePlacement: {\n    display: 'flex',\n    justifyContent: 'flex-end',\n    marginRight: '10px'\n  },\n  dateFormat: {\n    overflow: 'hidden',\n    textOverflow: 'ellipsis',\n    whiteSpace: 'nowrap',\n    fontFamily\n  }\n};\nconst Message = _ref => {\n  let {\n    displayTimeDiff,\n    message,\n    currentUser,\n    lastMessage,\n    downloadAttachment,\n    cancelAttachment,\n    enableAttachments\n  } = _ref;\n  const fromTitle = message.sender ? currentUser && currentUser.id === message.sender.id ? 'me' : message.sender.displayName : 'system';\n  const today = moment();\n  const messageDate = moment(message.created).add(displayTimeDiff);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: styles.canvas(theme.palette.canvasColor)\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: styles.innerCanvas\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: styles.fromFormat\n  }, message.internal ? i18n.t(`Internal message from ${fromTitle}`) : i18n.t(`Message from ${fromTitle}`)), /*#__PURE__*/React.createElement(\"div\", {\n    style: styles.datePlacement\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: styles.dateFormat\n  }, today.diff(messageDate, 'hours') < 72 ? `${messageDate.from(today)}, ${messageDate.format('HH:mm')}` : today.year() === messageDate.year() ? messageDate.format('MMM DD, HH:mm') : messageDate.format('MMM DD, YYYY HH:mm'))), enableAttachments && /*#__PURE__*/React.createElement(Attachments, {\n    dataDirection: 'download',\n    style: {\n      paddingLeft: 0\n    },\n    attachments: message.attachments,\n    downloadAttachment: downloadAttachment,\n    cancelAttachment: cancelAttachment\n  }), /*#__PURE__*/React.createElement(CardText, {\n    style: styles.cardText\n  }, /*#__PURE__*/React.createElement(Linkify, null, message.text))), !lastMessage && /*#__PURE__*/React.createElement(Divider, null));\n};\nMessage.propTypes = {\n  cancelAttachment: propTypes.func,\n  currentUser: propTypes.object,\n  displayTimeDiff: propTypes.number,\n  downloadAttachment: propTypes.func,\n  enableAttachments: propTypes.bool,\n  lastMessage: propTypes.bool,\n  message: propTypes.object\n};\nexport default Message;","function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == typeof i ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != typeof t || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != typeof i) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nimport i18n from '@dhis2/d2-i18n';\nimport { Card, CardActions, CardText } from 'material-ui/Card';\nimport FlatButton from 'material-ui/FlatButton';\nimport RaisedButton from 'material-ui/RaisedButton';\nimport TextField from 'material-ui/TextField';\nimport propTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { compose } from 'recompose';\nimport { replyMessage, setSelectedMessageType, updateInputFields, displaySnackMessage, addAttachment, removeAttachment, cancelAttachment } from '../../actions/index.js';\nimport { NEGATIVE } from '../../constants/development.js';\nimport { supportsAttachments } from '../../utils/helpers.js';\nimport Attachments from '../Attachments/Attachments.js';\nimport AttachmentUploadButton from '../Attachments/AttachmentUploadButton.js';\nclass ReplyCard extends Component {\n  constructor(props) {\n    super(props);\n    _defineProperty(this, \"replyMessage\", internalReply => {\n      const {\n        input: message,\n        selectedMessageConversation: messageConversation,\n        selectedMessageType: messageType\n      } = this.props;\n      this.props.replyMessage({\n        message,\n        internalReply,\n        messageConversation,\n        messageType\n      });\n      this.wipeInput();\n    });\n    _defineProperty(this, \"wipeInput\", () => {\n      this.props.updateInputFields('', '', []);\n      this.props.attachments.length > 0 && this.props.clearAttachments();\n      this.setState({\n        inputError: false\n      });\n    });\n    _defineProperty(this, \"texFieldUpdate\", (event, newValue) => {\n      this.props.updateInputFields('', newValue, []);\n    });\n    _defineProperty(this, \"handleDiscard\", () => {\n      const message = i18n.t('Reply discarded');\n      const snackType = NEGATIVE;\n      const onSnackActionClick = () => this.setState({\n        discardState: false\n      });\n      const onSnackRequestClose = () => {\n        this.setState({\n          discardState: false\n        });\n        this.wipeInput();\n      };\n      this.setState({\n        discardState: true\n      });\n      this.props.displaySnackMessage({\n        message,\n        onSnackActionClick,\n        onSnackRequestClose,\n        snackType\n      });\n      this.setState({\n        expanded: false\n      });\n    });\n    this.state = {\n      discardState: false\n    };\n  }\n  componentWillUnmount() {\n    this.wipeInput();\n  }\n  render() {\n    return /*#__PURE__*/React.createElement(Card, {\n      style: {\n        marginTop: '5px'\n      },\n      expanded: true\n    }, /*#__PURE__*/React.createElement(CardText, {\n      style: {\n        padding: '0px 0px 0px 16px'\n      }\n    }, /*#__PURE__*/React.createElement(TextField, {\n      key: this.props.messageConversation.id,\n      id: this.props.messageConversation.id,\n      rows: 5,\n      underlineShow: false,\n      value: this.state.discardState ? '' : this.props.input,\n      multiLine: true,\n      fullWidth: true,\n      floatingLabelText: i18n.t('Message'),\n      onChange: this.texFieldUpdate\n    }), this.props.enableAttachments && !this.state.discardState && /*#__PURE__*/React.createElement(Attachments, {\n      dataDirection: 'upload',\n      attachments: this.props.attachments,\n      removeAttachment: attachment => this.props.removeAttachment(attachment.id),\n      cancelAttachment: this.props.cancelAttachment\n    }), /*#__PURE__*/React.createElement(CardActions, {\n      style: {\n        paddingLeft: '0px'\n      }\n    }, /*#__PURE__*/React.createElement(RaisedButton, {\n      primary: true,\n      label: i18n.t('Reply'),\n      disabled: this.props.input === '' || this.state.discardState,\n      onClick: () => this.replyMessage(false)\n    }), this.props.isInFeedbackRecipientGroup && this.props.selectedMessageType.id === 'TICKET' && /*#__PURE__*/React.createElement(FlatButton, {\n      primary: true,\n      label: i18n.t('Internal reply'),\n      disabled: this.props.input === '' || this.state.discardState,\n      onClick: () => this.replyMessage(true)\n    }), /*#__PURE__*/React.createElement(FlatButton, {\n      label: i18n.t('Discard'),\n      disabled: this.props.input === '' || this.state.discardState,\n      onClick: this.handleDiscard\n    }), this.props.enableAttachments && /*#__PURE__*/React.createElement(AttachmentUploadButton, {\n      addAttachment: attachment => {\n        this.props.addAttachment(attachment);\n      }\n    }), \")\")));\n  }\n}\nReplyCard.propTypes = {\n  addAttachment: propTypes.func,\n  attachments: propTypes.array,\n  cancelAttachment: propTypes.func,\n  clearAttachments: propTypes.func,\n  displaySnackMessage: propTypes.func,\n  enableAttachments: propTypes.bool,\n  input: propTypes.string,\n  isInFeedbackRecipientGroup: propTypes.bool,\n  messageConversation: propTypes.object,\n  removeAttachment: propTypes.func,\n  replyMessage: propTypes.func,\n  selectedMessageConversation: propTypes.object,\n  selectedMessageType: propTypes.object,\n  updateInputFields: propTypes.func\n};\nconst mapStateToProps = state => ({\n  selectedMessageConversation: state.messaging.selectedMessageConversation,\n  selectedMessageType: state.messaging.selectedMessageType,\n  messageTypes: state.messaging.messageTypes,\n  input: state.messaging.input,\n  isInFeedbackRecipientGroup: state.messaging.isInFeedbackRecipientGroup,\n  attachments: state.messaging.attachments,\n  enableAttachments: supportsAttachments(state.messaging.dhis2CoreVersion)\n});\nexport default compose(connect(mapStateToProps, {\n  replyMessage,\n  setSelectedMessageType,\n  updateInputFields,\n  displaySnackMessage,\n  addAttachment,\n  removeAttachment,\n  cancelAttachment\n}, null, {\n  pure: false\n}))(ReplyCard);","function _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }\nfunction _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == typeof i ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != typeof t || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != typeof i) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nimport i18n from '@dhis2/d2-i18n';\nimport Chip from 'material-ui/Chip';\nimport FlatButton from 'material-ui/FlatButton';\nimport IconButton from 'material-ui/IconButton';\nimport Paper from 'material-ui/Paper';\nimport Subheader from 'material-ui/Subheader/Subheader';\nimport AddIcon from 'material-ui-icons/Add';\nimport NavigationBack from 'material-ui-icons/ArrowBack';\nimport propTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { addRecipients, downloadAttachment, cancelAttachment, clearSelectedMessageConversation } from '../../actions/index.js';\nimport { styles } from '../../styles/messageConversationStyles.js';\nimport theme from '../../styles/theme.js';\nimport { supportsAttachments } from '../../utils/helpers.js';\nimport history from '../../utils/history.js';\nimport ExtendedChoiceLabel from '../Common/ExtendedChoiceLabel.js';\nimport SuggestionField from '../Common/SuggestionField.js';\nimport Message from './Message.js';\nimport ReplyCard from './ReplyCard.js';\nconst NOTIFICATIONS = ['TICKET', 'VALIDATION_RESULT'];\nconst maxParticipantsDisplay = 30;\nclass MessageConversation extends Component {\n  constructor(props) {\n    super(props);\n    _defineProperty(this, \"backToList\", () => {\n      const {\n        clearSelectedMessageConversation,\n        messageConversation\n      } = this.props;\n      history.push(`/${messageConversation.messageType}`);\n      clearSelectedMessageConversation();\n    });\n    _defineProperty(this, \"addRecipients\", () => {\n      const users = this.state.recipients.filter(r => r.type === 'user');\n      const userGroups = this.state.recipients.filter(r => r.type === 'userGroup');\n      const organisationUnits = this.state.recipients.filter(r => r.type === 'organisationUnit');\n      const {\n        messageConversation,\n        selectedMessageType: messageType\n      } = this.props;\n      this.props.addRecipients({\n        users,\n        userGroups,\n        organisationUnits,\n        messageConversation,\n        messageType\n      });\n      this.setState({\n        recipients: []\n      });\n    });\n    _defineProperty(this, \"updateRecipients\", recipients => {\n      this.setState({\n        recipients\n      });\n    });\n    this.state = {\n      recipients: [],\n      cursor: 'auto'\n    };\n  }\n  render() {\n    const {\n      messageConversation,\n      currentUser\n    } = this.props;\n    const messages = messageConversation.messages;\n    const notification = !!(NOTIFICATIONS.indexOf(messageConversation.messageType) + 1);\n    const participants = messageConversation.userMessages.slice(0, maxParticipantsDisplay).map(userMessage => !currentUser.id || this.state.recipientsExpanded || currentUser.id !== userMessage.user.id ? userMessage.user.displayName : i18n.t('me'));\n    const userMessagesLength = messageConversation.userMessages.length;\n    if (userMessagesLength > maxParticipantsDisplay) {\n      participants.push(' + '.concat(userMessagesLength - maxParticipantsDisplay));\n    }\n    return /*#__PURE__*/React.createElement(\"div\", {\n      id: \"messageconversation\",\n      style: styles.canvas\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      style: styles.innerCanvas\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      style: styles.header\n    }, /*#__PURE__*/React.createElement(IconButton, {\n      style: styles.iconButton,\n      tooltipPosition: \"bottom-right\",\n      onClick: this.backToList,\n      tooltip: i18n.t('Show all messages')\n    }, /*#__PURE__*/React.createElement(NavigationBack, null)), /*#__PURE__*/React.createElement(Subheader, {\n      style: styles.subjectSubheader\n    }, messageConversation.subject), this.props.displayExtendedChoices && /*#__PURE__*/React.createElement(ExtendedChoiceLabel, {\n      color: theme.palette.darkGray,\n      showTitle: true,\n      title: i18n.t('Status'),\n      label: messageConversation.status\n    }), this.props.displayExtendedChoices && /*#__PURE__*/React.createElement(ExtendedChoiceLabel, {\n      color: theme.palette.darkGray,\n      showTitle: true,\n      title: i18n.t('Priority'),\n      label: messageConversation.priority\n    }), notification && /*#__PURE__*/React.createElement(ExtendedChoiceLabel, {\n      color: theme.palette.darkGray,\n      showTitle: true,\n      title: i18n.t('Assignee'),\n      label: messageConversation.assignee ? messageConversation.assignee.displayName : undefined\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      style: styles.participantsCanvas\n    }, /*#__PURE__*/React.createElement(Subheader, {\n      style: {\n        paddingLeft: '12px',\n        paddingTop: '10px'\n      }\n    }, i18n.t('Participants')), /*#__PURE__*/React.createElement(\"div\", {\n      style: styles.participants\n    }, participants.map(participant => /*#__PURE__*/React.createElement(Chip, {\n      key: participant,\n      style: styles.chip\n    }, participant)))), /*#__PURE__*/React.createElement(\"div\", {\n      style: styles.participantAddRow\n    }, /*#__PURE__*/React.createElement(SuggestionField, {\n      style: styles.participantsSuggestionField,\n      label: i18n.t('Add participants to conversation'),\n      messageConversation: messageConversation,\n      recipients: this.state.recipients,\n      updateRecipients: this.updateRecipients,\n      limitSearchArray: messageConversation.userMessages\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      style: styles.participantsAdd\n    }, /*#__PURE__*/React.createElement(FlatButton, {\n      icon: /*#__PURE__*/React.createElement(AddIcon, null),\n      onClick: () => this.addRecipients(),\n      label: i18n.t('Add')\n    })))), /*#__PURE__*/React.createElement(\"div\", {\n      style: styles.messagesCanvas\n    }, /*#__PURE__*/React.createElement(Paper, {\n      style: styles.messagesInnerCanvas\n    }, messages.map((message, i) => /*#__PURE__*/React.createElement(Message, {\n      key: message.id,\n      displayTimeDiff: this.props.displayTimeDiff,\n      message: message,\n      messageConversation: messageConversation,\n      notification: notification,\n      currentUser: this.state.currentUser,\n      lastMessage: i + 1 === messages.length,\n      downloadAttachment: attachment => this.props.downloadAttachment(messageConversation.id, message.id, attachment.id),\n      cancelAttachment: this.props.cancelAttachment,\n      enableAttachments: this.props.enableAttachments\n    }))), /*#__PURE__*/React.createElement(ReplyCard, _extends({}, this.props, {\n      messageConversation: messageConversation\n    }))));\n  }\n}\nMessageConversation.propTypes = {\n  addRecipients: propTypes.func,\n  cancelAttachment: propTypes.func,\n  clearSelectedMessageConversation: propTypes.func,\n  currentUser: propTypes.object,\n  displayExtendedChoices: propTypes.bool,\n  displayTimeDiff: propTypes.number,\n  downloadAttachment: propTypes.func,\n  enableAttachments: propTypes.bool,\n  messageConversation: propTypes.object,\n  selectedMessageType: propTypes.object\n};\nconst mapStateToProps = state => ({\n  currentUser: state.messaging.currentUser,\n  selectedMessageType: state.messaging.selectedMessageType,\n  displayTimeDiff: state.messaging.displayTimeDiff,\n  enableAttachments: supportsAttachments(state.messaging.dhis2CoreVersion)\n});\nexport default connect(mapStateToProps, {\n  addRecipients,\n  downloadAttachment,\n  cancelAttachment,\n  clearSelectedMessageConversation\n})(MessageConversation);","function _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }\nfunction _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == typeof i ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != typeof t || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != typeof i) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nimport i18n from '@dhis2/d2-i18n';\nimport Subheader from 'material-ui/Subheader/Subheader';\nimport MailIcon from 'material-ui-icons/MailOutline';\nimport propTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { compose } from 'recompose';\nimport { loadMessageConversations, setIsInFeedbackRecipientGroup, clearCheckedIds, setSelectedMessageConversation, setSelectedMessageType, clearSelectedMessageConversation, updateInputFields, setFilter, setDisplayTimeDiff, clearAttachments } from '../../actions/index.js';\nimport * as api from '../../api/api.js';\nimport { subheader } from '../../styles/style.js';\nimport theme from '../../styles/theme.js';\nimport Toolbar from '../Common/Toolbar.js';\nimport MessageConversationList from '../List/MessageConversationList.js';\nimport SidebarList from '../List/SidebarList.js';\nimport CreateMessage from '../MessageConversation/CreateMessage.js';\nimport MessageConversation from '../MessageConversation/MessageConversation.js';\nimport './MessagingCenter.css';\nconst EXTENDED_CHOICES = ['TICKET', 'VALIDATION_RESULT'];\nconst refreshTimerTotal = 300000; // 5 minutes\nconst refreshTimerInterval = 10000; // 10 seconds\n\nclass MessagingCenter extends Component {\n  constructor(props) {\n    super(props);\n    _defineProperty(this, \"setAutoRefresh\", autoRefresh => {\n      // Cancel existing interval if it shouldn't autorefresh\n      if (!autoRefresh && this.intervalId) {\n        clearInterval(this.intervalId);\n        this.intervalId = null;\n      }\n      if (autoRefresh) {\n        this.intervalId = setInterval(this.tick, refreshTimerInterval);\n      }\n      this.setState({\n        autoRefresh,\n        refreshTimer: refreshTimerTotal\n      });\n    });\n    _defineProperty(this, \"tick\", () => {\n      const timerHasElapsed = this.state.refreshTimer - refreshTimerInterval <= 0;\n      if (timerHasElapsed) {\n        this.refresh();\n        this.setState({\n          refreshTimer: refreshTimerTotal\n        });\n      } else {\n        this.setState(prevState => ({\n          refreshTimer: prevState.refreshTimer - refreshTimerInterval\n        }));\n      }\n    });\n    _defineProperty(this, \"refresh\", () => {\n      this.props.messageTypes.map(messageType => this.props.loadMessageConversations(messageType, this.props.selectedMessageType));\n      if (this.props.selectedMessageConversation) {\n        this.props.setSelectedMessageConversation(this.props.selectedMessageConversation);\n      }\n    });\n    _defineProperty(this, \"toogleWideview\", () => {\n      this.setState({\n        wideview: !this.state.wideview\n      });\n    });\n    this.intervalId = null;\n    this.state = {\n      autoRefresh: false,\n      checkedItems: false,\n      refreshTimer: refreshTimerTotal,\n      wideview: true\n    };\n  }\n  componentDidMount() {\n    const selectedMessageType = this.props.match.params.messageType;\n    const selectedId = this.props.match.params.messageId;\n    if (selectedId && selectedId !== selectedMessageType && selectedId !== 'create') {\n      const initialMessageConversation = {\n        id: selectedId\n      };\n      this.props.setSelectedMessageConversation(initialMessageConversation);\n    }\n    api.isInFeedbackRecipientGroup(this.props.currentUser).then(result => this.props.setIsInFeedbackRecipientGroup(result));\n    this.props.messageTypes.map(messageType => this.props.loadMessageConversations(messageType, selectedMessageType));\n    this.props.setDisplayTimeDiff();\n  }\n  componentDidUpdate() {\n    const selectedMessageType = this.props.match.params.messageType;\n    const selectedId = this.props.match.params.messageId;\n    if (!this.props.settingSelectedMessageConversation && selectedId && selectedMessageType !== selectedId && selectedId !== 'create' && (this.props.selectedMessageConversation === undefined || selectedId !== this.props.selectedMessageConversation.id)) {\n      const initialMessageConversation = {\n        id: selectedId\n      };\n      this.props.setSelectedMessageConversation(initialMessageConversation);\n    }\n    if (selectedMessageType === selectedId && selectedMessageType !== this.props.selectedMessageType.id) {\n      this.props.setSelectedMessageType(selectedMessageType);\n    }\n    if ((selectedMessageType === selectedId || selectedId === 'create') && this.props.selectedMessageConversation !== undefined) {\n      this.props.clearSelectedMessageConversation();\n    }\n  }\n  componentWillUnmount() {\n    if (this.intervalId) {\n      clearInterval(this.intervalId);\n    }\n  }\n  render() {\n    const id = this.props.match.params.messageId;\n    const displayExtendedChoices = (this.props.selectedMessageType ? !!(EXTENDED_CHOICES.indexOf(this.props.selectedMessageType.id) + 1) : false) && this.props.isInFeedbackRecipientGroup;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"messaging-center\"\n    }, /*#__PURE__*/React.createElement(Toolbar, _extends({}, this.props, {\n      id: id,\n      wideview: this.state.wideview,\n      displayExtendedChoices: displayExtendedChoices,\n      toogleWideview: this.toogleWideview\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"messaging-center__main-content\"\n    }, /*#__PURE__*/React.createElement(SidebarList, _extends({}, this.props, {\n      drawerOpen: this.state.drawerOpen,\n      messageTypes: this.props.messageTypes,\n      autoRefresh: this.state.autoRefresh,\n      refreshTimer: this.state.refreshTimer,\n      setAutoRefresh: this.setAutoRefresh\n    })), this.props.selectedMessageConversation === undefined && !(this.state.wideview && id === 'create') && /*#__PURE__*/React.createElement(MessageConversationList, {\n      wideview: this.state.wideview,\n      displayExtendedChoices: displayExtendedChoices && this.state.wideview\n    }), id === 'create' && /*#__PURE__*/React.createElement(CreateMessage, _extends({}, this.props, {\n      wideview: this.state.wideview\n    })), this.props.selectedMessageConversation !== undefined && !this.state.wideview && /*#__PURE__*/React.createElement(MessageConversationList, {\n      wideview: this.state.wideview,\n      displayExtendedChoices: displayExtendedChoices && this.state.wideview\n    }), this.props.selectedMessageConversation && id !== 'create' ? this.props.selectedMessageConversation !== undefined && /*#__PURE__*/React.createElement(MessageConversation, _extends({}, this.props, {\n      messageConversation: this.props.selectedMessageConversation,\n      wideview: this.state.wideview,\n      disableLink: true,\n      displayExtendedChoices: displayExtendedChoices\n    })) : !this.state.wideview && id !== 'create' && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"messaging-center__no-message-selected\"\n    }, /*#__PURE__*/React.createElement(Subheader, {\n      style: subheader\n    }, i18n.t('Select a message')), /*#__PURE__*/React.createElement(MailIcon, {\n      style: {\n        color: theme.palette.primary1Color,\n        width: 120,\n        height: 120\n      }\n    }))));\n  }\n}\nMessagingCenter.propTypes = {\n  clearSelectedMessageConversation: propTypes.func,\n  currentUser: propTypes.object,\n  isInFeedbackRecipientGroup: propTypes.bool,\n  loadMessageConversations: propTypes.func,\n  match: propTypes.object,\n  messageTypes: propTypes.array,\n  selectedMessageConversation: propTypes.object,\n  selectedMessageType: propTypes.object,\n  setDisplayTimeDiff: propTypes.func,\n  setIsInFeedbackRecipientGroup: propTypes.func,\n  setSelectedMessageConversation: propTypes.func,\n  setSelectedMessageType: propTypes.func,\n  settingSelectedMessageConversation: propTypes.bool\n};\nconst mapStateToProps = state => ({\n  currentUser: state.messaging.currentUser,\n  snackMessage: state.messaging.snackMessage,\n  messageTypes: state.messaging.messageTypes,\n  messageConversations: state.messaging.messageConversations,\n  messageFilter: state.messaging.messageFilter,\n  statusFilter: state.messaging.statusFilter,\n  priorityFilter: state.messaging.priorityFilter,\n  assignedToMeFilter: state.messaging.assignedToMeFilter,\n  markedForFollowUpFilter: state.messaging.markedForFollowUpFilter,\n  unreadFilter: state.messaging.unreadFilter,\n  selectedMessageType: state.messaging.selectedMessageType,\n  selectedMessageConversation: state.messaging.selectedMessageConversation,\n  settingSelectedMessageConversation: state.messaging.settingSelectedMessageConversation,\n  checkedIds: state.messaging.checkedIds,\n  checkedOptions: state.messaging.checkedIds.length > 0,\n  loaded: state.messaging.loaded,\n  isInFeedbackRecipientGroup: state.messaging.isInFeedbackRecipientGroup,\n  attachments: state.messaging.attachments\n});\nexport default compose(connect(mapStateToProps, {\n  loadMessageConversations,\n  setIsInFeedbackRecipientGroup,\n  clearCheckedIds,\n  setSelectedMessageConversation,\n  setSelectedMessageType,\n  clearSelectedMessageConversation,\n  updateInputFields,\n  setFilter,\n  setDisplayTimeDiff,\n  clearAttachments\n}, null, {\n  pure: false\n}))(MessagingCenter);","import React from 'react';\nimport { Redirect } from 'react-router';\nimport { Router, Route } from 'react-router-dom';\nimport history from '../../utils/history.js';\nimport MessagingCenter from '../MessagingCenter/MessagingCenter.js';\nconst Routes = () => /*#__PURE__*/React.createElement(Router, {\n  history: history\n}, /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(Route, {\n  exact: true,\n  path: \"/\",\n  component: () => /*#__PURE__*/React.createElement(Redirect, {\n    to: \"/PRIVATE\"\n  })\n}), /*#__PURE__*/React.createElement(Route, {\n  path: \"/:messageType/:messageId?/:recipientId?\",\n  component: MessagingCenter\n})));\nexport default Routes;","import { useConfig } from '@dhis2/app-runtime';\nimport cx from 'classnames';\nimport { CircularProgress } from 'material-ui';\nimport propTypes from 'prop-types';\nimport React, { useEffect } from 'react';\nimport { connect } from 'react-redux';\nimport '../../locales/index.js';\nimport { setCurrentUser, setDhis2CoreVersion } from '../../actions/index.js';\nimport CustomSnackBar from '../Common/CustomSnackBar.js';\nimport classes from './App.module.css';\nimport Routes from './Routes.js';\nconst App = _ref => {\n  let {\n    currentUser,\n    setCurrentUser,\n    setDhis2CoreVersion\n  } = _ref;\n  const {\n    loading,\n    error\n  } = currentUser;\n  const {\n    serverVersion\n  } = useConfig();\n  useEffect(() => {\n    setDhis2CoreVersion(serverVersion.minor);\n    setCurrentUser();\n  }, []);\n  if (loading) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: classes.center\n    }, /*#__PURE__*/React.createElement(CircularProgress, {\n      size: 48\n    }));\n  }\n  if (error) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: cx(classes.center, classes.error)\n    }, error);\n  }\n  return /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(CustomSnackBar, null), /*#__PURE__*/React.createElement(Routes, null));\n};\nApp.propTypes = {\n  currentUser: propTypes.object.isRequired,\n  setCurrentUser: propTypes.func.isRequired,\n  setDhis2CoreVersion: propTypes.func.isRequired\n};\nexport default connect(state => ({\n  currentUser: state.messaging.currentUser\n}), {\n  setCurrentUser,\n  setDhis2CoreVersion\n})(App);","import { useDataEngine } from '@dhis2/app-runtime';\nimport MuiThemeProvider from 'material-ui/styles/MuiThemeProvider';\nimport React from 'react';\nimport { Provider } from 'react-redux';\nimport { setEngine } from '../../api/api.js';\nimport store from '../../store.js';\nimport theme from '../../styles/theme.js';\nimport App from './App.js';\nimport '../../index.css';\nimport 'typeface-roboto';\nconst AppWrapper = () => {\n  const engine = useDataEngine();\n  setEngine(engine);\n  return /*#__PURE__*/React.createElement(Provider, {\n    store: store\n  }, /*#__PURE__*/React.createElement(MuiThemeProvider, {\n    muiTheme: theme\n  }, /*#__PURE__*/React.createElement(App, null)));\n};\nexport default AppWrapper;"],"names":["fontFamily","NEUTRAL","POSITIVE","NEGATIVE","findIndexOfId","list","id","len","length","index","debounce","fn","delay","timer","context","this","args","arguments","clearTimeout","setTimeout","apply","supportsAttachments","dhis2CoreVersion","MAX_RECIPIENT","createOrganisationUnitQuery","searchValue","resource","params","fields","pageSize","filter","createUserGroupQuery","createRecipientSearchQuery","_ref2","searchOnlyUsers","searchOnlyFeedbackRecipients","feedbackRecipientsId","userQuery","_ref","supportsUserLookupEndPoint","query","push","createUserQuery","users","organisationUnits","userGroups","initialMessageConversationFields","messageConversationFields","engine","setEngine","engineInstance","getMessageConversations","async","messageType","page","messageFilter","status","priority","assignedToMeFilter","markedForFollowUpFilter","unreadFilter","currentUser","order","queryString","messageConversations","updateMessageConversationAssignee","messageConversationId","value","mutation","type","userId","mutate","addRecipients","_ref7","data","downloadAttachment","messageId","attachmentId","filePath","_len","parts","Array","_key","part","map","replace","join","joinPath","link","baseUrl","apiPath","document","createElement","href","download","split","pop","target","body","appendChild","click","removeChild","SET_CURRENT_USER","SET_CURRENT_USER_SUCCESS","SET_CURRENT_USER_ERROR","LOAD_MESSAGE_CONVERSATIONS","MESSAGE_CONVERSATIONS_LOAD_SUCCESS","MESSAGE_CONVERSATIONS_DELETE_SUCCESS","MESSAGE_CONVERSATIONS_DELETE_ERROR","MESSAGE_CONVERSATION_UPDATE_SUCCESS","MESSAGE_CONVERSATION_UPDATE_ERROR","SEND_MESSAGE_SUCCESS","SEND_MESSAGE_ERROR","SET_FILTER","DISPLAY_SNACK_MESSAGE","CLEAR_SNACK_MESSAGE","SET_CHECKED","SET_ALL_CHECKED","CLEAR_CHECKED","SET_SELECTED_MESSAGE_TYPE","CLEAR_SELECTED_MESSAGE_CONVERSATION","SET_SELECTED_MESSAGE_CONVERSATION","SET_SELECTED_MESSAGE_CONVERSATION_SUCCESS","UPDATE_INPUT_FIELDS","SET_IN_FEEDBACK_RECIPIENT_GROUP","SET_DISPLAY_TIME_DIFF_SUCCESS","ADD_RECIPIENT_BY_ID_SUCCESS","ADD_ATTACHMENT","ADD_ATTACHMENT_SUCCESS","ADD_ATTACHMENT_ERROR","REMOVE_ATTACHMENT","CLEAR_ATTACHMENTS","CANCEL_ATTACHMENT","SET_DHIS2_CORE_VERSION","displayName","i18n","t","unread","loaded","loading","total","initialState","error","authorities","messageTypes","selectedMessageType","undefined","selectedMessageConversation","settingSelectedMessageConversation","checkedIds","statusFilter","priorityFilter","isInFeedbackRecipientGroup","displayTimeDiff","subject","input","recipients","attachments","snackMessage","onSnackActionClick","onSnackRequestClose","snackType","state","action","stateMessageTypes","oldAttachments","actions","payload","replaceMessageType","find","pager","nrOfUnread","splice","setSelectedMessageType","message","identifier","log","messageConversation","selectedValue","element","messageConversationIds","messageTypeId","selectedMessageConversations","filterType","loadingMessageType","loadMore","authorized","attachment","name","contentLength","concat","size","attachmentName","middlewares","ReduxThunk","composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","reducer","combineReducers","messaging","messageReducer","createStore","applyMiddleware","getMuiTheme","palette","negative","pinkA200","blue50","primary1Color","primary2Color","blue100","primary3Color","blue300","primary4Color","blue500","accent1Color","grey50","accent2Color","grey100","accent3Color","grey300","accent4Color","grey500","followUp","orange500","darkGray","grey700","superDarkGray","grey900","textColor","darkBlack","alternateTextColor","white","canvasColor","borderColor","clockCircleColor","fade","shadowColor","fullBlack","namespace","addResources","arTranslations","ar_IQTranslations","bnTranslations","ckbTranslations","csTranslations","daTranslations","enTranslations","esTranslations","es_419Translations","frTranslations","hi_INTranslations","idTranslations","kmTranslations","loTranslations","myTranslations","nbTranslations","neTranslations","nlTranslations","prsTranslations","psTranslations","ptTranslations","pt_BRTranslations","roTranslations","ruTranslations","siTranslations","svTranslations","tetTranslations","tgTranslations","ukTranslations","urTranslations","uz_CyrlTranslations","uz_LatnTranslations","uz_UZ_CyrlTranslations","uz_UZ_LatnTranslations","viTranslations","zhTranslations","zh_CNTranslations","createAction","setSelectedMessageConversation","dispatch","result","api","loadMessageConversations","getState","promises","i","promise","then","Promise","all","reduce","accumulated","r","markMessageConversations","mode","markedConversations","markedReadConversations","markedUnreadConversations","addAttachment","domain","file","response","fileResource","clearCheckedIds","clearSelectedMessageConversation","displaySnackMessage","_ref5","setFilter","updateInputFields","clearAttachments","removeAttachment","cancelAttachment","_defineProperty","e","Symbol","toPrimitive","call","TypeError","String","Number","_toPrimitive","_toPropertyKey","Object","defineProperty","enumerable","configurable","writable","contentColorStyle","theme","CustomSnackBar","Component","constructor","props","super","clearSnackMessage","setState","show","componentDidUpdate","_prevProps","prevState","render","React","Snackbar","open","autoHideDuration","onRequestClose","closeMessage","onActionClick","contentStyle","color","style","pointerEvents","whiteSpace","bodyStyle","maxWidth","connect","pure","createHashHistory","messagePanelContainer","overflowY","overflowX","borderRightWidth","borderRightColor","height","subheader","paddingLeft","fontSize","STATUS","key","primaryText","PRIORITY","DialogWithReduxState","ReactReduxContext","Consumer","ctx","Dialog","Provider","store","children","SuggestionField","searchResult","lastSearch","errorText","search","bind","chip","onSuggestionClick","wipeInput","debouncedSearch","recipient","updateRecipients","_results$users","_results$organisation","_results$userGroups","_ref6","results","addType","internalSearchResult","searchWarning","inputHeight","ChipInput","marginBottom","disabled","fullWidth","openOnFocus","searchText","floatingLabelText","label","dataSource","dataSourceConfig","text","onUpdateInput","updateInput","onRequestAdd","onRequestDelete","onRemoveChip","updateMessageConversations","styles","canvas","width","display","extendedChoices","justifyContent","nrSelected","padding","overflow","textOverflow","ToolbarExtendedChoicePicker","getIds","ids","dialogOpen","checkedItems","assignToOpen","multiSelect","actionButtons","FlatButton","primary","onClick","toggleDialog","keyboardFocused","deleteMessageConversations","history","displayNumberOfCheckedIds","title","modal","AssignToDialog","updateMessageConversation","IconButton","tooltip","Delete","MarkUnread","Done","displayExtendedChoices","Assignment","IconMenu","iconButtonElement","MoreVertIcon","anchorOrigin","horizontal","vertical","targetOrigin","MenuItem","Divider","rightIcon","ArrowDropRight","menuItems","elem","Subheader","deleteMessageConversation","currentUserId","updateMessageConversationFollowup","updateMessageConversationStatus","messageConversationStatus","updateMessageConversationPriority","messageConversationPriority","checkedOptions","alignItems","backgroundColor","zIndex","checkedOption","minWidth","margin","filterControl","flex","marginRight","rightHandCanvas","ie11Spacer","flexGrow","iconMenu","Toolbar","lastMessageFilter","prevProps","displaySearch","wideview","Paper","icon","CreateMessageIcon","NavigationBack","SelectField","labelStyle","top","selectedMenuItemStyle","floatingLabelStyle","iconStyle","onChange","event","TextField","hintText","menuStyle","Checkbox","checked","alignSelf","ViewFancy","ViewList","toogleWideview","transition","boxSizing","position","boxShadow","borderBottom","checkBox","sender","extendedLabel","MessageConversationListItem","cursor","allChecked","messages","onCheck","setAllChecked","child","notification","subheaderTitle","paddingRight","fontWeight","showTitle","displayLabel","charAt","toLowerCase","substr","container","flexWrap","flag","fontColor","marginTop","flexBasis","dateFormat","textAlign","read","lastSender","x","today","moment","messageDate","lastMessage","add","containerBackgroundColor","getBackgroundColor","innerText","onMouseEnter","onMouseLeave","setChecked","Flag","ExtendedChoiceLabel","assignee","diff","from","year","format","NOTIFICATIONS","borderRightStyle","MessageConversationList","messageList","getElementById","isBottom","onScroll","el","scrollHeight","scrollTop","outerHeight","isArray","lookup","Set","item","has","dedupeById","indexOf","debouncedOnScroll","ListItemHeader","CircularProgress","MessageTypeItem","setHoverText","setNeutralText","setTextColor","role","flexDirection","marginLeft","Badge","badgeContent","secondary","badgeStyle","borderLeftStyle","borderLeftWidth","borderLeftColor","SidebarList","match","List","Toggle","refreshTimer","toggled","autoRefresh","onToggle","setAutoRefresh","Attachment","dataDirection","className","parseFloat","parseInt","toFixed","labelPosition","Download","Clear","LinearProgress","createHandleChange","files","containerElement","AttachFile","messageTypeField","CreateMessage","newValue","isMessageFeedback","sendFeedbackMessage","sendMessage","componentDidMount","addRecipientByUserId","recipientId","discardDisabled","Card","CardText","RadioButton","subjectUpdate","rows","underlineShow","multiLine","inputUpdate","enableAttachments","Attachments","CardActions","RaisedButton","handleDiscard","AttachmentUploadButton","_ref3","user","console","paddingTop","innerCanvas","header","iconButton","subjectSubheader","participantsCanvas","participants","participantAddRow","participantsSuggestionField","participantsAdd","messagesCanvas","messagesInnerCanvas","paddingBottom","cardText","wordBreak","fromFormat","datePlacement","fromTitle","created","internal","Linkify","ReplyCard","internalReply","replyMessage","inputError","discardState","expanded","componentWillUnmount","texFieldUpdate","_ref4","_extends","assign","n","hasOwnProperty","MessageConversation","userMessages","slice","userMessage","recipientsExpanded","userMessagesLength","tooltipPosition","backToList","participant","Chip","limitSearchArray","AddIcon","Message","EXTENDED_CHOICES","refreshTimerTotal","refreshTimerInterval","MessagingCenter","intervalId","clearInterval","setInterval","tick","refresh","selectedId","initialMessageConversation","configuration","feedbackRecipients","includes","some","setIsInFeedbackRecipientGroup","setDisplayTimeDiff","drawerOpen","disableLink","MailIcon","serverDate","systemInfo","Routes","Router","Route","exact","path","component","Redirect","to","setCurrentUser","setDhis2CoreVersion","version","serverVersion","useConfig","useEffect","minor","classes","cx","AppWrapper","useDataEngine","MuiThemeProvider","muiTheme","App"],"sourceRoot":""}