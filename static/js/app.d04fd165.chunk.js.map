{"version":3,"sources":["D2App/components/App/App.module.css","D2App/styles/theme.js","D2App/locales/index.js","D2App/constants/actions.js","D2App/constants/development.js","D2App/utils/helpers.js","D2App/utils/createRecipientSearchQuery.js","D2App/api/api.js","D2App/actions/index.js","D2App/components/Common/CustomSnackBar.js","D2App/utils/history.js","D2App/components/Attachments/Attachments.js","D2App/components/MessageConversation/Message.js","D2App/components/Attachments/AttachmentUploadButton.js","D2App/components/MessageConversation/ReplyCard.js","D2App/components/Common/SuggestionField.js","D2App/components/Common/ExtendedChoiceLabel.js","D2App/styles/messageConversationStyles.js","D2App/components/MessageConversation/MessageConversation.js","D2App/components/List/MessageTypeItem.js","D2App/components/List/SidebarList.js","D2App/styles/style.js","D2App/components/List/ListItemHeader.js","D2App/components/List/MessageConversationListItem.js","D2App/components/List/MessageConversationList.js","D2App/components/MessageConversation/CreateMessage.js","D2App/constants/extendedChoices.js","D2App/components/Common/DialogWithReduxState.js","D2App/components/Common/AssignToDialog.js","D2App/components/Common/ToolbarExtendedChoicePicker.js","D2App/components/Common/Toolbar.js","D2App/components/MessagingCenter/MessagingCenter.js","D2App/components/App/Routes.js","D2App/components/App/App.js","D2App/constants/messageTypes.js","D2App/reducers/messageReducer.js","D2App/store.js","D2App/components/App/AppWrapper.js"],"names":["module","exports","getMuiTheme","palette","negative","pinkA200","blue50","primary1Color","primary2Color","blue100","primary3Color","blue300","primary4Color","blue500","accent1Color","grey50","accent2Color","grey100","accent3Color","grey300","accent4Color","grey500","followUp","orange500","darkGray","grey700","superDarkGray","grey900","textColor","darkBlack","alternateTextColor","white","canvasColor","borderColor","clockCircleColor","fade","shadowColor","fullBlack","namespace","i18n","addResources","arTranslations","ar_IQTranslations","bnTranslations","ckbTranslations","csTranslations","daTranslations","enTranslations","esTranslations","frTranslations","idTranslations","kmTranslations","loTranslations","myTranslations","nbTranslations","prsTranslations","psTranslations","ptTranslations","pt_BRTranslations","ruTranslations","svTranslations","tetTranslations","tgTranslations","ukTranslations","urTranslations","uzTranslations","uz_CyrlTranslations","uz_LatnTranslations","viTranslations","zhTranslations","zh_CNTranslations","SET_CURRENT_USER","SET_CURRENT_USER_SUCCESS","SET_CURRENT_USER_ERROR","LOAD_MESSAGE_CONVERSATIONS","MESSAGE_CONVERSATIONS_LOAD_SUCCESS","MESSAGE_CONVERSATIONS_DELETE_SUCCESS","MESSAGE_CONVERSATIONS_DELETE_ERROR","MESSAGE_CONVERSATION_UPDATE_SUCCESS","MESSAGE_CONVERSATION_UPDATE_ERROR","SEND_MESSAGE_SUCCESS","SEND_MESSAGE_ERROR","SET_FILTER","DISPLAY_SNACK_MESSAGE","CLEAR_SNACK_MESSAGE","SET_CHECKED","SET_ALL_CHECKED","CLEAR_CHECKED","SET_SELECTED_MESSAGE_TYPE","CLEAR_SELECTED_MESSAGE_CONVERSATION","SET_SELECTED_MESSAGE_CONVERSATION","SET_SELECTED_MESSAGE_CONVERSATION_SUCCESS","UPDATE_INPUT_FIELDS","SET_IN_FEEDBACK_RECIPIENT_GROUP","SET_DISPLAY_TIME_DIFF_SUCCESS","ADD_RECIPIENT_BY_ID_SUCCESS","ADD_ATTACHMENT","ADD_ATTACHMENT_SUCCESS","ADD_ATTACHMENT_ERROR","REMOVE_ATTACHMENT","CLEAR_ATTACHMENTS","CANCEL_ATTACHMENT","SET_DHIS2_CORE_VERSION","fontFamily","NEUTRAL","POSITIVE","NEGATIVE","findIndexOfId","list","id","len","length","index","debounce","fn","delay","timer","context","this","args","arguments","clearTimeout","setTimeout","apply","supportsAttachments","dhis2CoreVersion","createOrganisationUnitQuery","searchValue","resource","params","fields","pageSize","filter","concat","createUserGroupQuery","initialMessageConversationFields","messageConversationFields","engine","getMessageConversations","async","messageType","page","messageFilter","status","priority","assignedToMeFilter","markedForFollowUpFilter","unreadFilter","currentUser","push","query","order","queryString","messageConversations","updateMessageConversationAssignee","messageConversationId","value","mutation","type","userId","mutate","searchRecipients","searchOnlyUsers","searchOnlyFeedbackRecipients","feedbackRecipientsId","_results$users","_results$organisation","_results$userGroups","userQuery","supportsUserLookupEndPoint","createUserQuery","users","organisationUnits","userGroups","createRecipientSearchQuery","results","addRecipients","data","createAction","payload","setSelectedMessageConversation","messageConversation","dispatch","actions","result","api","error","loadMessageConversations","selectedMessageType","loadMore","getState","promises","state","statusFilter","priorityFilter","messaging","i","promise","then","pager","Promise","all","nrOfUnread","total","reduce","accumulated","r","markMessageConversations","mode","markedConversations","markedReadConversations","markedUnreadConversations","addAttachment","attachment","domain","file","response","fileResource","name","contentLength","clearCheckedIds","clearSelectedMessageConversation","displaySnackMessage","message","onSnackActionClick","onSnackRequestClose","snackType","setFilter","filterType","updateInputFields","subject","input","recipients","clearAttachments","setSelectedMessageType","messageTypeId","removeAttachment","attachmentId","cancelAttachment","attachmentName","contentColorStyle","theme","CustomSnackBar","Component","constructor","props","obj","key","super","clearSnackMessage","setState","show","Object","defineProperty","enumerable","configurable","writable","componentDidUpdate","_prevProps","prevState","render","React","createElement","Snackbar","open","autoHideDuration","onRequestClose","closeMessage","action","onActionClick","contentStyle","color","style","pointerEvents","whiteSpace","bodyStyle","maxWidth","compose","connect","snackMessage","pure","createHashHistory","Attachment","dataDirection","downloadAttachment","FlatButton","className","backgroundColor","label","parseFloat","parseInt","toFixed","labelPosition","onClick","loading","icon","Download","Clear","LinearProgress","Attachments","attachments","map","styles","canvas","padding","innerCanvas","margin","paddingBottom","cardText","wordBreak","fromFormat","datePlacement","display","justifyContent","marginRight","dateFormat","overflow","textOverflow","Message","displayTimeDiff","lastMessage","enableAttachments","fromTitle","sender","displayName","today","moment","messageDate","created","add","internal","t","placement","diff","from","format","year","paddingLeft","CardText","Linkify","text","Divider","createHandleChange","event","files","target","AttachmentUploadButton","containerElement","AttachFile","onChange","_defineProperty","ReplyCard","internalReply","selectedMessageConversation","replyMessage","wipeInput","inputError","newValue","discardState","expanded","componentWillUnmount","Card","marginTop","TextField","rows","underlineShow","multiLine","fullWidth","floatingLabelText","texFieldUpdate","CardActions","RaisedButton","primary","disabled","isInFeedbackRecipientGroup","handleDiscard","messageTypes","SuggestionField","searchResult","lastSearch","errorText","undefined","search","bind","chip","onSuggestionClick","debouncedSearch","find","recipient","updateRecipients","addType","internalSearchResult","searchWarning","height","inputHeight","ChipInput","marginBottom","openOnFocus","searchText","dataSource","dataSourceConfig","onUpdateInput","updateInput","onRequestAdd","onRequestDelete","onRemoveChip","subheaderTitle","paddingRight","subheader","fontWeight","ExtendedChoiceLabel","showTitle","title","displayLabel","charAt","toLowerCase","substr","flex","Subheader","overflowY","overflowX","paddingTop","flexDirection","header","iconButton","alignSelf","subjectSubheader","fontSize","participantsCanvas","participants","flexWrap","participantAddRow","participantsSuggestionField","participantsAdd","messagesCanvas","messagesInnerCanvas","_extends","assign","source","prototype","hasOwnProperty","call","NOTIFICATIONS","MessageConversation","history","cursor","messages","notification","indexOf","userMessages","slice","userMessage","recipientsExpanded","user","userMessagesLength","IconButton","tooltipPosition","backToList","tooltip","NavigationBack","displayExtendedChoices","assignee","participant","Chip","limitSearchArray","AddIcon","Paper","messageId","filePath","parts","part","replace","join","joinPath","link","baseUrl","apiPath","document","href","download","split","pop","body","appendChild","click","removeChild","MessageTypeItem","setHoverText","setNeutralText","setTextColor","selectedValue","role","getBackgroundColor","alignItems","onMouseEnter","onMouseLeave","marginLeft","CircularProgress","size","unread","Badge","badgeContent","secondary","badgeStyle","borderLeftStyle","borderLeftWidth","borderLeftColor","borderRightStyle","borderRightWidth","borderRightColor","minWidth","SidebarList","match","List","Toggle","width","refreshTimer","toggled","autoRefresh","onToggle","setAutoRefresh","messagePanelContainer","transition","boxSizing","position","boxShadow","borderBottom","checkBox","extendedLabel","MessageConversationListItem","allChecked","checkedIds","Checkbox","checked","onCheck","setAllChecked","child","messageConversationIds","container","wideview","flag","fontColor","flexBasis","textAlign","read","lastSender","x","containerBackgroundColor","innerText","settingSelectedMessageConversation","setChecked","Flag","MessageConversationList","messageList","getElementById","isBottom","loaded","onScroll","el","scrollHeight","scrollTop","window","outerHeight","Array","isArray","lookup","Set","item","has","dedupeById","debouncedOnScroll","ListItemHeader","messageTypeField","CreateMessage","isMessageFeedback","sendFeedbackMessage","sendMessage","componentDidMount","addRecipientByUserId","recipientId","discardDisabled","RadioButton","subjectUpdate","inputUpdate","console","extendedChoices","STATUS","primaryText","PRIORITY","DialogWithReduxState","ReactReduxContext","Consumer","ctx","Dialog","Provider","store","children","AssignToDialog","updateMessageConversations","nrSelected","ToolbarExtendedChoicePicker","identifier","getIds","ids","dialogOpen","checkedItems","assignToOpen","multiSelect","actionButtons","Fragment","toggleDialog","keyboardFocused","deleteMessageConversations","displayNumberOfCheckedIds","modal","updateMessageConversation","Delete","MarkUnread","Done","Assignment","IconMenu","iconButtonElement","MoreVertIcon","anchorOrigin","horizontal","vertical","targetOrigin","MenuItem","rightIcon","ArrowDropRight","menuItems","elem","currentUserId","messageConversationStatus","messageConversationPriority","log","checkedOptions","zIndex","checkedOption","filterControl","rightHandCanvas","ie11Spacer","flexGrow","iconMenu","Toolbar","lastMessageFilter","prevProps","displaySearch","CreateMessageIcon","SelectField","labelStyle","top","selectedMenuItemStyle","floatingLabelStyle","iconStyle","hintText","menuStyle","ViewFancy","ViewList","toogleWideview","EXTENDED_CHOICES","refreshTimerTotal","refreshTimerInterval","MessagingCenter","intervalId","clearInterval","setInterval","tick","refresh","selectedId","initialMessageConversation","configuration","feedbackRecipients","authorized","authorities","includes","some","setIsInFeedbackRecipientGroup","setDisplayTimeDiff","drawerOpen","disableLink","MailIcon","serverDate","systemInfo","Routes","Router","Route","exact","path","component","Redirect","to","setCurrentUser","setDhis2CoreVersion","version","serverVersion","useConfig","useEffect","minor","classes","center","cx","initialState","messageReducer","stateMessageTypes","oldAttachments","replaceMessageType","splice","element","selectedMessageConversations","loadingMessageType","middlewares","ReduxThunk","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","reducer","combineReducers","createStore","applyMiddleware","AppWrapper","useDataEngine","MuiThemeProvider","muiTheme","App"],"mappings":"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","file":"static/js/app.d04fd165.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"center\":\"App_center__1snml\",\"error\":\"App_error__1usCm\"};","import getMuiTheme from 'material-ui/styles/getMuiTheme';\nimport { fade } from 'material-ui/utils/colorManipulator';\nimport { blue50, blue100, blue300, blue500, pinkA200, grey50, grey100, grey300, grey500, grey700, grey900, orange500, white, darkBlack, fullBlack } from 'material-ui/styles/colors';\nexport default getMuiTheme({\n  palette: {\n    negative: pinkA200,\n    blue50,\n    primary1Color: '#1D8BF1',\n    primary2Color: blue100,\n    primary3Color: blue300,\n    primary4Color: blue500,\n    accent1Color: grey50,\n    accent2Color: grey100,\n    accent3Color: grey300,\n    accent4Color: grey500,\n    followUp: orange500,\n    darkGray: grey700,\n    superDarkGray: grey900,\n    textColor: darkBlack,\n    alternateTextColor: white,\n    canvasColor: white,\n    borderColor: grey300,\n    clockCircleColor: fade(darkBlack, 0.07),\n    shadowColor: fullBlack\n  }\n});","//------------------------------------------------------------------------------\n// <auto-generated>\n// This code was generated by d2-i18n-generate.\n//\n// Changes to this file may cause incorrect behavior and will be lost if\n// the code is regenerated.\n// </auto-generated>\n//------------------------------------------------------------------------------\nimport i18n from '@dhis2/d2-i18n';\nimport arTranslations from './ar/translations.json';\nimport ar_IQTranslations from './ar_IQ/translations.json';\nimport bnTranslations from './bn/translations.json';\nimport ckbTranslations from './ckb/translations.json';\nimport csTranslations from './cs/translations.json';\nimport daTranslations from './da/translations.json';\nimport enTranslations from './en/translations.json';\nimport esTranslations from './es/translations.json';\nimport frTranslations from './fr/translations.json';\nimport idTranslations from './id/translations.json';\nimport kmTranslations from './km/translations.json';\nimport loTranslations from './lo/translations.json';\nimport myTranslations from './my/translations.json';\nimport nbTranslations from './nb/translations.json';\nimport prsTranslations from './prs/translations.json';\nimport psTranslations from './ps/translations.json';\nimport ptTranslations from './pt/translations.json';\nimport pt_BRTranslations from './pt_BR/translations.json';\nimport ruTranslations from './ru/translations.json';\nimport svTranslations from './sv/translations.json';\nimport tetTranslations from './tet/translations.json';\nimport tgTranslations from './tg/translations.json';\nimport ukTranslations from './uk/translations.json';\nimport urTranslations from './ur/translations.json';\nimport uzTranslations from './uz/translations.json';\nimport uz_CyrlTranslations from './uz_Cyrl/translations.json';\nimport uz_LatnTranslations from './uz_Latn/translations.json';\nimport viTranslations from './vi/translations.json';\nimport zhTranslations from './zh/translations.json';\nimport zh_CNTranslations from './zh_CN/translations.json';\nconst namespace = 'default';\ni18n.addResources('ar', namespace, arTranslations);\ni18n.addResources('ar_IQ', namespace, ar_IQTranslations);\ni18n.addResources('bn', namespace, bnTranslations);\ni18n.addResources('ckb', namespace, ckbTranslations);\ni18n.addResources('cs', namespace, csTranslations);\ni18n.addResources('da', namespace, daTranslations);\ni18n.addResources('en', namespace, enTranslations);\ni18n.addResources('es', namespace, esTranslations);\ni18n.addResources('fr', namespace, frTranslations);\ni18n.addResources('id', namespace, idTranslations);\ni18n.addResources('km', namespace, kmTranslations);\ni18n.addResources('lo', namespace, loTranslations);\ni18n.addResources('my', namespace, myTranslations);\ni18n.addResources('nb', namespace, nbTranslations);\ni18n.addResources('prs', namespace, prsTranslations);\ni18n.addResources('ps', namespace, psTranslations);\ni18n.addResources('pt', namespace, ptTranslations);\ni18n.addResources('pt_BR', namespace, pt_BRTranslations);\ni18n.addResources('ru', namespace, ruTranslations);\ni18n.addResources('sv', namespace, svTranslations);\ni18n.addResources('tet', namespace, tetTranslations);\ni18n.addResources('tg', namespace, tgTranslations);\ni18n.addResources('uk', namespace, ukTranslations);\ni18n.addResources('ur', namespace, urTranslations);\ni18n.addResources('uz', namespace, uzTranslations);\ni18n.addResources('uz_Cyrl', namespace, uz_CyrlTranslations);\ni18n.addResources('uz_Latn', namespace, uz_LatnTranslations);\ni18n.addResources('vi', namespace, viTranslations);\ni18n.addResources('zh', namespace, zhTranslations);\ni18n.addResources('zh_CN', namespace, zh_CNTranslations);\nexport default i18n;","export const SET_CURRENT_USER = 'SET_CURRENT_USER';\nexport const SET_CURRENT_USER_SUCCESS = 'SET_CURRENT_USER_SUCCESS';\nexport const SET_CURRENT_USER_ERROR = 'SET_CURRENT_USER_ERROR';\nexport const LOAD_MESSAGE_CONVERSATIONS = 'LOAD_MESSAGE_CONVERSATIONS';\nexport const LOAD_MORE_MESSAGE_CONVERSATIONS = 'LOAD_MORE_MESSAGE_CONVERSATIONS';\nexport const MESSAGE_CONVERSATIONS_LOAD_SUCCESS = 'MESSAGE_CONVERSATIONS_LOAD_SUCCESS';\nexport const MESSAGE_CONVERSATIONS_LOAD_ERROR = 'MESSAGE_CONVERSATIONS_LOAD_ERROR';\nexport const DELETE_MESSAGE_CONVERSATIONS = 'DELETE_MESSAGE_CONVERSATIONS';\nexport const MESSAGE_CONVERSATIONS_DELETE_SUCCESS = 'MESSAGE_CONVERSATIONS_DELETE_SUCCESS';\nexport const MESSAGE_CONVERSATIONS_DELETE_ERROR = 'MESSAGE_CONVERSATIONS_DELETE_ERROR';\nexport const UPDATE_MESSAGE_CONVERSATIONS = 'UPDATE_MESSAGE_CONVERSATIONS';\nexport const MESSAGE_CONVERSATION_UPDATE_SUCCESS = 'MESSAGE_CONVERSATION_UPDATE_SUCCESS';\nexport const MESSAGE_CONVERSATION_UPDATE_ERROR = 'MESSAGE_CONVERSATION_UPDATE_ERROR';\nexport const MARK_MESSAGE_CONVERSATIONS = 'MARK_MESSAGE_CONVERSATIONS';\nexport const MARK_MESSAGE_CONVERSATIONS_SUCCESS = 'MARK_MESSAGE_CONVERSATIONS_SUCCESS';\nexport const MARK_MESSAGE_CONVERSATIONS_ERROR = 'MARK_MESSAGE_CONVERSATIONS_ERROR';\nexport const SEND_MESSAGE = 'SEND_MESSAGE';\nexport const SEND_MESSAGE_SUCCESS = 'SEND_MESSAGE_SUCCESS';\nexport const SEND_MESSAGE_ERROR = 'SEND_MESSAGE_ERROR';\nexport const SEND_FEEDBACK_MESSAGE = 'SEND_FEEDBACK_MESSAGE';\nexport const REPLY_MESSAGE = 'REPLY_MESSAGE';\nexport const REPLY_MESSAGE_SUCCESS = 'REPLY_MESSAGE_SUCCESS';\nexport const REPLY_MESSAGE_ERROR = 'REPLY_MESSAGE_ERROR';\nexport const SET_FILTER = 'SET_FILTER';\nexport const DISPLAY_SNACK_MESSAGE = 'DISPLAY_SNACK_MESSAGE;';\nexport const CLEAR_SNACK_MESSAGE = 'CLEAR_SNACK_MESSAGE';\nexport const SET_CHECKED = 'SET_CHECKED';\nexport const SET_ALL_CHECKED = 'SET_ALL_CHECKED';\nexport const CLEAR_CHECKED = 'CLEAR_CHECKED';\nexport const SET_SELECTED_MESSAGE_TYPE = 'SET_SELECTED_MESSAGE_TYPE';\nexport const CLEAR_SELECTED_MESSAGE_CONVERSATION = 'CLEAR_SELECTED_MESSAGE_CONVERSATION';\nexport const SET_SELECTED_MESSAGE_CONVERSATION = 'SET_SELECTED_MESSAGE_CONVERSATION';\nexport const SET_SELECTED_MESSAGE_CONVERSATION_SUCCESS = 'SET_SELECTED_MESSAGE_CONVERSATION_SUCCESS';\nexport const SET_SELECTED_MESSAGE_CONVERSATION_ERROR = 'SET_SELECTED_MESSAGE_CONVERSATION_ERROR';\nexport const UPDATE_INPUT_FIELDS = 'UPDATE_INPUT_FIELDS';\nexport const SET_IN_FEEDBACK_RECIPIENT_GROUP = 'SET_IN_FEEDBACK_RECIPIENT_GROUP';\nexport const SET_DISPLAY_TIME_DIFF = 'SET_DISPLAY_TIME_DIFF';\nexport const SET_DISPLAY_TIME_DIFF_SUCCESS = 'SET_DISPLAY_TIME_DIFF_SUCCESS';\nexport const SET_DISPLAY_TIME_DIFF_ERROR = 'SET_DISPLAY_TIME_DIFF_ERROR';\n/* Recipient actions */\n\nexport const RECIPIENT_SEARCH = 'RECIPIENT_SEARCH';\nexport const RECIPIENT_SEARCH_SUCCESS = 'RECIPIENT_SEARCH_SUCCESS';\nexport const RECIPIENT_SEARCH_ERROR = 'RECIPIENT_SEARCH_ERROR';\nexport const ADD_RECIPIENTS = 'ADD_RECIPIENTS';\nexport const ADD_RECIPIENTS_SUCCESS = 'ADD_RECIPIENTS_SUCCESS';\nexport const ADD_RECIPIENTS_ERROR = 'ADD_RECIPIENTS_ERROR';\nexport const ADD_RECIPIENT_BY_ID_SUCCESS = 'ADD_RECIPIENT_BY_ID_SUCCESS';\n/* Attachments */\n\nexport const ADD_ATTACHMENT = 'ADD_ATTACHMENT';\nexport const ADD_ATTACHMENT_SUCCESS = 'ADD_ATTACHMENT_SUCCESS';\nexport const ADD_ATTACHMENT_ERROR = 'ADD_ATTACHMENT_ERROR';\nexport const DOWNLOAD_ATTACHMENT = 'DOWNLOAD_ATTACHMENT';\nexport const DOWNLOAD_ATTACHMENT_SUCCESS = 'DOWNLOAD_ATTACHMENT_SUCCESS';\nexport const DOWNLOAD_ATTACHMENT_ERROR = 'DOWNLOAD_ATTACHMENT_ERROR';\nexport const REMOVE_ATTACHMENT = 'REMOVE_ATTACHMENT';\nexport const CLEAR_ATTACHMENTS = 'CLEAR_ATTACHMENTS';\nexport const CANCEL_ATTACHMENT = 'CANCEL_ATTACHMENT';\n/* DHIS2 CORE VERSION */\n\nexport const SET_DHIS2_CORE_VERSION = 'SET_DHIS2_CORE_VERSION';","export const pageSize = 35;\nexport const fontFamily = 'Roboto, Helvetica, Arial, sans-serif';\nexport const NEUTRAL = 'NEUTRAL';\nexport const POSITIVE = 'POSITIVE';\nexport const NEGATIVE = 'NEGATIVE';","export function dedupeById(list) {\n  if (!Array.isArray(list)) {\n    return undefined;\n  }\n\n  const lookup = new Set();\n  return list.filter(item => {\n    if (lookup.has(item.id)) {\n      return false;\n    }\n\n    lookup.add(item.id);\n    return true;\n  });\n}\nexport function findIndexOfId(list, id) {\n  const len = list.length;\n\n  for (let index = 0; index < len; index++) {\n    if (list[index].id === id) {\n      return index;\n    }\n  }\n\n  return undefined;\n}\nexport function debounce(fn, delay) {\n  let timer = null;\n  return function () {\n    const context = this;\n    const args = arguments;\n    clearTimeout(timer);\n    timer = setTimeout(function () {\n      fn.apply(context, args);\n    }, delay);\n  };\n}\nexport function supportsAttachments(dhis2CoreVersion) {\n  return dhis2CoreVersion > 30;\n}\nexport function supportsUserLookupEndPoint(dhis2CoreVersion) {\n  return dhis2CoreVersion > 34;\n}","import { supportsUserLookupEndPoint } from './helpers.js';\nconst MAX_RECIPIENT = 10;\n\nfunction createUserQuery({\n  searchValue,\n  searchOnlyFeedbackRecipients,\n  feedbackRecipientsId,\n  dhis2CoreVersion\n}) {\n  if (supportsUserLookupEndPoint(dhis2CoreVersion)) {\n    // version >= v2.35\n    return {\n      resource: searchOnlyFeedbackRecipients ? 'userLookup/feedbackRecipients' : 'userLookup',\n      params: {\n        query: searchValue\n      }\n    };\n  } else {\n    // version < 2.35\n    const filter = [\"displayName:token:\".concat(searchValue)];\n\n    if (searchOnlyFeedbackRecipients) {\n      filter.push(\"userGroups.id:eq:\".concat(feedbackRecipientsId));\n    }\n\n    return {\n      resource: 'users',\n      params: {\n        filter,\n        pageSize: MAX_RECIPIENT\n      }\n    };\n  }\n}\n\nfunction createOrganisationUnitQuery(searchValue) {\n  return {\n    resource: 'organisationUnits',\n    params: {\n      fields: ['id', 'displayName'],\n      pageSize: MAX_RECIPIENT,\n      filter: [\"displayName:token:\".concat(searchValue), 'users:gte:1']\n    }\n  };\n}\n\nfunction createUserGroupQuery(searchValue) {\n  return {\n    resource: 'userGroups',\n    params: {\n      fields: 'id, displayName',\n      pageSize: MAX_RECIPIENT,\n      filter: [\"displayName:token:\".concat(searchValue)]\n    }\n  };\n}\n\nexport default function createRecipientSearchQuery({\n  searchValue,\n  searchOnlyUsers,\n  searchOnlyFeedbackRecipients,\n  feedbackRecipientsId,\n  dhis2CoreVersion\n}) {\n  const userQuery = createUserQuery({\n    searchValue,\n    searchOnlyFeedbackRecipients,\n    feedbackRecipientsId,\n    dhis2CoreVersion\n  });\n  return searchOnlyUsers ? {\n    users: userQuery\n  } : {\n    users: userQuery,\n    organisationUnits: createOrganisationUnitQuery(searchValue),\n    userGroups: createUserGroupQuery(searchValue)\n  };\n}","import { pageSize } from '../constants/development.js';\nimport createRecipientSearchQuery from '../utils/createRecipientSearchQuery.js';\nconst initialMessageConversationFields = ['id', 'displayName', 'subject', 'messageType', 'lastSender[id, displayName]', 'assignee[id, displayName]', 'status', 'priority', 'lastUpdated', 'read', 'lastMessage', 'followUp'];\nconst messageConversationFields = ['*', 'assignee[id, displayName]', 'messages[*,sender[id,displayName]', 'attachments[id, name, contentLength]]', 'userMessages[user[id, displayName]]'];\nconst order = 'lastMessage:desc'; // The rest of the code in this module will expect that\n// engine has been set and can use it safely\n\nlet engine = null;\nexport const setEngine = engineInstance => {\n  engine = engineInstance;\n};\nexport const getCurrentUser = () => engine.query({\n  currentUser: {\n    resource: 'me',\n    params: {\n      fields: ['id', 'authorities', 'userGroups[id]']\n    }\n  }\n});\nexport const getMessageConversations = async ({\n  messageType,\n  page,\n  messageFilter,\n  status,\n  priority,\n  assignedToMeFilter,\n  markedForFollowUpFilter,\n  unreadFilter,\n  currentUser\n}) => {\n  const filter = [\"messageType:eq:\".concat(messageType)];\n\n  if (status) {\n    filter.push(\"status:eq:\".concat(status));\n  }\n\n  if (priority) {\n    filter.push(\"priority:eq:\".concat(priority));\n  }\n\n  if (markedForFollowUpFilter) {\n    filter.push('followUp:eq:true');\n  }\n\n  if (unreadFilter) {\n    filter.push('read:eq:false');\n  }\n\n  if (assignedToMeFilter) {\n    filter.push(\"assignee.id:eq:\".concat(currentUser.id));\n  }\n\n  const query = {\n    resource: 'messageConversations',\n    params: {\n      filter,\n      pageSize,\n      page,\n      fields: initialMessageConversationFields,\n      order,\n      queryString: messageFilter\n    }\n  };\n  const {\n    messageConversations\n  } = await engine.query({\n    messageConversations: query\n  });\n  return messageConversations;\n};\nexport const getMessageConversation = async ({\n  id\n}) => {\n  const {\n    messageConversation\n  } = await engine.query({\n    messageConversation: {\n      resource: 'messageConversations',\n      id,\n      params: {\n        fields: messageConversationFields\n      }\n    }\n  });\n  return messageConversation;\n};\nexport const getServerDate = async () => {\n  const {\n    systemInfo\n  } = await engine.query({\n    systemInfo: {\n      resource: 'system/info'\n    }\n  });\n  return systemInfo.serverDate;\n};\nexport const updateMessageConversationStatus = (messageConversationId, value) => engine.mutate({\n  resource: \"messageConversations/\".concat(messageConversationId, \"/status\"),\n  type: 'create',\n  params: {\n    messageConversationStatus: value\n  }\n});\nexport const updateMessageConversationPriority = (messageConversationId, value) => engine.mutate({\n  resource: \"messageConversations/\".concat(messageConversationId, \"/priority\"),\n  type: 'create',\n  params: {\n    messageConversationPriority: value\n  }\n});\nexport const updateMessageConversationAssignee = async (messageConversationId, value) => {\n  const mutation = value ? {\n    resource: \"messageConversations/\".concat(messageConversationId, \"/assign\"),\n    type: 'create',\n    params: {\n      userId: value\n    }\n  } : {\n    resource: \"messageConversations\",\n    id: \"\".concat(messageConversationId, \"/assign\"),\n    type: 'delete'\n  };\n  return await engine.mutate(mutation);\n};\nexport const updateMessageConversationFollowup = (messageConversationIds, value) => engine.mutate({\n  resource: \"messageConversations/\".concat(value ? 'followup' : 'unfollowup'),\n  type: 'create',\n  data: messageConversationIds\n});\nexport const getNrOfUnread = async messageType => {\n  const {\n    messageConversations\n  } = await engine.query({\n    messageConversations: {\n      resource: 'messageConversations',\n      params: {\n        fields: ['read'],\n        filter: ['read:eq:false', \"messageType:eq:\".concat(messageType)],\n        pageSize: 1\n      }\n    }\n  });\n  return messageConversations.pager.total;\n};\nexport const sendMessage = ({\n  subject,\n  users,\n  userGroups,\n  organisationUnits,\n  text,\n  attachments\n}) => engine.mutate({\n  resource: 'messageConversations',\n  type: 'create',\n  data: {\n    subject,\n    users,\n    userGroups,\n    organisationUnits,\n    text,\n    attachments\n  }\n});\nexport const sendFeedbackMessage = (subject, text) => engine.mutate({\n  resource: 'messageConversations/feedback',\n  type: 'create',\n  params: {\n    subject\n  },\n  data: text\n});\nexport const replyMessage = async ({\n  message,\n  internalReply,\n  attachments,\n  id\n}) => {\n  const params = {\n    internal: internalReply\n  };\n\n  if (attachments.length > 0) {\n    params.attachments = attachments;\n  }\n\n  return await engine.mutate({\n    resource: \"messageConversations/\".concat(id),\n    type: 'create',\n    params,\n    data: message\n  });\n};\nexport const deleteMessageConversation = (messageConversationId, currentUserId) => engine.mutate({\n  resource: \"messageConversations/\".concat(messageConversationId, \"/\").concat(currentUserId),\n  type: 'delete'\n});\nexport const markRead = markedReadConversations => engine.mutate({\n  resource: 'messageConversations/read',\n  type: 'create',\n  data: markedReadConversations\n});\nexport const markUnread = markedUnreadConversations => engine.mutate({\n  resource: 'messageConversations/unread',\n  type: 'create',\n  data: markedUnreadConversations\n});\nexport const isInFeedbackRecipientGroup = async currentUser => {\n  const {\n    configuration: {\n      feedbackRecipients\n    }\n  } = await engine.query({\n    configuration: {\n      resource: 'configuration'\n    }\n  });\n  const authorized = currentUser.authorities.includes('ALL') || currentUser.userGroups.some(({\n    id\n  }) => id === feedbackRecipients.id);\n  const feedbackRecipientsId = feedbackRecipients.id;\n  return {\n    authorized,\n    feedbackRecipientsId\n  };\n};\nexport const searchRecipients = async ({\n  searchValue,\n  searchOnlyUsers,\n  searchOnlyFeedbackRecipients,\n  feedbackRecipientsId,\n  dhis2CoreVersion\n}) => {\n  var _results$users, _results$organisation, _results$userGroups;\n\n  const query = createRecipientSearchQuery({\n    searchValue,\n    searchOnlyUsers,\n    searchOnlyFeedbackRecipients,\n    feedbackRecipientsId,\n    dhis2CoreVersion\n  });\n  const results = await engine.query(query);\n  return {\n    users: (_results$users = results.users) === null || _results$users === void 0 ? void 0 : _results$users.users,\n    organisationUnits: results === null || results === void 0 ? void 0 : (_results$organisation = results.organisationUnits) === null || _results$organisation === void 0 ? void 0 : _results$organisation.organisationUnits,\n    userGroups: results === null || results === void 0 ? void 0 : (_results$userGroups = results.userGroups) === null || _results$userGroups === void 0 ? void 0 : _results$userGroups.userGroups\n  };\n};\nexport const addRecipients = ({\n  users,\n  userGroups,\n  organisationUnits,\n  messageConversationId\n}) => engine.mutate({\n  resource: \"messageConversations/\".concat(messageConversationId, \"/recipients\"),\n  type: 'create',\n  data: {\n    users,\n    userGroups,\n    organisationUnits\n  }\n});\nexport const getUserById = async id => {\n  const {\n    user\n  } = await engine.query({\n    user: {\n      resource: 'users',\n      id,\n      params: {\n        fields: 'id,displayName'\n      }\n    }\n  });\n  return { ...user,\n    type: 'user'\n  };\n};\nexport const addAttachment = attachment => engine.mutate({\n  resource: 'fileResources',\n  type: 'create',\n  params: {\n    domain: 'MESSAGE_ATTACHMENT'\n  },\n  data: {\n    file: attachment\n  }\n});\n\nconst joinPath = (...parts) => {\n  const realParts = parts.filter(part => !!part);\n  return realParts.map(part => part.replace(/^\\/+|\\/+$/g, '')).join('/');\n};\n\nexport const downloadAttachment = (messageConversationId, messageId, attachmentId) => {\n  const filePath = joinPath(engine.link.baseUrl, engine.link.apiPath, 'messageConversations', messageConversationId, messageId, 'attachments', attachmentId);\n  const link = document.createElement('a');\n  link.href = filePath;\n  link.download = filePath.split('/').pop();\n  link.target = '_blank';\n  document.body.appendChild(link);\n  link.click();\n  document.body.removeChild(link);\n};","import * as actions from '../constants/actions.js';\nimport log from 'loglevel';\nimport * as api from '../api/api.js';\nimport moment from 'moment'; // Simple hack to solve negative time difference\n\nconst FUTURE_HACK = 5000;\n\nconst createAction = (type, payload) => ({\n  type,\n  payload\n});\n/******************\n * THUNKS SECTION *\n ******************/\n\n\nexport const setCurrentUser = () => async dispatch => {\n  dispatch(createAction(actions.SET_CURRENT_USER));\n\n  try {\n    const {\n      currentUser\n    } = await api.getCurrentUser();\n    dispatch(createAction(actions.SET_CURRENT_USER_SUCCESS, currentUser));\n  } catch {\n    dispatch(createAction(actions.SET_CURRENT_USER_ERROR, 'Could not load current user'));\n  }\n};\nexport const setDisplayTimeDiff = () => async dispatch => {\n  try {\n    const serverDate = await api.getServerDate();\n    const displayTimeDiff = moment().diff(moment(serverDate)) - FUTURE_HACK;\n    dispatch(createAction(actions.SET_DISPLAY_TIME_DIFF_SUCCESS, displayTimeDiff));\n  } catch (error) {\n    dispatch(createAction(actions.SET_DISPLAY_TIME_DIFF_ERROR, {\n      error\n    }));\n  }\n};\nexport const setSelectedMessageConversation = messageConversation => async dispatch => {\n  dispatch(createAction(actions.SET_SELECTED_MESSAGE_CONVERSATION));\n\n  try {\n    const result = await api.getMessageConversation(messageConversation);\n    dispatch(createAction(actions.SET_SELECTED_MESSAGE_CONVERSATION_SUCCESS, {\n      messageConversation: result\n    }));\n  } catch (error) {\n    dispatch(createAction(actions.SET_SELECTED_MESSAGE_CONVERSATION_ERROR, {\n      error\n    }));\n  }\n};\nexport const updateMessageConversations = ({\n  messageConversationIds,\n  identifier,\n  value,\n  messageType,\n  selectedMessageConversation\n}) => async dispatch => {\n  if (identifier === 'FOLLOW_UP') {\n    try {\n      await api.updateMessageConversationFollowup(messageConversationIds, value);\n      dispatch(createAction(actions.MESSAGE_CONVERSATION_UPDATE_SUCCESS, {\n        messageType: messageType,\n        page: 1,\n        identifier: identifier\n      }));\n      dispatch(loadMessageConversations());\n    } catch (error) {\n      dispatch(createAction(actions.MESSAGE_CONVERSATION_UPDATE_ERROR, {\n        error\n      }));\n    }\n  } else {\n    const promises = messageConversationIds.map(messageConversationId => {\n      let promise;\n\n      switch (identifier) {\n        case 'STATUS':\n          promise = api.updateMessageConversationStatus(messageConversationId, value);\n          break;\n\n        case 'PRIORITY':\n          promise = api.updateMessageConversationPriority(messageConversationId, value);\n          break;\n\n        case 'ASSIGNEE':\n          if (value !== undefined && messageType.id === 'VALIDATION_RESULT') {\n            promise = api.addRecipients({\n              users: value.map(value => ({\n                id: value\n              })),\n              userGroups: [],\n              organisationUnits: [],\n              messageConversationId\n            }).then(() => api.updateMessageConversationAssignee(messageConversationId, value));\n          } else {\n            promise = api.updateMessageConversationAssignee(messageConversationId, value);\n          }\n\n          break;\n\n        default:\n          log.error('Unexpected identifier for updateMessageConversations');\n          break;\n      }\n\n      return promise;\n    });\n\n    try {\n      await Promise.all(promises);\n      dispatch(createAction(actions.MESSAGE_CONVERSATION_UPDATE_SUCCESS, {\n        messageType: messageType,\n        page: 1,\n        identifier: identifier\n      }));\n      dispatch(loadMessageConversations());\n    } catch (error) {\n      dispatch(createAction(actions.MESSAGE_CONVERSATION_UPDATE_ERROR, {\n        error\n      }));\n    }\n  }\n\n  if (selectedMessageConversation) {\n    dispatch(setSelectedMessageConversation(selectedMessageConversation));\n  }\n};\nexport const loadMessageConversations = (messageType, selectedMessageType, loadMore = false) => async (dispatch, getState) => {\n  const promises = [];\n  const state = getState();\n  const {\n    messageFilter,\n    statusFilter: status,\n    priorityFilter: priority,\n    assignedToMeFilter,\n    markedForFollowUpFilter,\n    unreadFilter,\n    currentUser\n  } = state.messaging; // Default fallback values so this action can be called without arguments\n\n  messageType = messageType || state.messaging.selectedMessageType;\n  selectedMessageType = selectedMessageType || state.messaging.selectedMessageType.id;\n  dispatch(createAction(actions.LOAD_MESSAGE_CONVERSATIONS, {\n    messageType,\n    loadMore\n  }));\n\n  try {\n    for (let i = 1; i <= messageType.page; i++) {\n      const promise = api.getMessageConversations({\n        messageType: messageType.id,\n        page: i,\n        messageFilter,\n        status,\n        priority,\n        assignedToMeFilter,\n        markedForFollowUpFilter,\n        unreadFilter,\n        currentUser\n      }).then(result => ({\n        messageConversations: result.messageConversations,\n        pager: result.pager\n      }));\n      promises.push(promise);\n    }\n\n    const result = await Promise.all(promises);\n    const nrOfUnread = await api.getNrOfUnread(messageType.id);\n    const messageConversations = result.reduce((accumulated, r) => accumulated.concat(r.messageConversations), []);\n    dispatch(createAction(actions.MESSAGE_CONVERSATIONS_LOAD_SUCCESS, {\n      messageConversations,\n      pager: result[result.length - 1].pager,\n      messageType,\n      selectedMessageType,\n      nrOfUnread\n    }));\n  } catch (error) {\n    dispatch(createAction(actions.MESSAGE_CONVERSATIONS_LOAD_ERROR, {\n      error\n    }));\n  }\n};\nexport const deleteMessageConversations = (messageConversationIds, messageType) => async (dispatch, getState) => {\n  try {\n    const state = getState();\n    const {\n      currentUser\n    } = state.messaging;\n    const promises = messageConversationIds.map(messageConversationId => api.deleteMessageConversation(messageConversationId, currentUser.id));\n    await Promise.all(promises);\n    dispatch(createAction(actions.MESSAGE_CONVERSATIONS_DELETE_SUCCESS, {\n      messageType: messageType,\n      page: 1\n    }));\n    dispatch(loadMessageConversations());\n  } catch (error) {\n    dispatch(createAction(actions.MESSAGE_CONVERSATIONS_DELETE_ERROR, {\n      error\n    }));\n  }\n};\nexport const sendMessage = ({\n  users,\n  userGroups,\n  organisationUnits,\n  messageType\n}) => async (dispatch, getState) => {\n  try {\n    const {\n      messaging: {\n        subject,\n        input,\n        attachments\n      }\n    } = getState();\n    await api.sendMessage({\n      subject,\n      users,\n      userGroups,\n      organisationUnits,\n      text: input,\n      attachments\n    });\n    dispatch(createAction(actions.SEND_MESSAGE_SUCCESS, {\n      messageType,\n      page: 1\n    }));\n    dispatch(loadMessageConversations());\n  } catch (error) {\n    dispatch(createAction(actions.SEND_MESSAGE_ERROR, {\n      error\n    }));\n  }\n};\nexport const sendFeedbackMessage = messageType => async (dispatch, getState) => {\n  const state = getState();\n\n  try {\n    await api.sendFeedbackMessage(state.messaging.subject, state.messaging.input);\n    dispatch(createAction(actions.SEND_MESSAGE_SUCCESS, {\n      messageType: messageType,\n      page: 1\n    }));\n    dispatch(loadMessageConversations());\n  } catch (error) {\n    dispatch(createAction(actions.SEND_MESSAGE_ERROR, {\n      error\n    }));\n  }\n};\nexport const replyMessage = ({\n  message,\n  internalReply,\n  messageConversation,\n  messageType\n}) => async (dispatch, getState) => {\n  try {\n    const {\n      id\n    } = messageConversation;\n    const state = getState();\n    const attachments = state.messaging.attachments.map(attachment => attachment.id);\n    await api.replyMessage({\n      message,\n      internalReply,\n      attachments,\n      id\n    });\n    dispatch(createAction(actions.REPLY_MESSAGE_SUCCESS, {\n      messageConversation: messageConversation,\n      messageType: messageType,\n      page: 1\n    }));\n    dispatch(loadMessageConversations());\n    dispatch(setSelectedMessageConversation(messageConversation));\n  } catch (error) {\n    dispatch(createAction(actions.REPLY_MESSAGE_ERROR, {\n      error\n    }));\n  }\n};\nexport const markMessageConversations = (mode, markedConversations, messageType) => async dispatch => {\n  try {\n    await (mode === 'read' ? api.markRead(markedConversations) : api.markUnread(markedConversations));\n    dispatch(createAction(actions.MARK_MESSAGE_CONVERSATIONS_SUCCESS, {\n      messageType: messageType,\n      page: 1\n    }));\n    dispatch(loadMessageConversations());\n  } catch (error) {\n    dispatch(createAction(actions.MARK_MESSAGE_CONVERSATIONS_ERROR, {\n      error\n    }));\n  }\n};\nexport const addRecipients = ({\n  users,\n  userGroups,\n  organisationUnits,\n  messageConversation,\n  messageType\n}) => async dispatch => {\n  try {\n    const {\n      id: messageConversationId\n    } = messageConversation;\n    await api.addRecipients({\n      users,\n      userGroups,\n      organisationUnits,\n      messageConversationId\n    });\n    dispatch(createAction(actions.ADD_RECIPIENTS_SUCCESS, {\n      messageConversation: messageConversation,\n      messageType: messageType,\n      page: 1\n    }));\n    dispatch(setSelectedMessageConversation(messageConversation));\n  } catch (error) {\n    dispatch(createAction(actions.ADD_RECIPIENTS_ERROR, {\n      error\n    }));\n  }\n};\nexport const addRecipientByUserId = id => async dispatch => {\n  try {\n    const user = await api.getUserById(id);\n    dispatch(createAction(actions.ADD_RECIPIENT_BY_ID_SUCCESS, user));\n  } catch (error) {\n    console.error(error); // No action required, the field will just be empty\n  }\n};\nexport const addAttachment = attachment => async dispatch => {\n  dispatch(createAction(actions.ADD_ATTACHMENT, attachment));\n\n  try {\n    const result = await api.addAttachment(attachment);\n    dispatch(createAction(actions.ADD_ATTACHMENT_SUCCESS, {\n      id: result.response.fileResource.id,\n      name: attachment.name,\n      contentLength: result.response.fileResource.contentLength\n    }));\n  } catch (error) {\n    dispatch(createAction(actions.ADD_ATTACHMENT_ERROR, {\n      error\n    }));\n  }\n};\nexport const downloadAttachment = (messageConversationId, messageId, attachmentId) => dispatch => {\n  api.downloadAttachment(messageConversationId, messageId, attachmentId);\n  dispatch(createAction(actions.DOWNLOAD_ATTACHMENT_SUCCESS));\n};\n/************************\n * PLAIN ACTION SECTION *\n ************************/\n\nexport const clearSnackMessage = () => createAction(actions.CLEAR_SNACK_MESSAGE);\nexport const clearCheckedIds = () => createAction(actions.CLEAR_CHECKED);\nexport const clearSelectedMessageConversation = () => createAction(actions.CLEAR_SELECTED_MESSAGE_CONVERSATION);\nexport const displaySnackMessage = ({\n  message,\n  onSnackActionClick,\n  onSnackRequestClose,\n  snackType\n}) => createAction(actions.DISPLAY_SNACK_MESSAGE, {\n  message,\n  onSnackActionClick,\n  onSnackRequestClose,\n  snackType\n});\nexport const setAllChecked = messageConversationIds => createAction(actions.SET_ALL_CHECKED, {\n  messageConversationIds\n});\nexport const setChecked = (messageConversation, selectedValue) => createAction(actions.SET_CHECKED, {\n  messageConversation,\n  selectedValue\n});\nexport const setFilter = (filter, filterType) => createAction(actions.SET_FILTER, {\n  filter,\n  filterType\n});\nexport const updateInputFields = (subject, input, recipients) => createAction(actions.UPDATE_INPUT_FIELDS, {\n  subject,\n  input,\n  recipients\n});\nexport const clearAttachments = () => createAction(actions.CLEAR_ATTACHMENTS);\nexport const setSelectedMessageType = messageTypeId => createAction(actions.SET_SELECTED_MESSAGE_TYPE, {\n  messageTypeId\n});\nexport const removeAttachment = attachmentId => createAction(actions.REMOVE_ATTACHMENT, {\n  attachmentId\n});\nexport const cancelAttachment = attachmentName => createAction(actions.CANCEL_ATTACHMENT, {\n  attachmentName\n});\nexport const setIsInFeedbackRecipientGroup = isInFeedbackRecipientGroup => createAction(actions.SET_IN_FEEDBACK_RECIPIENT_GROUP, {\n  isInFeedbackRecipientGroup\n});\nexport const setDhis2CoreVersion = version => createAction(actions.SET_DHIS2_CORE_VERSION, version);","function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { Component } from 'react';\nimport propTypes from '@dhis2/prop-types';\nimport { connect } from 'react-redux';\nimport Snackbar from 'material-ui/Snackbar';\nimport { clearSnackMessage } from '../../actions/index.js';\nimport { compose, pure } from 'recompose';\nimport theme from '../../styles/theme.js';\nconst DEFAULT_MESSAGE_DURATION = 4000;\nconst contentColorStyle = {\n  NEGATIVE: theme.palette.negative,\n  NEUTRAL: theme.palette.primary1Color,\n  POSITIVE: theme.palette.alternateTextColor\n};\n\nclass CustomSnackBar extends Component {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"closeMessage\", () => {\n      this.props.clearSnackMessage();\n      this.setState({\n        show: false\n      });\n      this.props.onSnackRequestClose && this.props.onSnackRequestClose();\n    });\n\n    this.state = {\n      show: false\n    };\n  }\n\n  componentDidUpdate(_prevProps, prevState) {\n    if (!prevState.show && this.props.message) {\n      this.setState({\n        show: true\n      });\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(Snackbar, {\n      open: this.props.message !== '' && this.state.show,\n      message: this.props.message || 'Missing snackbar message',\n      autoHideDuration: DEFAULT_MESSAGE_DURATION,\n      onRequestClose: this.closeMessage,\n      action: this.props.onSnackActionClick && 'undo',\n      onActionClick: () => {\n        this.props.onSnackActionClick();\n        this.setState({\n          show: false\n        });\n      },\n      contentStyle: {\n        color: contentColorStyle[this.props.type]\n      },\n      style: {\n        pointerEvents: 'none',\n        whiteSpace: 'nowrap'\n      },\n      bodyStyle: {\n        pointerEvents: 'initial',\n        maxWidth: 'none'\n      }\n    });\n  }\n\n}\n\nCustomSnackBar.propTypes = {\n  clearSnackMessage: propTypes.func,\n  message: propTypes.string,\n  type: propTypes.oneOf(['NEGATIVE', 'NEUTRAL', 'POSITIVE']),\n  onSnackActionClick: propTypes.func,\n  onSnackRequestClose: propTypes.func\n};\n\nconst mapStateToProps = state => ({\n  message: state.messaging.snackMessage,\n  type: state.messaging.snackType,\n  onSnackActionClick: state.messaging.onSnackActionClick,\n  onSnackRequestClose: state.messaging.onSnackRequestClose\n});\n\nexport default compose(connect(mapStateToProps, {\n  clearSnackMessage\n}), pure)(CustomSnackBar);","import { createHashHistory } from 'history';\nexport default createHashHistory();","import React from 'react';\nimport propTypes from '@dhis2/prop-types';\nimport FlatButton from 'material-ui/FlatButton';\nimport LinearProgress from 'material-ui/LinearProgress';\nimport Clear from 'material-ui-icons/Clear';\nimport Download from 'material-ui-icons/CloudDownload';\nimport theme from '../../styles/theme.js';\nimport './Attachments.css';\n\nconst Attachments = ({\n  dataDirection,\n  attachments,\n  style,\n  removeAttachment,\n  downloadAttachment,\n  cancelAttachment\n}) => /*#__PURE__*/React.createElement(\"div\", {\n  className: \"attachment\",\n  style: { ...style\n  }\n}, attachments.map((attachment, index) => /*#__PURE__*/React.createElement(Attachment // combining name with index prevents errors when user uploads files with duplicate names\n, {\n  key: \"\".concat(attachment.name, \"-\").concat(index),\n  dataDirection: dataDirection,\n  attachment: attachment,\n  removeAttachment: removeAttachment,\n  downloadAttachment: downloadAttachment,\n  cancelAttachment: cancelAttachment\n})));\n\nAttachments.propTypes = {\n  attachments: propTypes.array,\n  cancelAttachment: propTypes.func,\n  dataDirection: propTypes.string,\n  downloadAttachment: propTypes.func,\n  removeAttachment: propTypes.func,\n  style: propTypes.object\n};\n\nconst Attachment = ({\n  dataDirection,\n  attachment,\n  removeAttachment,\n  downloadAttachment,\n  cancelAttachment\n}) => {\n  return /*#__PURE__*/React.createElement(FlatButton, {\n    className: \"attachment__button\",\n    backgroundColor: theme.palette.accent2Color,\n    label: \"\".concat(attachment.name, \" (\").concat(parseFloat(parseInt(attachment.contentLength, 10) / 1000000).toFixed(2), \" MB)\"),\n    labelPosition: \"after\",\n    onClick: () => {\n      dataDirection === 'download' ? downloadAttachment(attachment) : attachment.loading ? cancelAttachment(attachment.name) : removeAttachment(attachment);\n    },\n    icon: dataDirection === 'download' ? /*#__PURE__*/React.createElement(Download, null) : /*#__PURE__*/React.createElement(Clear, null)\n  }, attachment.loading && /*#__PURE__*/React.createElement(LinearProgress, {\n    className: 'attachment__progress',\n    mode: \"indeterminate\"\n  }));\n};\n\nAttachment.propTypes = {\n  attachment: propTypes.object,\n  cancelAttachment: propTypes.func,\n  dataDirection: propTypes.string,\n  downloadAttachment: propTypes.func,\n  removeAttachment: propTypes.func\n};\nexport default Attachments;","import React from 'react';\nimport propTypes from '@dhis2/prop-types';\nimport Divider from 'material-ui/Divider';\nimport CardText from 'material-ui/Card/CardText';\nimport Attachments from '../Attachments/Attachments.js';\nimport i18n from '@dhis2/d2-i18n';\nimport Linkify from 'react-linkify';\nimport theme from '../../styles/theme.js';\nimport { fontFamily } from '../../constants/development.js';\nimport moment from 'moment';\nconst styles = {\n  canvas(backgroundColor) {\n    return {\n      backgroundColor,\n      padding: '16px 16px 16px 16px'\n    };\n  },\n\n  innerCanvas: {\n    margin: '',\n    paddingBottom: '0px'\n  },\n  cardText: {\n    padding: '16px 0px 16px 0px',\n    fontFamily,\n    whiteSpace: 'pre-wrap',\n    wordBreak: 'break-word'\n  },\n  fromFormat: {\n    fontFamily\n  },\n  datePlacement: {\n    display: 'flex',\n    justifyContent: 'flex-end',\n    marginRight: '10px'\n  },\n  dateFormat: {\n    overflow: 'hidden',\n    textOverflow: 'ellipsis',\n    whiteSpace: 'nowrap',\n    fontFamily\n  }\n};\n\nconst Message = ({\n  displayTimeDiff,\n  message,\n  currentUser,\n  lastMessage,\n  downloadAttachment,\n  cancelAttachment,\n  enableAttachments\n}) => {\n  const fromTitle = message.sender ? currentUser && currentUser.id === message.sender.id ? 'me' : message.sender.displayName : 'system';\n  const today = moment();\n  const messageDate = moment(message.created).add(displayTimeDiff);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: styles.canvas(theme.palette.canvasColor)\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: styles.innerCanvas\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: styles.fromFormat\n  }, message.internal ? i18n.t(\"Internal message from \".concat(fromTitle)) : i18n.t(\"Message from \".concat(fromTitle))), /*#__PURE__*/React.createElement(\"div\", {\n    placement: 'bottom',\n    style: styles.datePlacement\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: styles.dateFormat\n  }, today.diff(messageDate, 'hours') < 72 ? \"\".concat(messageDate.from(today), \", \").concat(messageDate.format('HH:mm')) : today.year() === messageDate.year() ? messageDate.format('MMM DD, HH:mm') : messageDate.format('MMM DD, YYYY HH:mm'))), enableAttachments && /*#__PURE__*/React.createElement(Attachments, {\n    dataDirection: 'download',\n    style: {\n      paddingLeft: 0\n    },\n    attachments: message.attachments,\n    downloadAttachment: downloadAttachment,\n    cancelAttachment: cancelAttachment\n  }), /*#__PURE__*/React.createElement(CardText, {\n    style: styles.cardText\n  }, /*#__PURE__*/React.createElement(Linkify, null, message.text))), !lastMessage && /*#__PURE__*/React.createElement(Divider, null));\n};\n\nMessage.propTypes = {\n  cancelAttachment: propTypes.func,\n  currentUser: propTypes.object,\n  displayTimeDiff: propTypes.number,\n  downloadAttachment: propTypes.func,\n  enableAttachments: propTypes.bool,\n  lastMessage: propTypes.bool,\n  message: propTypes.object\n};\nexport default Message;","import React from 'react';\nimport propTypes from '@dhis2/prop-types';\nimport FlatButton from 'material-ui/FlatButton';\nimport AttachFile from 'material-ui-icons/AttachFile';\nimport i18n from '@dhis2/d2-i18n';\nimport './AttachmentUploadButton.css';\n\nconst createHandleChange = addAttachment => event => {\n  const files = event.target.files;\n  const hasFile = files.length > 0;\n\n  if (hasFile) {\n    addAttachment(files[0]);\n  }\n};\n\nconst AttachmentUploadButton = ({\n  addAttachment\n}) => /*#__PURE__*/React.createElement(FlatButton, {\n  className: \"attachment__upload-button\",\n  label: i18n.t('Upload attachment'),\n  labelPosition: \"after\",\n  containerElement: \"label\",\n  icon: /*#__PURE__*/React.createElement(AttachFile, null)\n}, /*#__PURE__*/React.createElement(\"input\", {\n  className: \"attachment__upload-button--input\",\n  type: \"file\",\n  onChange: createHandleChange(addAttachment)\n}));\n\nAttachmentUploadButton.propTypes = {\n  addAttachment: propTypes.func\n};\nexport default AttachmentUploadButton;","function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { Component } from 'react';\nimport propTypes from '@dhis2/prop-types';\nimport { connect } from 'react-redux';\nimport { compose } from 'recompose';\nimport { Card, CardActions, CardText } from 'material-ui/Card';\nimport RaisedButton from 'material-ui/RaisedButton';\nimport FlatButton from 'material-ui/FlatButton';\nimport TextField from 'material-ui/TextField';\nimport AttachmentUploadButton from '../Attachments/AttachmentUploadButton.js';\nimport Attachments from '../Attachments/Attachments.js';\nimport { supportsAttachments } from '../../utils/helpers.js';\nimport i18n from '@dhis2/d2-i18n';\nimport { replyMessage, setSelectedMessageType, updateInputFields, displaySnackMessage, addAttachment, removeAttachment, cancelAttachment } from '../../actions/index.js';\nimport { NEGATIVE } from '../../constants/development.js';\n\nclass ReplyCard extends Component {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"replyMessage\", internalReply => {\n      const {\n        input: message,\n        selectedMessageConversation: messageConversation,\n        selectedMessageType: messageType\n      } = this.props;\n      this.props.replyMessage({\n        message,\n        internalReply,\n        messageConversation,\n        messageType\n      });\n      this.wipeInput();\n    });\n\n    _defineProperty(this, \"wipeInput\", () => {\n      this.props.updateInputFields('', '', []);\n      this.props.attachments.length > 0 && this.props.clearAttachments();\n      this.setState({\n        inputError: false\n      });\n    });\n\n    _defineProperty(this, \"texFieldUpdate\", (event, newValue) => {\n      this.props.updateInputFields('', newValue, []);\n    });\n\n    _defineProperty(this, \"handleDiscard\", () => {\n      const message = i18n.t('Reply discarded');\n      const snackType = NEGATIVE;\n\n      const onSnackActionClick = () => this.setState({\n        discardState: false\n      });\n\n      const onSnackRequestClose = () => {\n        this.setState({\n          discardState: false\n        });\n        this.wipeInput();\n      };\n\n      this.setState({\n        discardState: true\n      });\n      this.props.displaySnackMessage({\n        message,\n        onSnackActionClick,\n        onSnackRequestClose,\n        snackType\n      });\n      this.setState({\n        expanded: false\n      });\n    });\n\n    this.state = {\n      discardState: false\n    };\n  }\n\n  componentWillUnmount() {\n    this.wipeInput();\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(Card, {\n      style: {\n        marginTop: '5px'\n      },\n      expanded: true\n    }, /*#__PURE__*/React.createElement(CardText, {\n      style: {\n        padding: '0px 0px 0px 16px'\n      }\n    }, /*#__PURE__*/React.createElement(TextField, {\n      key: this.props.messageConversation.id,\n      id: this.props.messageConversation.id,\n      rows: 5,\n      underlineShow: false,\n      value: this.state.discardState ? '' : this.props.input,\n      multiLine: true,\n      fullWidth: true,\n      floatingLabelText: i18n.t('Message'),\n      onChange: this.texFieldUpdate\n    }), this.props.enableAttachments && !this.state.discardState && /*#__PURE__*/React.createElement(Attachments, {\n      dataDirection: 'upload',\n      attachments: this.props.attachments,\n      removeAttachment: attachment => this.props.removeAttachment(attachment.id),\n      cancelAttachment: this.props.cancelAttachment\n    }), /*#__PURE__*/React.createElement(CardActions, {\n      style: {\n        paddingLeft: '0px'\n      }\n    }, /*#__PURE__*/React.createElement(RaisedButton, {\n      primary: true,\n      label: i18n.t('Reply'),\n      disabled: this.props.input === '' || this.state.discardState,\n      onClick: () => this.replyMessage(false)\n    }), this.props.isInFeedbackRecipientGroup && this.props.selectedMessageType.id === 'TICKET' && /*#__PURE__*/React.createElement(FlatButton, {\n      primary: true,\n      label: i18n.t('Internal reply'),\n      disabled: this.props.input === '' || this.state.discardState,\n      onClick: () => this.replyMessage(true)\n    }), /*#__PURE__*/React.createElement(FlatButton, {\n      label: i18n.t('Discard'),\n      disabled: this.props.input === '' || this.state.discardState,\n      onClick: this.handleDiscard\n    }), this.props.enableAttachments && /*#__PURE__*/React.createElement(AttachmentUploadButton, {\n      addAttachment: attachment => {\n        this.props.addAttachment(attachment);\n      }\n    }), \")\")));\n  }\n\n}\n\nReplyCard.propTypes = {\n  addAttachment: propTypes.func,\n  attachments: propTypes.array,\n  cancelAttachment: propTypes.func,\n  clearAttachments: propTypes.func,\n  displaySnackMessage: propTypes.func,\n  enableAttachments: propTypes.bool,\n  input: propTypes.string,\n  isInFeedbackRecipientGroup: propTypes.bool,\n  messageConversation: propTypes.object,\n  removeAttachment: propTypes.func,\n  replyMessage: propTypes.func,\n  selectedMessageConversation: propTypes.object,\n  selectedMessageType: propTypes.object,\n  updateInputFields: propTypes.func\n};\n\nconst mapStateToProps = state => ({\n  selectedMessageConversation: state.messaging.selectedMessageConversation,\n  selectedMessageType: state.messaging.selectedMessageType,\n  messageTypes: state.messaging.messageTypes,\n  input: state.messaging.input,\n  isInFeedbackRecipientGroup: state.messaging.isInFeedbackRecipientGroup,\n  attachments: state.messaging.attachments,\n  enableAttachments: supportsAttachments(state.messaging.dhis2CoreVersion)\n});\n\nexport default compose(connect(mapStateToProps, {\n  replyMessage,\n  setSelectedMessageType,\n  updateInputFields,\n  displaySnackMessage,\n  addAttachment,\n  removeAttachment,\n  cancelAttachment\n}, null, {\n  pure: false\n}))(ReplyCard);","function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport propTypes from '@dhis2/prop-types';\nimport ChipInput from 'material-ui-chip-input';\nimport { debounce } from '../../utils/helpers.js';\nimport i18n from '@dhis2/d2-i18n';\nimport * as api from '../../api/api.js';\nconst searchDelay = 1200;\nconst minCharLength = 2;\n/*\n * An AutoComplete text field with suggestions from a given list of\n * identifiable objects. Selected objects are shown as chips in the text field.\n */\n\nclass SuggestionField extends Component {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"state\", {\n      input: '',\n      searchResult: [],\n      searchOnlyUsers: this.props.searchOnlyUsers,\n      searchOnlyFeedbackRecipients: this.props.searchOnlyFeedbackRecipients,\n      lastSearch: '',\n      errorText: undefined\n    });\n\n    _defineProperty(this, \"debouncedSearch\", debounce(this.search.bind(this), searchDelay));\n\n    _defineProperty(this, \"onSuggestionClick\", chip => {\n      if (this.props.onSuggestionClick !== undefined) {\n        this.props.onSuggestionClick(chip);\n      } else {\n        this.wipeInput();\n        this.debouncedSearch('');\n        const doInsert = !this.props.recipients.find(recipient => recipient.id === chip.id);\n        doInsert && this.props.updateRecipients([...this.props.recipients, this.state.searchResult.find(result => result.id === chip.id)]);\n      }\n    });\n\n    _defineProperty(this, \"onRemoveChip\", id => {\n      this.props.updateRecipients(this.props.recipients.filter(recipient => recipient.id !== id));\n    });\n\n    _defineProperty(this, \"wipeInput\", () => {\n      this.setState({\n        input: '',\n        searchResult: []\n      });\n    });\n\n    _defineProperty(this, \"updateInput\", input => {\n      this.debouncedSearch(input);\n      this.setState({\n        input\n      });\n    });\n  }\n\n  search(input) {\n    const doSearch = !this.state.searchResult.find(result => result.displayName === input) && input !== '' && input.length >= minCharLength;\n\n    if (doSearch) {\n      const {\n        feedbackRecipientsId,\n        searchOnlyUsers,\n        searchOnlyFeedbackRecipients,\n        dhis2CoreVersion\n      } = this.props;\n      api.searchRecipients({\n        searchValue: input,\n        searchOnlyUsers,\n        searchOnlyFeedbackRecipients,\n        feedbackRecipientsId,\n        dhis2CoreVersion\n      }).then(({\n        users,\n        userGroups,\n        organisationUnits\n      }) => {\n        const addType = type => result => ({ ...result,\n          type\n        });\n\n        let internalSearchResult = users.map(addType('user'));\n\n        if (!this.state.searchOnlyUsers) {\n          internalSearchResult = internalSearchResult.concat(userGroups.map(addType('userGroup'))).concat(organisationUnits.map(addType('organisationUnit')));\n        }\n\n        this.setState({\n          searchResult: internalSearchResult,\n          errorText: internalSearchResult.length === 0 ? i18n.t('No results found') : undefined\n        });\n      });\n    } else {\n      this.setState({\n        lastSearch: input,\n        searchResult: this.state.lastSearch !== '' && input === '' || input.length < minCharLength ? [] : this.state.searchResult,\n        errorText: input !== '' && input.length < minCharLength ? i18n.t(\"Please enter at least \".concat(minCharLength, \" characters\")) : this.state.searchWarning\n      });\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      style: { ...this.props.style,\n        height: this.props.inputHeight\n      }\n    }, /*#__PURE__*/React.createElement(ChipInput, {\n      style: {\n        marginBottom: 16\n      },\n      disabled: this.props.disabled === undefined ? false : this.props.disabled,\n      errorText: this.props.errorText || this.state.errorText,\n      value: this.props.recipients,\n      fullWidth: true,\n      openOnFocus: true,\n      searchText: this.state.input,\n      floatingLabelText: this.props.label,\n      dataSource: this.state.searchResult,\n      dataSourceConfig: {\n        text: 'displayName',\n        value: 'id'\n      },\n      onUpdateInput: this.updateInput,\n      onRequestAdd: chip => this.onSuggestionClick(chip),\n      onRequestDelete: id => this.onRemoveChip(id)\n    }));\n  }\n\n}\n\nSuggestionField.propTypes = {\n  dhis2CoreVersion: propTypes.number,\n  disabled: propTypes.bool,\n  errorText: propTypes.string,\n  feedbackRecipientsId: propTypes.string,\n  inputHeight: propTypes.string,\n  label: propTypes.string,\n  recipients: propTypes.array,\n  searchOnlyFeedbackRecipients: propTypes.bool,\n  searchOnlyUsers: propTypes.bool,\n  style: propTypes.object,\n  updateRecipients: propTypes.func,\n  onSuggestionClick: propTypes.func\n};\nexport default connect(state => ({\n  dhis2CoreVersion: state.messaging.dhis2CoreVersion\n}))(SuggestionField);","import React from 'react';\nimport propTypes from '@dhis2/prop-types';\nimport Subheader from 'material-ui/Subheader/Subheader';\nconst styles = {\n  subheaderTitle: {\n    height: '32px',\n    color: 'black',\n    paddingLeft: 0,\n    paddingRight: 16\n  },\n\n  subheader(color, fontWeight) {\n    return {\n      height: '32px',\n      overflow: 'hidden',\n      textOverflow: 'ellipsis',\n      whiteSpace: 'nowrap',\n      padding: 0,\n      color,\n      fontWeight\n    };\n  }\n\n};\n\nconst ExtendedChoiceLabel = ({\n  showTitle,\n  title,\n  label,\n  color,\n  fontWeight\n}) => {\n  const displayLabel = label && label !== 'NONE' ? title === 'Assignee' ? label : \"\".concat(label.charAt(0)).concat(label.toLowerCase().substr(1, label.length)) : '-';\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      flex: 2,\n      paddingLeft: 10,\n      maxWidth: 200\n    }\n  }, showTitle && /*#__PURE__*/React.createElement(Subheader, {\n    style: styles.subheaderTitle\n  }, \" \", title, \" \"), /*#__PURE__*/React.createElement(Subheader, {\n    style: styles.subheader(color, fontWeight)\n  }, displayLabel));\n};\n\nExtendedChoiceLabel.propTypes = {\n  color: propTypes.string,\n  fontWeight: propTypes.string,\n  label: propTypes.string,\n  showTitle: propTypes.bool,\n  title: propTypes.string\n};\nexport default ExtendedChoiceLabel;","import theme from '../styles/theme.js';\nimport { fontFamily } from '../constants/development.js';\nexport const styles = {\n  canvas: {\n    flex: '3 0',\n    overflowY: 'scroll',\n    overflowX: 'hidden',\n    height: 'calc(100vh - 110px)',\n    paddingTop: '10px'\n  },\n  innerCanvas: {\n    display: 'flex',\n    flexDirection: 'column',\n    margin: '0px 10px 0px 10px'\n  },\n  header: {\n    display: 'flex'\n  },\n  iconButton: {\n    display: 'flex',\n    alignSelf: 'center'\n  },\n  subjectSubheader: {\n    display: 'flex',\n    alignSelf: 'center',\n    fontSize: '20px',\n    fontFamily\n  },\n  participantsCanvas: {\n    display: 'flex',\n    flexDirection: 'column'\n  },\n  participants: {\n    paddingLeft: '12px',\n    paddingTop: '10px',\n    display: 'flex',\n    flexWrap: 'wrap'\n  },\n  chip: {\n    height: '32px',\n    marginRight: '3px',\n    marginBottom: '3px'\n  },\n  participantAddRow: {\n    display: 'flex'\n  },\n  participantsSuggestionField: {\n    paddingLeft: '12px',\n    marginBottom: '0px',\n    flex: 1\n  },\n  participantsAdd: {\n    alignSelf: 'flex-end',\n    marginBottom: '28px',\n    paddingLeft: '12px'\n  },\n  messagesCanvas: {\n    marginBottom: '50px',\n    display: 'flex',\n    flexDirection: 'column',\n    backgroundColor: theme.palette.accent2Color,\n    margin: '0px 10px 10px 10px'\n  },\n  messagesInnerCanvas: {\n    padding: '0px'\n  }\n};\nexport default styles;","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { Component } from 'react';\nimport propTypes from '@dhis2/prop-types';\nimport { connect } from 'react-redux';\nimport history from '../../utils/history.js';\nimport { addRecipients, downloadAttachment, cancelAttachment, clearSelectedMessageConversation } from '../../actions/index.js';\nimport { supportsAttachments } from '../../utils/helpers.js';\nimport Subheader from 'material-ui/Subheader/Subheader';\nimport AddIcon from 'material-ui-icons/Add';\nimport NavigationBack from 'material-ui-icons/ArrowBack';\nimport FlatButton from 'material-ui/FlatButton';\nimport IconButton from 'material-ui/IconButton';\nimport Chip from 'material-ui/Chip';\nimport Paper from 'material-ui/Paper';\nimport i18n from '@dhis2/d2-i18n';\nimport Message from './Message.js';\nimport ReplyCard from './ReplyCard.js';\nimport SuggestionField from '../Common/SuggestionField.js';\nimport ExtendedChoiceLabel from '../Common/ExtendedChoiceLabel.js';\nimport { styles } from '../../styles/messageConversationStyles.js';\nimport theme from '../../styles/theme.js';\nconst NOTIFICATIONS = ['TICKET', 'VALIDATION_RESULT'];\nconst maxParticipantsDisplay = 30;\n\nclass MessageConversation extends Component {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"backToList\", () => {\n      const {\n        clearSelectedMessageConversation,\n        messageConversation\n      } = this.props;\n      history.push(\"/\".concat(messageConversation.messageType));\n      clearSelectedMessageConversation();\n    });\n\n    _defineProperty(this, \"addRecipients\", () => {\n      const users = this.state.recipients.filter(r => r.type === 'user');\n      const userGroups = this.state.recipients.filter(r => r.type === 'userGroup');\n      const organisationUnits = this.state.recipients.filter(r => r.type === 'organisationUnit');\n      const {\n        messageConversation,\n        selectedMessageType: messageType\n      } = this.props;\n      this.props.addRecipients({\n        users,\n        userGroups,\n        organisationUnits,\n        messageConversation,\n        messageType\n      });\n      this.setState({\n        recipients: []\n      });\n    });\n\n    _defineProperty(this, \"updateRecipients\", recipients => {\n      this.setState({\n        recipients\n      });\n    });\n\n    this.state = {\n      recipients: [],\n      cursor: 'auto'\n    };\n  }\n\n  render() {\n    const {\n      messageConversation,\n      currentUser\n    } = this.props;\n    const messages = messageConversation.messages;\n    const notification = !!(NOTIFICATIONS.indexOf(messageConversation.messageType) + 1);\n    const participants = messageConversation.userMessages.slice(0, maxParticipantsDisplay).map(userMessage => !currentUser.id || this.state.recipientsExpanded || currentUser.id !== userMessage.user.id ? userMessage.user.displayName : i18n.t('me'));\n    const userMessagesLength = messageConversation.userMessages.length;\n\n    if (userMessagesLength > maxParticipantsDisplay) {\n      participants.push(' + '.concat(userMessagesLength - maxParticipantsDisplay));\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      id: \"messageconversation\",\n      style: styles.canvas\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      style: styles.innerCanvas\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      style: styles.header\n    }, /*#__PURE__*/React.createElement(IconButton, {\n      style: styles.iconButton,\n      tooltipPosition: \"bottom-right\",\n      onClick: this.backToList,\n      tooltip: i18n.t('Show all messages')\n    }, /*#__PURE__*/React.createElement(NavigationBack, null)), /*#__PURE__*/React.createElement(Subheader, {\n      style: styles.subjectSubheader\n    }, messageConversation.subject), this.props.displayExtendedChoices && /*#__PURE__*/React.createElement(ExtendedChoiceLabel, {\n      color: theme.palette.darkGray,\n      showTitle: true,\n      title: i18n.t('Status'),\n      label: messageConversation.status\n    }), this.props.displayExtendedChoices && /*#__PURE__*/React.createElement(ExtendedChoiceLabel, {\n      color: theme.palette.darkGray,\n      showTitle: true,\n      title: i18n.t('Priority'),\n      label: messageConversation.priority\n    }), notification && /*#__PURE__*/React.createElement(ExtendedChoiceLabel, {\n      color: theme.palette.darkGray,\n      showTitle: true,\n      title: i18n.t('Assignee'),\n      label: messageConversation.assignee ? messageConversation.assignee.displayName : undefined\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      style: styles.participantsCanvas\n    }, /*#__PURE__*/React.createElement(Subheader, {\n      style: {\n        paddingLeft: '12px',\n        paddingTop: '10px'\n      }\n    }, i18n.t('Participants')), /*#__PURE__*/React.createElement(\"div\", {\n      style: styles.participants\n    }, participants.map(participant => /*#__PURE__*/React.createElement(Chip, {\n      key: participant,\n      style: styles.chip\n    }, participant)))), /*#__PURE__*/React.createElement(\"div\", {\n      style: styles.participantAddRow\n    }, /*#__PURE__*/React.createElement(SuggestionField, {\n      style: styles.participantsSuggestionField,\n      label: i18n.t('Add participants to conversation'),\n      messageConversation: messageConversation,\n      recipients: this.state.recipients,\n      updateRecipients: this.updateRecipients,\n      limitSearchArray: messageConversation.userMessages\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      style: styles.participantsAdd\n    }, /*#__PURE__*/React.createElement(FlatButton, {\n      icon: /*#__PURE__*/React.createElement(AddIcon, null),\n      onClick: () => this.addRecipients(),\n      label: i18n.t('Add')\n    })))), /*#__PURE__*/React.createElement(\"div\", {\n      style: styles.messagesCanvas\n    }, /*#__PURE__*/React.createElement(Paper, {\n      style: styles.messagesInnerCanvas\n    }, messages.map((message, i) => /*#__PURE__*/React.createElement(Message, {\n      key: message.id,\n      displayTimeDiff: this.props.displayTimeDiff,\n      message: message,\n      messageConversation: messageConversation,\n      notification: notification,\n      currentUser: this.state.currentUser,\n      lastMessage: i + 1 === messages.length,\n      downloadAttachment: attachment => this.props.downloadAttachment(messageConversation.id, message.id, attachment.id),\n      cancelAttachment: this.props.cancelAttachment,\n      enableAttachments: this.props.enableAttachments\n    }))), /*#__PURE__*/React.createElement(ReplyCard, _extends({}, this.props, {\n      messageConversation: messageConversation\n    }))));\n  }\n\n}\n\nMessageConversation.propTypes = {\n  addRecipients: propTypes.func,\n  cancelAttachment: propTypes.func,\n  clearSelectedMessageConversation: propTypes.func,\n  currentUser: propTypes.object,\n  displayExtendedChoices: propTypes.bool,\n  displayTimeDiff: propTypes.number,\n  downloadAttachment: propTypes.func,\n  enableAttachments: propTypes.bool,\n  messageConversation: propTypes.object,\n  selectedMessageType: propTypes.object\n};\n\nconst mapStateToProps = state => ({\n  currentUser: state.messaging.currentUser,\n  selectedMessageType: state.messaging.selectedMessageType,\n  displayTimeDiff: state.messaging.displayTimeDiff,\n  enableAttachments: supportsAttachments(state.messaging.dhis2CoreVersion)\n});\n\nexport default connect(mapStateToProps, {\n  addRecipients,\n  downloadAttachment,\n  cancelAttachment,\n  clearSelectedMessageConversation\n})(MessageConversation);","function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { Component } from 'react';\nimport propTypes from '@dhis2/prop-types';\nimport CircularProgress from 'material-ui/CircularProgress';\nimport Badge from 'material-ui/Badge';\nimport Subheader from 'material-ui/Subheader/Subheader';\nimport i18n from '@dhis2/d2-i18n';\nimport theme from '../../styles/theme.js';\n\nclass MessageTypeItem extends Component {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"onClick\", () => {\n      this.props.onClick();\n    });\n\n    _defineProperty(this, \"onMouseEnter\", () => {\n      this.setHoverText();\n      this.setState({\n        cursor: 'pointer'\n      });\n    });\n\n    _defineProperty(this, \"onMouseLeave\", () => {\n      this.setNeutralText();\n      this.setState({\n        cursor: 'auto'\n      });\n    });\n\n    _defineProperty(this, \"setNeutralText\", () => this.setTextColor(theme.palette.accent2Color));\n\n    _defineProperty(this, \"setHoverText\", () => this.setTextColor(theme.palette.accent3Color));\n\n    _defineProperty(this, \"setTextColor\", color => {\n      this.setState({\n        backgroundColor: color\n      });\n    });\n\n    _defineProperty(this, \"getBackgroundColor\", (selectedValue, id) => selectedValue && id === selectedValue.id ? theme.palette.accent3Color : this.state.backgroundColor);\n\n    this.state = {\n      backgroundColor: theme.palette.accent2Color,\n      textColor: theme.palette.darkGray\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      role: \"presentation\",\n      style: { ...this.state,\n        backgroundColor: this.getBackgroundColor(this.props.selectedMessageType, this.props.messageType.id),\n        cursor: this.state.cursor,\n        alignItems: 'center',\n        height: '49px',\n        display: 'flex',\n        flexDirection: 'row',\n        justifyContent: 'space-between'\n      },\n      onMouseEnter: this.onMouseEnter,\n      onMouseLeave: this.onMouseLeave,\n      onClick: () => this.onClick()\n    }, /*#__PURE__*/React.createElement(Subheader, {\n      style: {\n        marginLeft: '5px',\n        fontSize: this.props.selectedMessageType && this.props.messageType.id === this.props.selectedMessageType.id ? '18px' : '16px',\n        overflow: 'hidden',\n        textOverflow: 'ellipsis',\n        whiteSpace: 'nowrap',\n        color: this.props.selectedMessageType && this.props.messageType.id === this.props.selectedMessageType.id ? theme.palette.primary1Color : this.state.textColor\n      }\n    }, i18n.t(this.props.messageType.displayName)), this.props.loading ? /*#__PURE__*/React.createElement(CircularProgress, {\n      style: {\n        marginRight: '10px'\n      },\n      color: theme.palette.primary1Color,\n      size: 24\n    }) : this.props.messageType.unread > 0 && /*#__PURE__*/React.createElement(Badge, {\n      style: {\n        marginTop: '12px',\n        marginRight: '5px'\n      },\n      badgeContent: this.props.messageType.unread > 100 ? '99+' : this.props.messageType.unread,\n      secondary: true,\n      badgeStyle: {\n        backgroundColor: '#439E8E'\n      }\n    }));\n  }\n\n}\n\nMessageTypeItem.propTypes = {\n  loading: propTypes.bool,\n  messageType: propTypes.object,\n  selectedMessageType: propTypes.object,\n  onClick: propTypes.func\n};\nexport default MessageTypeItem;","import React, { Component } from 'react';\nimport propTypes from '@dhis2/prop-types';\nimport { connect } from 'react-redux';\nimport { compose } from 'recompose';\nimport { List } from 'material-ui/List';\nimport Divider from 'material-ui/Divider';\nimport Toggle from 'material-ui/Toggle';\nimport i18n from '@dhis2/d2-i18n';\nimport history from '../../utils/history.js';\nimport { setSelectedMessageType, clearCheckedIds } from '../../actions/index.js';\nimport MessageTypeItem from './MessageTypeItem.js';\nimport theme from '../../styles/theme.js';\nimport moment from 'moment';\nconst styles = {\n  canvas: {\n    display: 'flex',\n    flexDirection: 'column',\n    justifyContent: 'space-between',\n    height: 'calc(100vh - 95px)',\n    borderLeftStyle: 'solid',\n    borderLeftWidth: '0.5px',\n    borderLeftColor: theme.palette.accent4Color,\n    borderRightStyle: 'solid',\n    borderRightWidth: '1px',\n    borderRightColor: theme.palette.accent4Color,\n    overflowY: 'auto',\n    overflowX: 'hidden',\n    minWidth: '200px'\n  }\n};\n\nclass SidebarList extends Component {\n  constructor(props) {\n    super(props);\n    this.props.setSelectedMessageType(this.props.match.params.messageType);\n  }\n\n  render() {\n    const messageTypes = this.props.messageTypes;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      style: styles.canvas\n    }, /*#__PURE__*/React.createElement(List, {\n      style: {\n        padding: '0px'\n      }\n    }, messageTypes && messageTypes.map(messageType => /*#__PURE__*/React.createElement(\"div\", {\n      key: messageType.id\n    }, /*#__PURE__*/React.createElement(MessageTypeItem, {\n      messageType: messageType,\n      onClick: () => {\n        this.props.setSelectedMessageType(messageType.id);\n        this.props.updateInputFields('', '', []);\n        this.props.attachments.length > 0 && this.props.clearAttachments();\n        history.push(\"/\".concat(messageType.id));\n      },\n      selectedMessageType: this.props.selectedMessageType,\n      loading: messageType.loading\n    }), /*#__PURE__*/React.createElement(Divider, null)))), /*#__PURE__*/React.createElement(Toggle, {\n      style: {\n        width: '',\n        margin: '20px'\n      },\n      label: \"\".concat(i18n.t('Auto refresh'), \" (\").concat(moment(this.props.refreshTimer).format('mm:ss'), \")\"),\n      toggled: this.props.autoRefresh,\n      onToggle: () => this.props.setAutoRefresh(!this.props.autoRefresh)\n    }));\n  }\n\n}\n\nSidebarList.propTypes = {\n  attachments: propTypes.array,\n  autoRefresh: propTypes.bool,\n  clearAttachments: propTypes.func,\n  match: propTypes.object,\n  messageTypes: propTypes.array,\n  refreshTimer: propTypes.number,\n  selectedMessageType: propTypes.object,\n  setAutoRefresh: propTypes.func,\n  setSelectedMessageType: propTypes.func,\n  updateInputFields: propTypes.func\n};\n\nconst mapStateToProps = state => ({\n  selectedMessageType: state.messaging.selectedMessageType,\n  messageTypes: state.messaging.messageTypes\n});\n\nexport default compose(connect(mapStateToProps, {\n  setSelectedMessageType,\n  clearCheckedIds\n}, null, {\n  pure: false\n}))(SidebarList);","import theme from '../styles/theme.js';\nexport const messagePanelContainer = {\n  overflowY: 'scroll',\n  overflowX: 'hidden',\n  borderRightWidth: '1px',\n  borderRightColor: theme.palette.accent4Color,\n  height: 'calc(100vh - 95px)'\n};\nexport const subheader = {\n  paddingLeft: '0px',\n  fontSize: '20px'\n};","import React, { Component } from 'react';\nimport propTypes from '@dhis2/prop-types';\nimport { connect } from 'react-redux';\nimport { compose } from 'recompose';\nimport Subheader from 'material-ui/Subheader/Subheader';\nimport Checkbox from 'material-ui/Checkbox';\nimport Paper from 'material-ui/Paper';\nimport i18n from '@dhis2/d2-i18n';\nimport { setAllChecked, clearCheckedIds } from '../../actions/index.js';\nimport theme from '../../styles/theme.js';\nimport { fontFamily } from '../../constants/development.js';\nconst fontSize = '16px';\nconst styles = {\n  canvas(backgroundColor) {\n    return {\n      backgroundColor,\n      display: 'flex',\n      transition: 'all 0.2s ease-in-out',\n      boxSizing: 'border-box',\n      position: 'relative',\n      whiteSpace: 'nowrap',\n      alignSelf: 'center',\n      boxShadow: 'none',\n      borderBottom: '1px solid #dfdfdf'\n    };\n  },\n\n  checkBox: {\n    flex: '0 0 32px',\n    display: 'flex',\n    alignSelf: 'center',\n    paddingLeft: '12px'\n  },\n  sender: {\n    fontFamily,\n    fontSize,\n    flex: 3,\n    overflow: 'hidden',\n    textOverflow: 'ellipsis',\n    whiteSpace: 'nowrap',\n    color: 'black',\n    paddingLeft: 10,\n    alignSelf: 'center'\n  },\n  subject: {\n    flex: 8,\n    overflow: 'hidden',\n    textOverflow: 'ellipsis',\n    whiteSpace: 'nowrap',\n    fontFamily,\n    fontSize,\n    color: 'black',\n    paddingLeft: 10\n  },\n  extendedLabel: {\n    flex: 2,\n    color: 'black',\n    fontSize,\n    overflow: 'hidden',\n    textOverflow: 'ellipsis',\n    whiteSpace: 'nowrap',\n    padding: '0 0 0 10px'\n  }\n};\n\nclass MessageConversationListItem extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      cursor: 'auto',\n      allChecked: false\n    };\n  }\n\n  componentDidUpdate() {\n    if (this.state.allChecked && this.props.checkedIds.length < this.props.messages.length) {\n      this.setState({\n        allChecked: false\n      });\n    }\n  }\n\n  render() {\n    const displayExtendedChoices = this.props.displayExtendedChoices;\n    return /*#__PURE__*/React.createElement(Paper, {\n      style: styles.canvas(theme.palette.canvasColor)\n    }, /*#__PURE__*/React.createElement(Checkbox, {\n      checked: this.state.allChecked,\n      style: styles.checkBox,\n      onCheck: () => {\n        this.state.allChecked ? this.props.clearCheckedIds() : this.props.setAllChecked(this.props.messages.map(child => ({\n          id: child.id\n        })));\n        this.setState({\n          allChecked: !this.state.allChecked\n        });\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      style: styles.sender\n    }, i18n.t('Sender')), /*#__PURE__*/React.createElement(Subheader, {\n      style: styles.subject\n    }, i18n.t('Subject')), displayExtendedChoices && /*#__PURE__*/React.createElement(Subheader, {\n      style: styles.extendedLabel\n    }, i18n.t('Status')), displayExtendedChoices && /*#__PURE__*/React.createElement(Subheader, {\n      style: styles.extendedLabel\n    }, i18n.t('Priority')), this.props.notification && /*#__PURE__*/React.createElement(Subheader, {\n      style: styles.extendedLabel\n    }, i18n.t('Assignee')), /*#__PURE__*/React.createElement(Subheader, {\n      style: styles.extendedLabel\n    }, i18n.t('Date')));\n  }\n\n}\n\nMessageConversationListItem.propTypes = {\n  checkedIds: propTypes.array,\n  clearCheckedIds: propTypes.func,\n  displayExtendedChoices: propTypes.bool,\n  messages: propTypes.array,\n  notification: propTypes.bool,\n  setAllChecked: propTypes.func\n};\n\nconst mapStateToProps = state => ({\n  checkedIds: state.messaging.checkedIds,\n  isInFeedbackRecipientGroup: state.messaging.isInFeedbackRecipientGroup\n});\n\nexport default compose(connect(mapStateToProps, {\n  setAllChecked,\n  clearCheckedIds\n}))(MessageConversationListItem);","function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { Component } from 'react';\nimport propTypes from '@dhis2/prop-types';\nimport { connect } from 'react-redux';\nimport { compose } from 'recompose';\nimport Subheader from 'material-ui/Subheader/Subheader';\nimport Checkbox from 'material-ui/Checkbox';\nimport Paper from 'material-ui/Paper';\nimport Flag from 'material-ui-icons/Flag';\nimport i18n from '@dhis2/d2-i18n';\nimport history from '../../utils/history.js';\nimport { setChecked, setSelectedMessageConversation, markMessageConversations, clearCheckedIds, setFilter, updateInputFields, clearAttachments } from '../../actions/index.js';\nimport ExtendedChoiceLabel from '../Common/ExtendedChoiceLabel.js';\nimport theme from '../../styles/theme.js';\nimport { fontFamily } from '../../constants/development.js';\nimport moment from 'moment';\nconst styles = {\n  container(backgroundColor, wideview, cursor) {\n    return {\n      backgroundColor,\n      display: 'flex',\n      transition: 'all 0.2s ease-in-out',\n      cursor: cursor,\n      boxSizing: 'border-box',\n      position: 'relative',\n      whiteSpace: 'nowrap',\n      boxShadow: 'none',\n      borderBottom: '1px solid #dfdfdf',\n      flexWrap: wideview ? 'nowrap' : 'wrap'\n    };\n  },\n\n  checkBox(wideview) {\n    return {\n      flex: '0 0 32px',\n      display: 'flex',\n      alignSelf: 'center',\n      paddingLeft: wideview ? 12 : 6\n    };\n  },\n\n  flag: {\n    color: theme.palette.followUp,\n    marginRight: 4\n  },\n\n  sender(wideview, fontWeight) {\n    return {\n      fontFamily,\n      fontSize: '14px',\n      flex: 3,\n      overflow: 'hidden',\n      textOverflow: 'ellipsis',\n      whiteSpace: 'nowrap',\n      display: 'flex',\n      alignItems: 'center',\n      color: 'black',\n      paddingLeft: wideview ? 10 : 0,\n      fontWeight\n    };\n  },\n\n  subject(wideview, fontColor, fontWeight) {\n    return {\n      flex: 8,\n      overflow: 'hidden',\n      textOverflow: 'ellipsis',\n      whiteSpace: 'nowrap',\n      paddingLeft: 10,\n      fontFamily,\n      color: fontColor,\n      fontWeight,\n      order: wideview ? 'inherit' : 10,\n      marginTop: wideview ? 0 : -10,\n      flexBasis: wideview ? '0%' : '100%'\n    };\n  },\n\n  dateFormat(wideview, fontColor, fontWeight) {\n    return {\n      flex: 2,\n      fontFamily,\n      paddingLeft: wideview ? 10 : 0,\n      paddingRight: wideview ? 0 : 10,\n      overflow: 'hidden',\n      textOverflow: 'ellipsis',\n      whiteSpace: 'nowrap',\n      textAlign: wideview ? '' : 'end',\n      color: fontColor,\n      fontWeight\n    };\n  }\n\n};\n\nclass MessageConversationListItem extends Component {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"onClick\", messageConversation => {\n      this.props.setSelectedMessageConversation(messageConversation);\n\n      if (messageConversation && !messageConversation.read) {\n        this.props.markMessageConversations('read', [messageConversation.id], this.props.selectedMessageType);\n      }\n\n      this.props.updateInputFields('', '', []);\n      this.props.attachments.length > 0 && this.props.clearAttachments();\n      history.push(\"/\".concat(messageConversation.messageType, \"/\").concat(messageConversation.id));\n    });\n\n    _defineProperty(this, \"onMouseEnter\", () => this.setState({\n      cursor: 'pointer',\n      backgroundColor: theme.palette.accent2Color\n    }));\n\n    _defineProperty(this, \"onMouseLeave\", () => this.setState({\n      cursor: 'auto',\n      backgroundColor: theme.palette.canvasColor\n    }));\n\n    _defineProperty(this, \"getBackgroundColor\", (messageConversation, checked) => {\n      const selectedMessageConversation = this.props.selectedMessageConversation && messageConversation.id === this.props.selectedMessageConversation.id;\n\n      if (checked && !selectedMessageConversation) {\n        return theme.palette.blue50;\n      } else if (selectedMessageConversation) {\n        return theme.palette.accent3Color;\n      }\n\n      return this.state.backgroundColor;\n    });\n\n    this.state = {\n      backgroundColor: theme.palette.canvasColor,\n      cursor: 'auto'\n    };\n  }\n\n  render() {\n    const messageConversation = this.props.messageConversation;\n    const title = messageConversation.lastSender ? messageConversation.lastSender.displayName : this.props.selectedMessageType.displayName;\n    const checked = !!this.props.checkedIds.find(x => x.id === messageConversation.id);\n    const displayExtendedChoices = this.props.displayExtendedChoices;\n    const displayTimeDiff = this.props.displayTimeDiff;\n    const today = moment();\n    const messageDate = moment(messageConversation.lastMessage).add(displayTimeDiff);\n    const fontWeight = !messageConversation.read ? 'bold' : '';\n    const fontColor = this.props.messageConversation.read ? 'black' : theme.palette.darkGray;\n    const containerBackgroundColor = this.getBackgroundColor(messageConversation, checked);\n    return /*#__PURE__*/React.createElement(Paper, {\n      style: styles.container(containerBackgroundColor, this.props.wideview, this.state.cursor),\n      onClick: event => {\n        const onClick = event.target.innerText !== undefined && event.target.innerText !== '';\n\n        if (onClick && !this.props.settingSelectedMessageConversation) {\n          this.onClick(messageConversation);\n          this.props.checkedIds.length > 0 && this.props.clearCheckedIds();\n\n          if (this.props.wideview && (this.props.messageFilter !== undefined || this.props.priorityFilter !== undefined || this.props.statusFilter !== undefined)) {\n            this.props.setFilter(undefined, 'MESSAGE');\n          }\n        }\n      },\n      onMouseEnter: this.onMouseEnter,\n      onMouseLeave: this.onMouseLeave\n    }, /*#__PURE__*/React.createElement(Checkbox, {\n      checked: checked,\n      style: styles.checkBox(this.props.wideview),\n      onCheck: () => {\n        this.props.setChecked(messageConversation, !checked);\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      style: styles.sender(this.props.wideview, fontWeight)\n    }, messageConversation.followUp && /*#__PURE__*/React.createElement(Flag, {\n      style: styles.flag\n    }), /*#__PURE__*/React.createElement(\"span\", null, title)), /*#__PURE__*/React.createElement(Subheader, {\n      style: styles.subject(this.props.wideview, fontColor, fontWeight)\n    }, messageConversation.subject), displayExtendedChoices && /*#__PURE__*/React.createElement(ExtendedChoiceLabel, {\n      showTitle: false,\n      title: i18n.t('Status'),\n      color: fontColor,\n      fontWeight: fontWeight,\n      label: messageConversation.status\n    }), displayExtendedChoices && /*#__PURE__*/React.createElement(ExtendedChoiceLabel, {\n      showTitle: false,\n      title: i18n.t('Priority'),\n      color: fontColor,\n      fontWeight: fontWeight,\n      label: messageConversation.priority\n    }), this.props.notification && this.props.wideview && /*#__PURE__*/React.createElement(ExtendedChoiceLabel, {\n      showTitle: false,\n      title: i18n.t('Assignee'),\n      color: fontColor,\n      fontWeight: fontWeight,\n      label: messageConversation.assignee ? messageConversation.assignee.displayName : undefined\n    }), /*#__PURE__*/React.createElement(Subheader, {\n      style: styles.dateFormat(this.props.wideview, fontColor, fontWeight)\n    }, today.diff(messageDate, 'hours') < 72 ? messageDate.from(today) : today.year() === messageDate.year() ? messageDate.format('MMM DD') : messageDate.format('ll')));\n  }\n\n}\n\nMessageConversationListItem.propTypes = {\n  attachments: propTypes.array,\n  checkedIds: propTypes.array,\n  clearAttachments: propTypes.func,\n  clearCheckedIds: propTypes.func,\n  displayExtendedChoices: propTypes.bool,\n  displayTimeDiff: propTypes.number,\n  markMessageConversations: propTypes.func,\n  messageConversation: propTypes.object,\n  messageFilter: propTypes.string,\n  notification: propTypes.bool,\n  priorityFilter: propTypes.string,\n  selectedMessageConversation: propTypes.object,\n  selectedMessageType: propTypes.object,\n  setChecked: propTypes.func,\n  setFilter: propTypes.func,\n  setSelectedMessageConversation: propTypes.func,\n  settingSelectedMessageConversation: propTypes.bool,\n  statusFilter: propTypes.string,\n  updateInputFields: propTypes.func,\n  wideview: propTypes.bool\n};\n\nconst mapStateToProps = state => ({\n  selectedMessageConversation: state.messaging.selectedMessageConversation,\n  settingSelectedMessageConversation: state.messaging.settingSelectedMessageConversation,\n  selectedMessageType: state.messaging.selectedMessageType,\n  checkedIds: state.messaging.checkedIds,\n  displayTimeDiff: state.messaging.displayTimeDiff,\n  messageFilter: state.messaging.messageFilter,\n  statusFilter: state.messaging.statusFilter,\n  priorityFilter: state.messaging.priorityFilter,\n  attachments: state.messaging.attachments\n});\n\nexport default compose(connect(mapStateToProps, {\n  setChecked,\n  setSelectedMessageConversation,\n  markMessageConversations,\n  clearCheckedIds,\n  setFilter,\n  updateInputFields,\n  clearAttachments\n}, null, {\n  pure: false\n}))(MessageConversationListItem);","function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { Component } from 'react';\nimport propTypes from '@dhis2/prop-types';\nimport { connect } from 'react-redux';\nimport { compose } from 'recompose';\nimport Subheader from 'material-ui/Subheader/Subheader';\nimport CircularProgress from 'material-ui/CircularProgress';\nimport i18n from '@dhis2/d2-i18n';\nimport { loadMessageConversations } from '../../actions/index.js';\nimport { messagePanelContainer } from '../../styles/style.js';\nimport theme from '../../styles/theme.js';\nimport ListItemHeader from './ListItemHeader.js';\nimport MessageConversationListItem from './MessageConversationListItem.js';\nimport { dedupeById, debounce } from '../../utils/helpers.js';\nconst NOTIFICATIONS = ['VALIDATION_RESULT', 'TICKET'];\nconst bottomEmptyHeight = 50;\nconst styles = {\n  canvas(wideview) {\n    return {\n      flex: '1 0',\n      maxWidth: wideview ? 'none' : '350px',\n      minWidth: wideview ? 'none' : '250px',\n      borderRightStyle: wideview ? '' : 'solid',\n      ...messagePanelContainer\n    };\n  },\n\n  loading: {\n    backgroundColor: theme.palette.accent2Color,\n    height: \"\".concat(bottomEmptyHeight, \"px\"),\n    transition: 'all 0.2s ease-in-out',\n    display: 'flex',\n    justifyContent: 'center'\n  }\n};\n\nclass MessageConversationList extends Component {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"onScroll\", messageType => {\n      const messageList = document.getElementById('messagelist');\n\n      if (!this.props.selectedMessageType.loading && this.isBottom(messageList) && messageType.loaded < messageType.total) {\n        this.props.loadMessageConversations(messageType, messageType.id, true);\n      }\n    });\n\n    _defineProperty(this, \"debouncedOnScroll\", debounce(this.onScroll, 150));\n\n    _defineProperty(this, \"isBottom\", el => el.scrollHeight - el.scrollTop < window.outerHeight);\n  }\n\n  render() {\n    const messages = dedupeById(this.props.messageConversations[this.props.selectedMessageType.id]);\n    const messageType = this.props.selectedMessageType ? this.props.selectedMessageType : '';\n    const selectedValue = this.props.selectedMessageConversation ? this.props.selectedMessageConversation.id : '';\n    const notification = !!(NOTIFICATIONS.indexOf(messageType.id) + 1);\n    return /*#__PURE__*/React.createElement(\"div\", {\n      id: 'messagelist',\n      onScroll: () => this.debouncedOnScroll(this.props.selectedMessageType),\n      style: styles.canvas(this.props.wideview)\n    }, this.props.wideview && /*#__PURE__*/React.createElement(ListItemHeader, {\n      notification: notification,\n      displayExtendedChoices: this.props.displayExtendedChoices,\n      messages: messages\n    }), messages && messages.length !== 0 ? messages.map(child => /*#__PURE__*/React.createElement(MessageConversationListItem, {\n      key: child.id,\n      messageConversation: child,\n      wideview: this.props.wideview,\n      selectedValue: selectedValue,\n      notification: notification,\n      displayExtendedChoices: this.props.displayExtendedChoices\n    })) : !this.props.selectedMessageType.loading && /*#__PURE__*/React.createElement(Subheader, null, i18n.t(\"No \".concat(messageType.displayName.toLowerCase(), \" messages\"))), this.props.selectedMessageType.loading && /*#__PURE__*/React.createElement(\"div\", {\n      style: styles.loading\n    }, /*#__PURE__*/React.createElement(CircularProgress, {\n      style: {\n        marginTop: '10px'\n      },\n      color: theme.palette.primary1Color\n    })));\n  }\n\n}\n\nMessageConversationList.propTypes = {\n  displayExtendedChoices: propTypes.bool,\n  loadMessageConversations: propTypes.func,\n  messageConversations: propTypes.object,\n  selectedMessageConversation: propTypes.object,\n  selectedMessageType: propTypes.shape({\n    id: propTypes.string,\n    loading: propTypes.bool\n  }),\n  wideview: propTypes.bool\n};\n\nconst mapStateToProps = state => ({\n  messageTypes: state.messaging.messageTypes,\n  messageFilter: state.messaging.messageFilter,\n  statusFilter: state.messaging.statusFilter,\n  priorityFilter: state.messaging.priorityFilter,\n  messageConversations: state.messaging.messageConversations,\n  selectedMessageConversation: state.messaging.selectedMessageConversation,\n  selectedMessageType: state.messaging.selectedMessageType\n});\n\nexport default compose(connect(mapStateToProps, {\n  loadMessageConversations\n}, null, {\n  pure: false\n}))(MessageConversationList);","function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { Component } from 'react';\nimport propTypes from '@dhis2/prop-types';\nimport { connect } from 'react-redux';\nimport { compose } from 'recompose';\nimport i18n from '@dhis2/d2-i18n';\nimport { Card, CardActions, CardText } from 'material-ui/Card';\nimport RaisedButton from 'material-ui/RaisedButton';\nimport FlatButton from 'material-ui/FlatButton';\nimport TextField from 'material-ui/TextField';\nimport Subheader from 'material-ui/Subheader/Subheader';\nimport RadioButton from 'material-ui/RadioButton';\nimport { sendMessage, sendFeedbackMessage, displaySnackMessage, updateInputFields, addAttachment, removeAttachment, cancelAttachment, addRecipientByUserId } from '../../actions/index.js';\nimport history from '../../utils/history.js';\nimport { supportsAttachments } from '../../utils/helpers.js';\nimport SuggestionField from '../Common/SuggestionField.js';\nimport AttachmentUploadButton from '../Attachments/AttachmentUploadButton.js';\nimport { NEGATIVE } from '../../constants/development.js';\nimport Attachments from '../Attachments/Attachments.js';\nimport { subheader } from '../../styles/style.js';\nconst styles = {\n  canvas: {\n    flex: '3 0',\n    margin: '10px',\n    overflowY: 'scroll',\n    overflowX: 'hidden',\n    height: 'calc(100vh - 110px)'\n  },\n  messageTypeField: {\n    display: 'flex',\n    flexDirection: 'row'\n  },\n  messageType: {\n    width: '300px',\n    marginTop: '10px'\n  }\n};\n\nclass CreateMessage extends Component {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"subjectUpdate\", (event, newValue) => {\n      this.props.updateInputFields(newValue, this.props.input, this.props.recipients);\n    });\n\n    _defineProperty(this, \"inputUpdate\", (event, newValue) => {\n      this.props.updateInputFields(this.props.subject, newValue, this.props.recipients);\n    });\n\n    _defineProperty(this, \"updateRecipients\", recipients => {\n      this.props.updateInputFields(this.props.subject, this.props.input, recipients);\n    });\n\n    _defineProperty(this, \"sendMessage\", () => {\n      const messageTypeId = this.state.isMessageFeedback ? 'TICKET' : 'PRIVATE';\n      const messageType = this.props.messageTypes.find(messageType => messageType.id === messageTypeId);\n\n      if (this.state.isMessageFeedback) {\n        this.props.sendFeedbackMessage(messageType);\n        history.push('/TICKET');\n      } else {\n        const users = this.props.recipients.filter(r => r.type === 'user');\n        const userGroups = this.props.recipients.filter(r => r.type === 'userGroup');\n        const organisationUnits = this.props.recipients.filter(r => r.type === 'organisationUnit');\n        this.props.sendMessage({\n          users,\n          userGroups,\n          organisationUnits,\n          messageType\n        });\n        history.push('/PRIVATE');\n      }\n    });\n\n    _defineProperty(this, \"wipeInput\", () => {\n      this.props.updateInputFields('', '', []);\n      this.props.attachments.length > 0 && this.props.clearAttachments();\n    });\n\n    _defineProperty(this, \"handleDiscard\", () => {\n      const message = i18n.t('Message discarded');\n      const snackType = NEGATIVE;\n\n      const onSnackActionClick = () => history.push('/PRIVATE/create');\n\n      const onSnackRequestClose = () => this.wipeInput();\n\n      this.props.displaySnackMessage({\n        message,\n        onSnackActionClick,\n        onSnackRequestClose,\n        snackType\n      });\n      history.push('/PRIVATE');\n    });\n\n    this.state = {\n      isMessageFeedback: false\n    };\n  }\n\n  componentDidMount() {\n    const {\n      addRecipientByUserId\n    } = this.props;\n    const {\n      messageId,\n      recipientId\n    } = this.props.match.params; // This happens when the \"Send message\" button in the user-app is clicked\n\n    if (messageId === 'create' && recipientId) {\n      addRecipientByUserId(recipientId);\n    }\n  }\n\n  render() {\n    const disabled = this.props.subject === '' || this.props.input === '' || !this.state.isMessageFeedback && this.props.recipients.length === 0;\n    const discardDisabled = this.props.subject === '' && this.props.input === '' && !this.state.isMessageFeedback && this.props.recipients.length === 0;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      style: styles.canvas\n    }, /*#__PURE__*/React.createElement(Subheader, {\n      style: subheader\n    }, \" \", i18n.t('Create')), /*#__PURE__*/React.createElement(Card, null, /*#__PURE__*/React.createElement(CardText, null, /*#__PURE__*/React.createElement(SuggestionField, {\n      style: {\n        margin: '0px'\n      },\n      label: i18n.t('To'),\n      disabled: this.state.isMessageFeedback,\n      recipients: this.state.isMessageFeedback ? [{\n        id: 'id',\n        displayName: i18n.t('Feedback recipient group')\n      }] : this.props.recipients,\n      updateRecipients: this.updateRecipients,\n      inputHeight: '100px'\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      style: styles.messageTypeField\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      style: styles.messageType\n    }, /*#__PURE__*/React.createElement(RadioButton, {\n      label: i18n.t('Private message'),\n      checked: !this.state.isMessageFeedback,\n      onCheck: () => {\n        this.setState({\n          isMessageFeedback: !this.state.isMessageFeedback\n        });\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      style: styles.messageType\n    }, /*#__PURE__*/React.createElement(RadioButton, {\n      label: i18n.t('Feedback message'),\n      checked: this.state.isMessageFeedback,\n      onCheck: () => {\n        this.setState({\n          isMessageFeedback: !this.state.isMessageFeedback\n        });\n      }\n    }))), /*#__PURE__*/React.createElement(TextField, {\n      floatingLabelText: i18n.t('Subject'),\n      fullWidth: true,\n      value: this.props.subject,\n      onChange: this.subjectUpdate\n    }), /*#__PURE__*/React.createElement(TextField, {\n      key: 'createMessage',\n      id: 'createMessage',\n      rows: 5,\n      underlineShow: false,\n      value: this.props.input,\n      multiLine: true,\n      fullWidth: true,\n      floatingLabelText: i18n.t('Message'),\n      onChange: this.inputUpdate\n    }), this.props.enableAttachments && /*#__PURE__*/React.createElement(Attachments, {\n      dataDirection: 'upload',\n      attachments: this.props.attachments,\n      removeAttachment: attachment => this.props.removeAttachment(attachment.id),\n      cancelAttachment: this.props.cancelAttachment\n    }), /*#__PURE__*/React.createElement(CardActions, {\n      style: {\n        paddingLeft: '0px'\n      }\n    }, /*#__PURE__*/React.createElement(RaisedButton, {\n      primary: true,\n      disabled: disabled,\n      label: i18n.t('Send'),\n      onClick: () => this.sendMessage()\n    }), /*#__PURE__*/React.createElement(FlatButton, {\n      label: i18n.t('Discard'),\n      disabled: discardDisabled,\n      onClick: this.handleDiscard\n    }), this.props.enableAttachments && /*#__PURE__*/React.createElement(AttachmentUploadButton, {\n      addAttachment: attachment => {\n        this.props.addAttachment(attachment);\n      }\n    })))));\n  }\n\n}\n\nCreateMessage.propTypes = {\n  addAttachment: propTypes.func,\n  addRecipientByUserId: propTypes.func,\n  attachments: propTypes.array,\n  cancelAttachment: propTypes.func,\n  clearAttachments: propTypes.func,\n  displaySnackMessage: propTypes.func,\n  enableAttachments: propTypes.bool,\n  input: propTypes.string,\n  match: propTypes.object,\n  messageTypes: propTypes.array,\n  recipients: propTypes.array,\n  removeAttachment: propTypes.func,\n  sendFeedbackMessage: propTypes.func,\n  sendMessage: propTypes.func,\n  subject: propTypes.string,\n  updateInputFields: propTypes.func\n};\n\nconst mapStateToProps = state => ({\n  messageTypes: state.messaging.messageTypes,\n  subject: state.messaging.subject,\n  input: state.messaging.input,\n  recipients: state.messaging.recipients,\n  attachments: state.messaging.attachments,\n  enableAttachments: supportsAttachments(state.messaging.dhis2CoreVersion)\n});\n\nexport default compose(connect(mapStateToProps, {\n  sendMessage,\n  sendFeedbackMessage,\n  displaySnackMessage,\n  updateInputFields,\n  addAttachment,\n  removeAttachment,\n  cancelAttachment,\n  addRecipientByUserId\n}, null, {\n  pure: false\n}))(CreateMessage);","import i18n from '@dhis2/d2-i18n';\nconst extendedChoices = {\n  STATUS: [{\n    key: 'NONE',\n    value: 'NONE',\n    primaryText: i18n.t('No status')\n  }, {\n    key: 'OPEN',\n    value: 'OPEN',\n    primaryText: i18n.t('Open')\n  }, {\n    key: 'PENDING',\n    value: 'PENDING',\n    primaryText: i18n.t('Pending')\n  }, {\n    key: 'INVALID',\n    value: 'INVALID',\n    primaryText: i18n.t('Invalid')\n  }, {\n    key: 'SOLVED',\n    value: 'SOLVED',\n    primaryText: i18n.t('Solved')\n  }],\n  PRIORITY: [{\n    key: 'NONE',\n    value: 'NONE',\n    primaryText: i18n.t('No priority')\n  }, {\n    key: 'HIGH',\n    value: 'HIGH',\n    primaryText: i18n.t('High')\n  }, {\n    key: 'MEDIUM',\n    value: 'MEDIUM',\n    primaryText: i18n.t('Medium')\n  }, {\n    key: 'LOW',\n    value: 'LOW',\n    primaryText: i18n.t('Low')\n  }]\n};\nexport default extendedChoices;","import React from 'react';\nimport propTypes from '@dhis2/prop-types';\nimport { Provider, ReactReduxContext } from 'react-redux';\nimport Dialog from 'material-ui/Dialog';\n/*\n * This component is needed because in this version of MUI\n * the redux context is not propagated onto a Portal\n */\n\nexport default function DialogWithReduxState(props) {\n  return /*#__PURE__*/React.createElement(ReactReduxContext.Consumer, null, ctx => /*#__PURE__*/React.createElement(Dialog, props, /*#__PURE__*/React.createElement(Provider, {\n    store: ctx.store\n  }, props.children)));\n}\nDialogWithReduxState.propTypes = {\n  children: propTypes.node\n};","import React from 'react';\nimport propTypes from '@dhis2/prop-types';\nimport i18n from '@dhis2/d2-i18n';\nimport SuggestionField from './SuggestionField.js';\nimport DialogWithReduxState from './DialogWithReduxState.js';\n\nconst AssignToDialog = ({\n  open,\n  onRequestClose,\n  updateMessageConversations,\n  messageType,\n  feedbackRecipientsId\n}) => /*#__PURE__*/React.createElement(DialogWithReduxState, {\n  open: open,\n  onRequestClose: () => {\n    onRequestClose();\n  }\n}, /*#__PURE__*/React.createElement(SuggestionField, {\n  onSuggestionClick: chip => {\n    updateMessageConversations([chip.id]);\n    onRequestClose();\n  },\n  searchOnlyUsers: true,\n  searchOnlyFeedbackRecipients: messageType.id === 'TICKET',\n  feedbackRecipientsId: feedbackRecipientsId,\n  recipients: [],\n  key: 'suggestionField',\n  label: i18n.t('Assignee')\n}));\n\nAssignToDialog.propTypes = {\n  feedbackRecipientsId: propTypes.string,\n  messageType: propTypes.shape({\n    id: propTypes.string\n  }),\n  open: propTypes.bool,\n  updateMessageConversations: propTypes.func,\n  onRequestClose: propTypes.func\n};\nexport default AssignToDialog;","function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { Component } from 'react';\nimport propTypes from '@dhis2/prop-types';\nimport { connect } from 'react-redux';\nimport { compose } from 'recompose';\nimport FlatButton from 'material-ui/FlatButton';\nimport MoreVertIcon from 'material-ui/svg-icons/navigation/more-vert';\nimport ArrowDropRight from 'material-ui/svg-icons/navigation-arrow-drop-right';\nimport Assignment from 'material-ui-icons/Assignment';\nimport IconMenu from 'material-ui/IconMenu';\nimport MenuItem from 'material-ui/MenuItem';\nimport IconButton from 'material-ui/IconButton';\nimport Subheader from 'material-ui/Subheader';\nimport Divider from 'material-ui/Divider';\nimport Delete from 'material-ui-icons/Delete';\nimport MarkUnread from 'material-ui-icons/Markunread';\nimport Done from 'material-ui-icons/Done';\nimport i18n from '@dhis2/d2-i18n';\nimport { clearCheckedIds, clearSelectedMessageConversation, deleteMessageConversations, updateMessageConversations, markMessageConversations } from '../../actions/index.js';\nimport extendedChoices from '../../constants/extendedChoices.js';\nimport history from '../../utils/history.js';\nimport AssignToDialog from './AssignToDialog.js';\nimport DialogWithReduxState from './DialogWithReduxState.js';\nconst multiSelectDisplayLimit = 99;\nconst styles = {\n  canvas: {\n    width: '400px',\n    display: 'flex'\n  },\n  extendedChoices: {\n    display: 'flex',\n    justifyContent: 'flex-start'\n  },\n  nrSelected: {\n    padding: '0px 0px',\n    overflow: 'hidden',\n    textOverflow: 'ellipsis',\n    whiteSpace: 'nowrap'\n  }\n};\n\nclass ToolbarExtendedChoicePicker extends Component {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"getIds\", () => this.props.selectedMessageConversation && this.props.checkedIds.length === 0 ? [this.props.selectedMessageConversation.id] : this.props.checkedIds.map(id => id.id));\n\n    _defineProperty(this, \"updateMessageConversation\", (identifier, value) => {\n      const {\n        selectedMessageType: messageType,\n        selectedMessageConversation\n      } = this.props;\n      const messageConversationIds = this.getIds();\n      this.props.updateMessageConversations({\n        messageConversationIds,\n        identifier,\n        value,\n        messageType,\n        selectedMessageConversation\n      });\n      this.props.checkedIds.length > 0 && this.props.clearCheckedIds();\n    });\n\n    _defineProperty(this, \"markMessageConversations\", mode => {\n      const ids = this.getIds();\n      this.props.markMessageConversations(mode, ids, this.props.selectedMessageType);\n      this.props.checkedIds.length > 0 && this.props.clearCheckedIds();\n    });\n\n    _defineProperty(this, \"toggleDialog\", () => {\n      this.setState({\n        dialogOpen: !this.state.dialogOpen\n      });\n    });\n\n    this.state = {\n      checkedItems: false,\n      dialogOpen: false,\n      assignToOpen: false\n    };\n  }\n\n  render() {\n    const messageConversation = this.props.selectedMessageConversation;\n    const multiSelect = this.props.checkedIds.length > 0;\n    const display = multiSelect || messageConversation !== undefined;\n    const actionButtons = /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(FlatButton, {\n      label: i18n.t('Cancel'),\n      primary: true,\n      onClick: () => this.toggleDialog()\n    }), /*#__PURE__*/React.createElement(FlatButton, {\n      label: i18n.t('Submit'),\n      primary: true,\n      keyboardFocused: true,\n      onClick: () => {\n        this.props.deleteMessageConversations(this.getIds(), this.props.selectedMessageType);\n        this.props.clearCheckedIds();\n        this.toggleDialog();\n\n        if (this.props.selectedMessageConversation) {\n          this.props.clearSelectedMessageConversation();\n          history.push(\"/\".concat(this.props.selectedMessageType.id));\n        }\n      }\n    }));\n    const displayNumberOfCheckedIds = this.props.checkedIds.length > multiSelectDisplayLimit ? \"\".concat(multiSelectDisplayLimit, \"+\") : this.props.checkedIds.length;\n    return display ? /*#__PURE__*/React.createElement(\"div\", {\n      style: styles.canvas\n    }, /*#__PURE__*/React.createElement(DialogWithReduxState, {\n      title: i18n.t('Are you sure you want to delete selected message conversation(s)?'),\n      actions: actionButtons,\n      modal: false,\n      open: this.state.dialogOpen,\n      onRequestClose: this.toggleDialog\n    }), /*#__PURE__*/React.createElement(AssignToDialog, {\n      open: this.state.assignToOpen,\n      onRequestClose: () => this.setState({\n        assignToOpen: !this.state.assignToOpen\n      }),\n      updateMessageConversations: id => this.updateMessageConversation('ASSIGNEE', id),\n      messageType: this.props.selectedMessageType,\n      feedbackRecipientsId: this.props.feedbackRecipientsId\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      style: styles.extendedChoices\n    }, /*#__PURE__*/React.createElement(IconButton, {\n      tooltip: i18n.t('Delete selected'),\n      onClick: () => {\n        this.toggleDialog();\n      }\n    }, /*#__PURE__*/React.createElement(Delete, null)), /*#__PURE__*/React.createElement(IconButton, {\n      tooltip: i18n.t('Mark selected as unread'),\n      onClick: () => {\n        this.markMessageConversations('unread');\n      }\n    }, /*#__PURE__*/React.createElement(MarkUnread, null)), /*#__PURE__*/React.createElement(IconButton, {\n      tooltip: i18n.t('Mark selected as read'),\n      onClick: () => {\n        this.markMessageConversations('read');\n      }\n    }, /*#__PURE__*/React.createElement(Done, null)), this.props.displayExtendedChoices && /*#__PURE__*/React.createElement(IconButton, {\n      onClick: () => this.setState({\n        assignToOpen: !this.state.assignToOpen\n      }),\n      tooltip: i18n.t('Assign selected')\n    }, /*#__PURE__*/React.createElement(Assignment, null)), /*#__PURE__*/React.createElement(IconMenu, {\n      iconButtonElement: /*#__PURE__*/React.createElement(IconButton, null, /*#__PURE__*/React.createElement(MoreVertIcon, null)),\n      anchorOrigin: {\n        horizontal: 'left',\n        vertical: 'top'\n      },\n      targetOrigin: {\n        horizontal: 'left',\n        vertical: 'top'\n      }\n    }, /*#__PURE__*/React.createElement(MenuItem, {\n      key: 'markFollowUp',\n      value: 'markFollowUp',\n      primaryText: i18n.t('Mark for followup'),\n      onClick: () => this.updateMessageConversation('FOLLOW_UP', true)\n    }), /*#__PURE__*/React.createElement(MenuItem, {\n      key: 'clearFollowUp',\n      value: 'clearFollowUp',\n      primaryText: i18n.t('Clear followup'),\n      onClick: () => this.updateMessageConversation('FOLLOW_UP', false)\n    }), this.props.displayExtendedChoices && /*#__PURE__*/React.createElement(Divider, null), this.props.displayExtendedChoices && /*#__PURE__*/React.createElement(MenuItem, {\n      key: 'clearAssigned',\n      value: 'clearAssigned',\n      primaryText: i18n.t('Clear assignee'),\n      onClick: () => this.updateMessageConversation('ASSIGNEE', undefined)\n    }), this.props.displayExtendedChoices && /*#__PURE__*/React.createElement(MenuItem, {\n      primaryText: i18n.t('Set status'),\n      key: 'setStatus',\n      rightIcon: /*#__PURE__*/React.createElement(ArrowDropRight, null),\n      menuItems: extendedChoices.STATUS.map(elem => /*#__PURE__*/React.createElement(MenuItem, {\n        key: \"\".concat(elem.key, \"_status\"),\n        value: elem.value,\n        primaryText: elem.primaryText,\n        onClick: () => this.updateMessageConversation('STATUS', elem.key)\n      }))\n    }), this.props.displayExtendedChoices && /*#__PURE__*/React.createElement(MenuItem, {\n      primaryText: i18n.t('Set priority'),\n      key: 'setPriority',\n      rightIcon: /*#__PURE__*/React.createElement(ArrowDropRight, null),\n      menuItems: extendedChoices.PRIORITY.map(elem => /*#__PURE__*/React.createElement(MenuItem, {\n        key: \"\".concat(elem.key, \"_priority\"),\n        value: elem.value,\n        primaryText: elem.primaryText,\n        onClick: () => this.updateMessageConversation('PRIORITY', elem.key)\n      }))\n    }))), multiSelect && /*#__PURE__*/React.createElement(Subheader, {\n      style: styles.nrSelected\n    }, \"\".concat(displayNumberOfCheckedIds, \" \").concat(i18n.t('selected')))) : /*#__PURE__*/React.createElement(\"div\", null);\n  }\n\n}\n\nToolbarExtendedChoicePicker.propTypes = {\n  checkedIds: propTypes.array,\n  clearCheckedIds: propTypes.func,\n  clearSelectedMessageConversation: propTypes.func,\n  deleteMessageConversations: propTypes.func,\n  displayExtendedChoices: propTypes.bool,\n  feedbackRecipientsId: propTypes.string,\n  markMessageConversations: propTypes.func,\n  selectedMessageConversation: propTypes.object,\n  selectedMessageType: propTypes.object,\n  updateMessageConversations: propTypes.func\n};\n\nconst mapStateToProps = state => ({\n  selectedMessageType: state.messaging.selectedMessageType,\n  selectedMessageConversation: state.messaging.selectedMessageConversation,\n  checkedIds: state.messaging.checkedIds,\n  feedbackRecipientsId: state.messaging.feedbackRecipientsId\n});\n\nexport default compose(connect(mapStateToProps, {\n  clearCheckedIds,\n  clearSelectedMessageConversation,\n  deleteMessageConversations,\n  updateMessageConversations,\n  markMessageConversations\n}, null, {\n  pure: false\n}))(ToolbarExtendedChoicePicker);","function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { Component } from 'react';\nimport propTypes from '@dhis2/prop-types';\nimport ViewFancy from 'material-ui-icons/ViewList';\nimport ViewList from 'material-ui-icons/ViewHeadline';\nimport FlatButton from 'material-ui/FlatButton';\nimport Paper from 'material-ui/Paper';\nimport CreateMessageIcon from 'material-ui-icons/Add';\nimport NavigationBack from 'material-ui-icons/ArrowBack';\nimport TextField from 'material-ui/TextField';\nimport SelectField from 'material-ui/SelectField';\nimport MenuItem from 'material-ui/MenuItem';\nimport Subheader from 'material-ui/Subheader';\nimport IconMenu from 'material-ui/IconMenu';\nimport IconButton from 'material-ui/IconButton';\nimport Checkbox from 'material-ui/Checkbox/Checkbox';\nimport MoreVertIcon from 'material-ui/svg-icons/navigation/more-vert';\nimport i18n from '@dhis2/d2-i18n';\nimport history from '../../utils/history.js';\nimport theme from '../../styles/theme.js';\nimport extendedChoices from '../../constants/extendedChoices.js';\nimport ToolbarExtendedChoicePicker from './ToolbarExtendedChoicePicker.js';\nimport { debounce } from '../../utils/helpers.js';\nconst headerHeight = '48px';\nconst searchDelay = 300;\nconst styles = {\n  canvas(checkedOptions) {\n    return {\n      display: 'flex',\n      justifyContent: 'flex-start',\n      alignItems: 'center',\n      backgroundColor: checkedOptions ? theme.palette.blue50 : theme.palette.accent2Color,\n      zIndex: 10\n    };\n  },\n\n  checkedOption: {\n    display: 'flex',\n    justifyContent: 'flex-start',\n    minWidth: '200px',\n    margin: '6px 0'\n  },\n  filterControl: {\n    flex: 2,\n    height: headerHeight,\n    marginRight: 16,\n    maxWidth: 256\n  },\n  rightHandCanvas: {\n    flex: '2 0',\n    display: 'flex',\n    paddingLeft: 16\n  },\n  // IE11 has buggy support for `justifyContent: flex-end;`\n  // to achieve the same result we use a spacer div\n  ie11Spacer: {\n    flexGrow: 1\n  },\n  iconMenu: {\n    width: '30px',\n    display: 'flex'\n  }\n};\n\nclass Toolbar extends Component {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"state\", {\n      lastMessageFilter: ''\n    });\n\n    _defineProperty(this, \"debouncedSearch\", debounce(this.search, searchDelay));\n  }\n\n  search(messageFilter) {\n    if (this.props.selectedMessageType && this.state.lastMessageFilter !== messageFilter) {\n      this.props.loadMessageConversations(this.props.selectedMessageType, this.props.selectedMessageType.id);\n      this.setState({\n        lastMessageFilter: messageFilter\n      });\n    }\n  }\n\n  componentDidUpdate(prevProps) {\n    if (prevProps.selectedMessageType && this.props.selectedMessageType.id !== prevProps.selectedMessageType.id) {\n      this.debouncedSearch('');\n      this.props.messageFilter !== undefined && this.props.setFilter(undefined, 'MESSAGE');\n      this.props.statusFilter !== undefined && this.props.setFilter(undefined, 'STATUS');\n      this.props.priorityFilter !== undefined && this.props.setFilter(undefined, 'PRIORITY');\n      this.props.assignedToMeFilter && this.props.setFilter(false, 'ASSIGNED_TO_ME');\n      this.props.markedForFollowUpFilter && this.props.setFilter(false, 'MARKED_FOR_FOLLOWUP');\n      this.props.unreadFilter && this.props.setFilter(false, 'UNREAD');\n    }\n\n    if (this.props.selectedMessageType !== undefined && !this.props.selectedMessageType.loading && (prevProps.statusFilter !== this.props.statusFilter || prevProps.priorityFilter !== this.props.priorityFilter || prevProps.assignedToMeFilter !== this.props.assignedToMeFilter || prevProps.markedForFollowUpFilter !== this.props.markedForFollowUpFilter || prevProps.unreadFilter !== this.props.unreadFilter || prevProps.selectedMessageType === undefined || prevProps.selectedMessageType.id !== this.props.selectedMessageType.id)) {\n      this.props.loadMessageConversations(this.props.selectedMessageType, this.props.selectedMessageType.id);\n    }\n  }\n\n  render() {\n    const id = this.props.id;\n    const displayExtendedChoices = this.props.displayExtendedChoices;\n    const checkedOptions = this.props.checkedOptions;\n    const displaySearch = !this.props.wideview || this.props.selectedMessageConversation === undefined && id !== 'create';\n    return /*#__PURE__*/React.createElement(Paper, {\n      style: styles.canvas(checkedOptions)\n    }, /*#__PURE__*/React.createElement(\"div\", null, !checkedOptions && /*#__PURE__*/React.createElement(FlatButton, {\n      style: styles.checkedOption,\n      icon: /*#__PURE__*/React.createElement(CreateMessageIcon, null),\n      onClick: () => history.push('/PRIVATE/create'),\n      label: i18n.t('Compose')\n    }), checkedOptions && /*#__PURE__*/React.createElement(FlatButton, {\n      style: styles.checkedOption,\n      icon: /*#__PURE__*/React.createElement(NavigationBack, null),\n      onClick: () => this.props.clearCheckedIds(),\n      label: i18n.t('Deselect all')\n    })), /*#__PURE__*/React.createElement(ToolbarExtendedChoicePicker, {\n      displayExtendedChoices: displayExtendedChoices\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      style: styles.rightHandCanvas\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      style: styles.ie11Spacer\n    }), displayExtendedChoices && displaySearch && !checkedOptions && /*#__PURE__*/React.createElement(SelectField, {\n      style: styles.filterControl,\n      labelStyle: {\n        color: this.props.statusFilter === undefined ? 'lightGray' : 'black',\n        top: this.props.statusFilter === undefined ? '-15px' : '-2px'\n      },\n      selectedMenuItemStyle: {\n        color: theme.palette.primary1Color\n      },\n      floatingLabelText: this.props.statusFilter === undefined ? i18n.t('Status') : '',\n      floatingLabelStyle: {\n        top: '15px'\n      },\n      iconStyle: {\n        top: this.props.statusFilter === undefined ? '-15px' : '0px'\n      },\n      value: this.props.statusFilter,\n      onChange: (event, key, payload) => {\n        this.props.setFilter(payload === null ? undefined : payload, 'STATUS');\n      }\n    }, /*#__PURE__*/React.createElement(MenuItem, {\n      key: null,\n      value: null,\n      primaryText: ''\n    }), extendedChoices.STATUS.map(elem => /*#__PURE__*/React.createElement(MenuItem, {\n      key: elem.key,\n      value: elem.value,\n      primaryText: elem.primaryText\n    }))), displayExtendedChoices && displaySearch && !checkedOptions && /*#__PURE__*/React.createElement(SelectField, {\n      style: styles.filterControl,\n      labelStyle: {\n        color: this.props.priorityFilter === undefined ? 'lightGray' : 'black',\n        top: this.props.priorityFilter === undefined ? '-15px' : '-2px'\n      },\n      selectedMenuItemStyle: {\n        color: theme.palette.primary1Color\n      },\n      floatingLabelText: this.props.priorityFilter === undefined ? i18n.t('Priority') : '',\n      floatingLabelStyle: {\n        top: '15px'\n      },\n      iconStyle: {\n        top: this.props.priorityFilter === undefined ? '-15px' : '0px'\n      },\n      value: this.props.priorityFilter,\n      onChange: (event, key, payload) => {\n        this.props.setFilter(payload === null ? undefined : payload, 'PRIORITY');\n      }\n    }, /*#__PURE__*/React.createElement(MenuItem, {\n      key: null,\n      value: null,\n      primaryText: ''\n    }), extendedChoices.PRIORITY.map(elem => /*#__PURE__*/React.createElement(MenuItem, {\n      key: elem.key,\n      value: elem.value,\n      primaryText: elem.primaryText\n    }))), !checkedOptions && displaySearch && /*#__PURE__*/React.createElement(TextField, {\n      style: styles.filterControl,\n      fullWidth: true,\n      hintText: i18n.t('Search'),\n      value: this.props.messageFilter || '',\n      onChange: (event, messageFilter) => {\n        this.debouncedSearch(messageFilter);\n        this.props.setFilter(messageFilter, 'MESSAGE');\n      },\n      type: \"search\"\n    }), !checkedOptions && displaySearch && /*#__PURE__*/React.createElement(IconMenu, {\n      iconButtonElement: /*#__PURE__*/React.createElement(IconButton, null, /*#__PURE__*/React.createElement(MoreVertIcon, null)),\n      anchorOrigin: {\n        horizontal: 'right',\n        vertical: 'top'\n      },\n      targetOrigin: {\n        horizontal: 'right',\n        vertical: 'top'\n      },\n      style: styles.iconMenu,\n      menuStyle: {\n        overflowX: 'hidden'\n      }\n    }, /*#__PURE__*/React.createElement(Subheader, {\n      style: {\n        padding: '0px 16px'\n      }\n    }, i18n.t('Set filter')), this.props.displayExtendedChoices && /*#__PURE__*/React.createElement(Checkbox, {\n      style: {\n        padding: '0px 16px'\n      },\n      key: 'assignedToMeFilter',\n      label: i18n.t('Assigned to me'),\n      checked: this.props.assignedToMeFilter,\n      onClick: () => {\n        this.props.setFilter(!this.props.assignedToMeFilter, 'ASSIGNED_TO_ME');\n      }\n    }), /*#__PURE__*/React.createElement(Checkbox, {\n      style: {\n        padding: '0px 16px'\n      },\n      key: 'markedForFollowUpFilter',\n      label: i18n.t('Marked for followup'),\n      checked: this.props.markedForFollowUpFilter,\n      onClick: () => {\n        this.props.setFilter(!this.props.markedForFollowUpFilter, 'MARKED_FOR_FOLLOWUP');\n      }\n    }), /*#__PURE__*/React.createElement(Checkbox, {\n      style: {\n        padding: '0px 16px'\n      },\n      key: 'unreadFilter',\n      label: i18n.t('Unread messages'),\n      checked: this.props.unreadFilter,\n      onClick: () => {\n        this.props.setFilter(!this.props.unreadFilter, 'UNREAD');\n      }\n    })), /*#__PURE__*/React.createElement(FlatButton, {\n      style: {\n        width: '50px',\n        alignSelf: 'center'\n      },\n      icon: !this.props.wideview ? /*#__PURE__*/React.createElement(ViewList, null) : /*#__PURE__*/React.createElement(ViewFancy, null),\n      onClick: () => this.props.toogleWideview()\n    })));\n  }\n\n}\n\nToolbar.propTypes = {\n  assignedToMeFilter: propTypes.bool,\n  checkedOptions: propTypes.bool,\n  clearCheckedIds: propTypes.func,\n  displayExtendedChoices: propTypes.bool,\n  id: propTypes.string,\n  loadMessageConversations: propTypes.func,\n  markedForFollowUpFilter: propTypes.bool,\n  messageFilter: propTypes.string,\n  priorityFilter: propTypes.string,\n  selectedMessageConversation: propTypes.object,\n  selectedMessageType: propTypes.object,\n  setFilter: propTypes.func,\n  statusFilter: propTypes.string,\n  toogleWideview: propTypes.func,\n  unreadFilter: propTypes.bool,\n  wideview: propTypes.bool\n};\nexport default Toolbar;","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { Component } from 'react';\nimport propTypes from '@dhis2/prop-types';\nimport { connect } from 'react-redux';\nimport { compose } from 'recompose';\nimport Subheader from 'material-ui/Subheader/Subheader';\nimport MailIcon from 'material-ui-icons/MailOutline';\nimport i18n from '@dhis2/d2-i18n';\nimport * as api from '../../api/api.js';\nimport { loadMessageConversations, setIsInFeedbackRecipientGroup, clearCheckedIds, setSelectedMessageConversation, setSelectedMessageType, clearSelectedMessageConversation, updateInputFields, setFilter, setDisplayTimeDiff, clearAttachments } from '../../actions/index.js';\nimport theme from '../../styles/theme.js';\nimport MessageConversation from '../MessageConversation/MessageConversation.js';\nimport SidebarList from '../List/SidebarList.js';\nimport MessageConversationList from '../List/MessageConversationList.js';\nimport CreateMessage from '../MessageConversation/CreateMessage.js';\nimport Toolbar from '../Common/Toolbar.js';\nimport { subheader } from '../../styles/style.js';\nimport './MessagingCenter.css';\nconst EXTENDED_CHOICES = ['TICKET', 'VALIDATION_RESULT'];\nconst refreshTimerTotal = 300000; // 5 minutes\n\nconst refreshTimerInterval = 10000; // 10 seconds\n\nclass MessagingCenter extends Component {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"setAutoRefresh\", autoRefresh => {\n      // Cancel existing interval if it shouldn't autorefresh\n      if (!autoRefresh && this.intervalId) {\n        clearInterval(this.intervalId);\n        this.intervalId = null;\n      }\n\n      if (autoRefresh) {\n        this.intervalId = setInterval(this.tick, refreshTimerInterval);\n      }\n\n      this.setState({\n        autoRefresh,\n        refreshTimer: refreshTimerTotal\n      });\n    });\n\n    _defineProperty(this, \"tick\", () => {\n      const timerHasElapsed = this.state.refreshTimer - refreshTimerInterval <= 0;\n\n      if (timerHasElapsed) {\n        this.refresh();\n        this.setState({\n          refreshTimer: refreshTimerTotal\n        });\n      } else {\n        this.setState(prevState => ({\n          refreshTimer: prevState.refreshTimer - refreshTimerInterval\n        }));\n      }\n    });\n\n    _defineProperty(this, \"refresh\", () => {\n      this.props.messageTypes.map(messageType => this.props.loadMessageConversations(messageType, this.props.selectedMessageType));\n\n      if (this.props.selectedMessageConversation) {\n        this.props.setSelectedMessageConversation(this.props.selectedMessageConversation);\n      }\n    });\n\n    _defineProperty(this, \"toogleWideview\", () => {\n      this.setState({\n        wideview: !this.state.wideview\n      });\n    });\n\n    this.intervalId = null;\n    this.state = {\n      autoRefresh: false,\n      checkedItems: false,\n      refreshTimer: refreshTimerTotal,\n      wideview: true\n    };\n  }\n\n  componentDidMount() {\n    const selectedMessageType = this.props.match.params.messageType;\n    const selectedId = this.props.match.params.messageId;\n\n    if (selectedId && selectedId !== selectedMessageType && selectedId !== 'create') {\n      const initialMessageConversation = {\n        id: selectedId\n      };\n      this.props.setSelectedMessageConversation(initialMessageConversation);\n    }\n\n    api.isInFeedbackRecipientGroup(this.props.currentUser).then(result => this.props.setIsInFeedbackRecipientGroup(result));\n    this.props.messageTypes.map(messageType => this.props.loadMessageConversations(messageType, selectedMessageType));\n    this.props.setDisplayTimeDiff();\n  }\n\n  componentDidUpdate() {\n    const selectedMessageType = this.props.match.params.messageType;\n    const selectedId = this.props.match.params.messageId;\n\n    if (!this.props.settingSelectedMessageConversation && selectedId && selectedMessageType !== selectedId && selectedId !== 'create' && (this.props.selectedMessageConversation === undefined || selectedId !== this.props.selectedMessageConversation.id)) {\n      const initialMessageConversation = {\n        id: selectedId\n      };\n      this.props.setSelectedMessageConversation(initialMessageConversation);\n    }\n\n    if (selectedMessageType === selectedId && selectedMessageType !== this.props.selectedMessageType.id) {\n      this.props.setSelectedMessageType(selectedMessageType);\n    }\n\n    if ((selectedMessageType === selectedId || selectedId === 'create') && this.props.selectedMessageConversation !== undefined) {\n      this.props.clearSelectedMessageConversation();\n    }\n  }\n\n  componentWillUnmount() {\n    if (this.intervalId) {\n      clearInterval(this.intervalId);\n    }\n  }\n\n  render() {\n    const id = this.props.match.params.messageId;\n    const displayExtendedChoices = (this.props.selectedMessageType ? !!(EXTENDED_CHOICES.indexOf(this.props.selectedMessageType.id) + 1) : false) && this.props.isInFeedbackRecipientGroup;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"messaging-center\"\n    }, /*#__PURE__*/React.createElement(Toolbar, _extends({}, this.props, {\n      id: id,\n      wideview: this.state.wideview,\n      displayExtendedChoices: displayExtendedChoices,\n      toogleWideview: this.toogleWideview\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"messaging-center__main-content\"\n    }, /*#__PURE__*/React.createElement(SidebarList, _extends({}, this.props, {\n      drawerOpen: this.state.drawerOpen,\n      messageTypes: this.props.messageTypes,\n      autoRefresh: this.state.autoRefresh,\n      refreshTimer: this.state.refreshTimer,\n      setAutoRefresh: this.setAutoRefresh\n    })), this.props.selectedMessageConversation === undefined && !(this.state.wideview && id === 'create') && /*#__PURE__*/React.createElement(MessageConversationList, {\n      wideview: this.state.wideview,\n      displayExtendedChoices: displayExtendedChoices && this.state.wideview\n    }), id === 'create' && /*#__PURE__*/React.createElement(CreateMessage, _extends({}, this.props, {\n      wideview: this.state.wideview\n    })), this.props.selectedMessageConversation !== undefined && !this.state.wideview && /*#__PURE__*/React.createElement(MessageConversationList, {\n      wideview: this.state.wideview,\n      displayExtendedChoices: displayExtendedChoices && this.state.wideview\n    }), this.props.selectedMessageConversation && id !== 'create' ? this.props.selectedMessageConversation !== undefined && /*#__PURE__*/React.createElement(MessageConversation, _extends({}, this.props, {\n      messageConversation: this.props.selectedMessageConversation,\n      wideview: this.state.wideview,\n      disableLink: true,\n      displayExtendedChoices: displayExtendedChoices\n    })) : !this.state.wideview && id !== 'create' && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"messaging-center__no-message-selected\"\n    }, /*#__PURE__*/React.createElement(Subheader, {\n      style: subheader\n    }, i18n.t('Select a message')), /*#__PURE__*/React.createElement(MailIcon, {\n      style: {\n        color: theme.palette.primary1Color,\n        width: 120,\n        height: 120\n      }\n    }))));\n  }\n\n}\n\nMessagingCenter.propTypes = {\n  clearSelectedMessageConversation: propTypes.func,\n  currentUser: propTypes.object,\n  isInFeedbackRecipientGroup: propTypes.bool,\n  loadMessageConversations: propTypes.func,\n  match: propTypes.object,\n  messageTypes: propTypes.array,\n  selectedMessageConversation: propTypes.object,\n  selectedMessageType: propTypes.object,\n  setDisplayTimeDiff: propTypes.func,\n  setIsInFeedbackRecipientGroup: propTypes.func,\n  setSelectedMessageConversation: propTypes.func,\n  setSelectedMessageType: propTypes.func,\n  settingSelectedMessageConversation: propTypes.bool\n};\n\nconst mapStateToProps = state => ({\n  currentUser: state.messaging.currentUser,\n  snackMessage: state.messaging.snackMessage,\n  messageTypes: state.messaging.messageTypes,\n  messageConversations: state.messaging.messageConversations,\n  messageFilter: state.messaging.messageFilter,\n  statusFilter: state.messaging.statusFilter,\n  priorityFilter: state.messaging.priorityFilter,\n  assignedToMeFilter: state.messaging.assignedToMeFilter,\n  markedForFollowUpFilter: state.messaging.markedForFollowUpFilter,\n  unreadFilter: state.messaging.unreadFilter,\n  selectedMessageType: state.messaging.selectedMessageType,\n  selectedMessageConversation: state.messaging.selectedMessageConversation,\n  settingSelectedMessageConversation: state.messaging.settingSelectedMessageConversation,\n  checkedIds: state.messaging.checkedIds,\n  checkedOptions: state.messaging.checkedIds.length > 0,\n  loaded: state.messaging.loaded,\n  isInFeedbackRecipientGroup: state.messaging.isInFeedbackRecipientGroup,\n  attachments: state.messaging.attachments\n});\n\nexport default compose(connect(mapStateToProps, {\n  loadMessageConversations,\n  setIsInFeedbackRecipientGroup,\n  clearCheckedIds,\n  setSelectedMessageConversation,\n  setSelectedMessageType,\n  clearSelectedMessageConversation,\n  updateInputFields,\n  setFilter,\n  setDisplayTimeDiff,\n  clearAttachments\n}, null, {\n  pure: false\n}))(MessagingCenter);","import { Router, Route } from 'react-router-dom';\nimport { Redirect } from 'react-router';\nimport React from 'react';\nimport MessagingCenter from '../MessagingCenter/MessagingCenter.js';\nimport history from '../../utils/history.js';\n\nconst Routes = () => /*#__PURE__*/React.createElement(Router, {\n  history: history\n}, /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(Route, {\n  exact: true,\n  path: \"/\",\n  component: () => /*#__PURE__*/React.createElement(Redirect, {\n    to: \"/PRIVATE\"\n  })\n}), /*#__PURE__*/React.createElement(Route, {\n  path: \"/:messageType/:messageId?/:recipientId?\",\n  component: MessagingCenter\n})));\n\nexport default Routes;","import React, { useEffect } from 'react';\nimport propTypes from '@dhis2/prop-types';\nimport { useConfig } from '@dhis2/app-runtime';\nimport cx from 'classnames';\nimport { connect } from 'react-redux';\nimport { CircularProgress } from 'material-ui';\nimport '../../locales/index.js';\nimport CustomSnackBar from '../Common/CustomSnackBar.js';\nimport Routes from './Routes.js';\nimport { setCurrentUser, setDhis2CoreVersion } from '../../actions/index.js';\nimport classes from './App.module.css';\n\nconst App = ({\n  currentUser,\n  setCurrentUser,\n  setDhis2CoreVersion\n}) => {\n  const {\n    loading,\n    error\n  } = currentUser;\n  const {\n    serverVersion\n  } = useConfig();\n  useEffect(() => {\n    setDhis2CoreVersion(serverVersion.minor);\n    setCurrentUser();\n  }, []);\n\n  if (loading) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: classes.center\n    }, /*#__PURE__*/React.createElement(CircularProgress, {\n      size: 48\n    }));\n  }\n\n  if (error) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: cx(classes.center, classes.error)\n    }, error);\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(CustomSnackBar, null), /*#__PURE__*/React.createElement(Routes, null));\n};\n\nApp.propTypes = {\n  currentUser: propTypes.object.isRequired,\n  setCurrentUser: propTypes.func.isRequired,\n  setDhis2CoreVersion: propTypes.func.isRequired\n};\nexport default connect(state => ({\n  currentUser: state.messaging.currentUser\n}), {\n  setCurrentUser,\n  setDhis2CoreVersion\n})(App);","const messageTypes = [{\n  id: 'PRIVATE',\n  displayName: 'Inbox',\n  unread: 0,\n  loaded: 0,\n  loading: false,\n  total: 0,\n  page: 1\n}, {\n  id: 'VALIDATION_RESULT',\n  displayName: 'Validation',\n  unread: 0,\n  loaded: 0,\n  loading: false,\n  total: 0,\n  page: 1\n}, {\n  id: 'TICKET',\n  displayName: 'Ticket',\n  unread: 0,\n  loaded: 0,\n  loading: false,\n  total: 0,\n  page: 1\n}, {\n  id: 'SYSTEM',\n  displayName: 'System',\n  unread: 0,\n  loaded: 0,\n  loading: false,\n  total: 0,\n  page: 1\n}];\nexport default messageTypes;","import i18n from '@dhis2/d2-i18n';\nimport log from 'loglevel';\nimport * as actions from '../constants/actions.js';\nimport messageTypes from '../constants/messageTypes.js';\nimport { POSITIVE, NEGATIVE, NEUTRAL } from '../constants/development.js';\nimport { findIndexOfId } from '../utils/helpers.js';\nexport const initialState = {\n  currentUser: {\n    loading: true,\n    error: null,\n    id: null,\n    authorities: null,\n    userGroups: null\n  },\n  // Message conversation\n  messageConversations: {},\n  messageTypes,\n  selectedMessageType: undefined,\n  selectedMessageConversation: undefined,\n  settingSelectedMessageConversation: false,\n  checkedIds: [],\n  messageFilter: undefined,\n  statusFilter: undefined,\n  priorityFilter: undefined,\n  assignedToMeFilter: false,\n  markedForFollowUpFilter: false,\n  unreadFilter: false,\n  isInFeedbackRecipientGroup: false,\n  feedbackRecipientsId: undefined,\n  displayTimeDiff: 0,\n  // Input for create and reply\n  subject: '',\n  input: '',\n  recipients: [],\n  // Attachments\n  attachments: [],\n  // Snackbar\n  snackMessage: '',\n  onSnackActionClick: undefined,\n  onSnackRequestClose: undefined,\n  snackType: NEUTRAL\n};\n\nfunction messageReducer(state = initialState, action) {\n  const stateMessageTypes = state.messageTypes;\n  const oldAttachments = state.attachments;\n\n  switch (action.type) {\n    case actions.SET_CURRENT_USER:\n      return { ...state,\n        currentUser: {\n          loading: true,\n          error: null,\n          id: null,\n          authorities: null,\n          userGroups: null\n        }\n      };\n\n    case actions.SET_CURRENT_USER_SUCCESS:\n      return { ...state,\n        currentUser: {\n          loading: false,\n          error: null,\n          id: action.payload.id,\n          authorities: action.payload.authorities,\n          userGroups: action.payload.userGroups\n        }\n      };\n\n    case actions.SET_CURRENT_USER_ERROR:\n      return { ...state,\n        currentUser: {\n          loading: false,\n          error: action.payload,\n          id: null,\n          authorities: null,\n          userGroups: null\n        }\n      };\n\n    case actions.SET_DISPLAY_TIME_DIFF_SUCCESS:\n      return { ...state,\n        displayTimeDiff: action.payload\n      };\n\n    case actions.MESSAGE_CONVERSATIONS_LOAD_SUCCESS:\n      {\n        const replaceMessageType = stateMessageTypes.find(type => type.id === action.payload.messageType.id);\n        replaceMessageType.loaded = action.payload.messageConversations.length;\n        replaceMessageType.total = action.payload.pager.total;\n        replaceMessageType.unread = action.payload.nrOfUnread;\n        replaceMessageType.page = action.payload.pager.page;\n        replaceMessageType.loading = false;\n        messageTypes.splice([findIndexOfId(stateMessageTypes, replaceMessageType.id)], 1, replaceMessageType);\n        const setSelectedMessageType = action.payload.selectedMessageType === replaceMessageType.id && (action.payload.selectedMessageType === state.selectedMessageType || state.selectedMessageType === undefined);\n        return { ...state,\n          messageTypes,\n          messageConversations: { ...state.messageConversations,\n            [replaceMessageType.id]: action.payload.messageConversations\n          },\n          selectedMessageType: setSelectedMessageType ? replaceMessageType : state.selectedMessageType\n        };\n      }\n\n    case actions.MESSAGE_CONVERSATION_UPDATE_ERROR:\n      return { ...state,\n        snackMessage: action.payload.error.message,\n        snackType: NEGATIVE\n      };\n\n    case actions.MESSAGE_CONVERSATION_UPDATE_SUCCESS:\n      {\n        let snackMessage = '';\n\n        switch (action.payload.identifier) {\n          case 'STATUS':\n            snackMessage = i18n.t('Successfully updated status');\n            break;\n\n          case 'PRIORITY':\n            snackMessage = i18n.t('Successfully updated priority');\n            break;\n\n          case 'ASSIGNEE':\n            snackMessage = i18n.t('Successfully updated assignee');\n            break;\n\n          case 'FOLLOW_UP':\n            snackMessage = i18n.t('Successfully changed followup');\n            break;\n\n          default:\n            log.error('Unexpected identifier for updateMessageConversations success');\n            break;\n        }\n\n        return { ...state,\n          snackMessage,\n          snackType: POSITIVE\n        };\n      }\n\n    case actions.SEND_MESSAGE_ERROR:\n      return { ...state,\n        snackMessage: action.payload.error.message,\n        snackType: NEGATIVE\n      };\n\n    case actions.MESSAGE_CONVERSATIONS_DELETE_ERROR:\n      return { ...state,\n        snackMessage: action.payload.error.message,\n        snackType: NEGATIVE\n      };\n\n    case actions.MESSAGE_CONVERSATIONS_DELETE_SUCCESS:\n      return { ...state,\n        snackMessage: i18n.t('Successfully deleted message conversation(s)'),\n        snackType: POSITIVE\n      };\n\n    case actions.DISPLAY_SNACK_MESSAGE:\n      return { ...state,\n        snackMessage: action.payload.message,\n        snackType: action.payload.snackType,\n        onSnackActionClick: action.payload.onSnackActionClick,\n        onSnackRequestClose: action.payload.onSnackRequestClose\n      };\n\n    case actions.CLEAR_SNACK_MESSAGE:\n      return { ...state,\n        snackMessage: '',\n        snackType: NEUTRAL\n      };\n\n    case actions.SET_CHECKED:\n      {\n        const messageConversation = action.payload.messageConversation;\n        let checkedIds = state.checkedIds;\n\n        if (action.payload.selectedValue) {\n          checkedIds.push(messageConversation);\n        } else {\n          checkedIds = checkedIds.filter(element => element.id !== messageConversation.id);\n        }\n\n        return { ...state,\n          checkedIds\n        };\n      }\n\n    case actions.SET_ALL_CHECKED:\n      return { ...state,\n        checkedIds: action.payload.messageConversationIds\n      };\n\n    case actions.CLEAR_CHECKED:\n      return { ...state,\n        checkedIds: []\n      };\n\n    case actions.SET_SELECTED_MESSAGE_CONVERSATION_SUCCESS:\n      return { ...state,\n        selectedMessageConversation: action.payload.messageConversation,\n        settingSelectedMessageConversation: false\n      };\n\n    case actions.SET_SELECTED_MESSAGE_CONVERSATION:\n      return { ...state,\n        settingSelectedMessageConversation: true\n      };\n\n    case actions.CLEAR_SELECTED_MESSAGE_CONVERSATION:\n      return { ...state,\n        selectedMessageConversation: undefined\n      };\n\n    case actions.SET_SELECTED_MESSAGE_TYPE:\n      return { ...state,\n        checkedIds: [],\n        selectedMessageType: stateMessageTypes.find(type => type.id === action.payload.messageTypeId),\n        selectedMessageConversations: state.messageConversations[action.payload.messageTypeId],\n        selectedMessageConversation: undefined\n      };\n\n    case actions.UPDATE_INPUT_FIELDS:\n      return { ...state,\n        subject: action.payload.subject,\n        input: action.payload.input,\n        recipients: action.payload.recipients\n      };\n\n    case actions.ADD_RECIPIENT_BY_ID_SUCCESS:\n      return { ...state,\n        recipients: [...state.recipients, action.payload]\n      };\n\n    case actions.SET_FILTER:\n      return { ...state,\n        messageFilter: action.payload.filterType === 'MESSAGE' ? action.payload.filter : state.messageFilter,\n        statusFilter: action.payload.filterType === 'STATUS' ? action.payload.filter : state.statusFilter,\n        priorityFilter: action.payload.filterType === 'PRIORITY' ? action.payload.filter : state.priorityFilter,\n        assignedToMeFilter: action.payload.filterType === 'ASSIGNED_TO_ME' ? action.payload.filter : state.assignedToMeFilter,\n        markedForFollowUpFilter: action.payload.filterType === 'MARKED_FOR_FOLLOWUP' ? action.payload.filter : state.markedForFollowUpFilter,\n        unreadFilter: action.payload.filterType === 'UNREAD' ? action.payload.filter : state.unreadFilter\n      };\n\n    case actions.LOAD_MESSAGE_CONVERSATIONS:\n      {\n        const loadingMessageType = action.payload.messageType;\n        loadingMessageType.loading = true;\n\n        if (action.payload.loadMore) {\n          loadingMessageType.page++;\n        }\n\n        messageTypes[findIndexOfId(messageTypes, loadingMessageType.id)] = loadingMessageType; // TODO: This can probably be removed because action.payload.messageType === state.selectedMessageType\n\n        const selectedMessageType = state.selectedMessageType;\n\n        if (selectedMessageType) {\n          selectedMessageType.loading = true;\n\n          if (action.payload.loadMore) {\n            selectedMessageType.page++;\n          }\n        }\n\n        return { ...state,\n          messageTypes,\n          selectedMessageType\n        };\n      }\n\n    case actions.SET_IN_FEEDBACK_RECIPIENT_GROUP:\n      return { ...state,\n        isInFeedbackRecipientGroup: action.payload.isInFeedbackRecipientGroup.authorized,\n        feedbackRecipientsId: action.payload.isInFeedbackRecipientGroup.feedbackRecipientsId\n      };\n\n    case actions.ADD_ATTACHMENT_SUCCESS:\n      return { ...state,\n        attachments: state.attachments.map(attachment => attachment.name === action.payload.name ? {\n          id: action.payload.id,\n          name: attachment.name,\n          contentLength: attachment.contentLength,\n          loading: false\n        } : attachment)\n      };\n\n    case actions.ADD_ATTACHMENT_ERROR:\n      return { ...state,\n        attachments: oldAttachments.filter(attachment => attachment.id !== action.payload.attachmentId),\n        snackMessage: action.payload.error.message,\n        snackType: NEGATIVE\n      };\n\n    case actions.ADD_ATTACHMENT:\n      return { ...state,\n        attachments: state.attachments.concat({\n          name: action.payload.name,\n          contentLength: action.payload.size,\n          loading: true\n        })\n      };\n\n    case actions.REMOVE_ATTACHMENT:\n      return { ...state,\n        attachments: oldAttachments.filter(attachment => attachment.id !== action.payload.attachmentId)\n      };\n\n    case actions.CANCEL_ATTACHMENT:\n      return { ...state,\n        attachments: oldAttachments.filter(attachment => attachment.name !== action.payload.attachmentName)\n      };\n\n    case actions.CLEAR_ATTACHMENTS:\n      return { ...state,\n        attachments: []\n      };\n\n    case actions.SET_DHIS2_CORE_VERSION:\n      return { ...state,\n        dhis2CoreVersion: action.payload\n      };\n\n    default:\n      return state;\n  }\n}\n\nexport default messageReducer;","import { createStore, applyMiddleware, combineReducers, compose } from 'redux';\nimport ReduxThunk from 'redux-thunk';\nimport messageReducer from './reducers/messageReducer.js';\nconst middlewares = [ReduxThunk];\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\nconst reducer = combineReducers({\n  messaging: messageReducer\n});\nexport default createStore(reducer, composeEnhancers(applyMiddleware(...middlewares)));","import React from 'react';\nimport { Provider } from 'react-redux';\nimport MuiThemeProvider from 'material-ui/styles/MuiThemeProvider';\nimport { useDataEngine } from '@dhis2/app-runtime';\nimport theme from '../../styles/theme.js';\nimport App from './App.js';\nimport store from '../../store.js';\nimport { setEngine } from '../../api/api.js';\nimport '../../index.css';\nimport 'typeface-roboto';\n\nconst AppWrapper = () => {\n  const engine = useDataEngine();\n  setEngine(engine);\n  return /*#__PURE__*/React.createElement(Provider, {\n    store: store\n  }, /*#__PURE__*/React.createElement(MuiThemeProvider, {\n    muiTheme: theme\n  }, /*#__PURE__*/React.createElement(App, null)));\n};\n\nexport default AppWrapper;"],"sourceRoot":""}